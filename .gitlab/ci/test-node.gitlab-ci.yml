test:csslint:
  image: node:lts-alpine
  stage: test
  cache:
    key: $CI_JOB_NAME
    paths:
      - .stylelintcache
  script:
    - npm run css-lint
  needs:
    - npm
  rules:
    - !reference [.gitlab-ci-changes, rules]
    - !reference [.npm-changes, rules]
    - !reference [.stylelint-changes, rules]

test:prettier:
  image: node:lts-alpine
  stage: test
  cache:
    key: $CI_JOB_NAME
    paths:
      - ./node_modules/.cache/prettier/.prettier-cache
  script:
    - npm run prettier
  needs:
    - npm
  rules:
    - !reference [.gitlab-ci-changes, rules]
    - !reference [.npm-changes, rules]
    - !reference [.prettier-changes, rules]

test:eslint:
  image: node:lts-alpine
  stage: test
  cache:
    key: $CI_JOB_NAME
    paths:
      - .eslintcache
  script:
    - npm run eslint
  needs:
    - npm
  rules:
    - !reference [.gitlab-ci-changes, rules]
    - !reference [.npm-changes, rules]
    - !reference [.eslint-changes, rules]

services:
  core.http.redirect_response:
    class: ACP3\Core\Http\RedirectResponse
    public: true
    arguments:
      - '@core.http.request'
      - '@core.router'

  ACP3\Core\Http\RedirectResponse: '@core.http.redirect_response'

  core.http.request:
    class: ACP3\Core\Http\Request
    public: true
    factory: ['@core.http.request_factory', create]

  ACP3\Core\Http\Request: '@core.http.request'
  ACP3\Core\Http\RequestInterface: '@core.http.request'

  core.http.request_factory:
    class: ACP3\Core\Http\RequestFactory
    arguments:
      - '@core.config'
      - '@request_stack'

  core.http.response:
    class: Symfony\Component\HttpFoundation\Response

  request_stack:
    class: Symfony\Component\HttpFoundation\RequestStack
    public: true

  core.http.reset_request_listener:
    class: ACP3\Core\Http\EventListener\ResetRequestListener
    tags:
      - { name: core.eventSubscriber }

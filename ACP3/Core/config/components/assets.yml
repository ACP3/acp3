services:
  core.assets:
    class: ACP3\Core\Assets
    arguments:
      - '@core.environment.application_path'
      - '@core.assets.libraries'

  core.assets.cache:
    class: ACP3\Core\Assets\Cache
    arguments:
      - '@core.cache.system'
    public: false

  core.assets.logger:
    class: Psr\Log\LoggerInterface
    factory: 'core.logger.logger_factory:create'
    arguments:
      - 'assets'

  core.assets.abstract_minifier:
    arguments:
      - '@core.assets.logger'
      - '@core.assets'
      - '@core.environment.application_path'
      - '@core.cache.system'
      - '@core.config'
      - '@core.modules'
      - '@core.assets.file_resolver'
      - '%core.environment%'
    abstract: true

  core.assets.minifier.css:
    class: ACP3\Core\Assets\Minifier\CSS
    parent: core.assets.abstract_minifier

  core.assets.minifier.javascript:
    class: ACP3\Core\Assets\Minifier\JavaScript
    parent: core.assets.abstract_minifier

  core.assets.file_resolver:
    class: ACP3\Core\Assets\FileResolver
    arguments:
      - '@core.assets.cache'
      - '@core.environment.application_path'
      - '@core.environment.theme'
      - '@core.modules'

  core.assets.libraries:
    class: ACP3\Core\Assets\Libraries
    arguments:
      - '@core.http.request'
      - '@core.event_dispatcher'

  core.assets.page_css_classes:
    class: ACP3\Core\Assets\PageCssClasses
    arguments:
      - '@core.helpers.string_formatter'
      - '@core.breadcrumb.title'
      - '@core.http.request'

parameters:
  core.authentication.method: native

services:
  core.authentication.factory:
    class: ACP3\Core\Authentication\AuthenticationFactory
    arguments:
      - '@service_container'

  core.authentication:
    class: ACP3\Core\Authentication\AuthenticationInterface
    factory: ['@core.authentication.factory', get]
    arguments:
      - %core.authentication.method%

  core.authentication.native:
    class: ACP3\Core\Authentication\Native
    arguments:
      - '@core.http.request'
      - '@core.session'
      - '@users.model.userrepository'

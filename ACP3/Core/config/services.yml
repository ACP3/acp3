imports:
  - { resource: cache.yml }
  - { resource: ../../config.yml }
  - { resource: components/*.yml }
  - { resource: ../../Modules/ACP3/Permissions/Resources/config/services.yml }
  - { resource: ../../Modules/ACP3/System/Resources/config/services.yml }
  - { resource: ../../Modules/ACP3/Users/Resources/config/services.yml }

services:
  core.acl:
    class: ACP3\Core\ACL
    arguments:
      - '@users.model.user_model'
      - '@core.modules'
      - '@permissions.model.userrolerepository'
      - '@permissions.cache'

  core.config:
    class: ACP3\Core\Settings\Settings
    arguments:
      - '@core.event_dispatcher'
      - '@core.cache.system'
      - '@system.model.modulerepository'
      - '@system.model.settingsrepository'

  core.environment.application_path:
    synthetic: true

  fast_image_size:
    class: FastImageSize\FastImageSize

  core.image:
    class: ACP3\Core\Picture
    arguments:
      - '@fast_image_size'
      - '@core.http.response'
      - '@core.environment.application_path'
      - '%core.environment%'
    shared: false

  core.pagination:
    class: ACP3\Core\Pagination
    arguments:
      - '@core.breadcrumb.title'
      - '@core.i18n.translator'
      - '@core.http.request'
      - '@core.router'

  core.registry:
    class: ACP3\Core\Registry

  core.router:
    class: ACP3\Core\Router\Router
    arguments:
      - '@core.http.request'
      - '@core.environment.application_path'
      - '@core.config'
      - '%core.environment%'

  core.session:
    class: ACP3\Core\Session\SessionHandler
    arguments:
      - '@core.db'
      - '@core.environment.application_path'
      - '@core.http.request'
      - '@core.http.response'

  core.xml:
    class: ACP3\Core\XML

  core.event_dispatcher:
    class: Symfony\Component\EventDispatcher\ContainerAwareEventDispatcher
    arguments:
      - '@service_container'

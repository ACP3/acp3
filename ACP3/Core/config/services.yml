imports:
  - { resource: cache.yml }
  - { resource: ../../config.yml }
  - { resource: components/assets.yml }
  - { resource: components/authentication.yml }
  - { resource: components/controller.yml }
  - { resource: components/datagrid.yml }
  - { resource: components/date.yml }
  - { resource: components/helpers.yml }
  - { resource: components/http.yml }
  - { resource: components/language.yml }
  - { resource: components/modules.yml }
  - { resource: components/nestedsets.yml }
  - { resource: components/validation.yml }
  - { resource: components/view.yml }
  - { resource: ../WYSIWYG/config/services.yml }
  - { resource: ../../Modules/ACP3/Permissions/Resources/config/services.yml }
  - { resource: ../../Modules/ACP3/Seo/Resources/config/services.yml }
  - { resource: ../../Modules/ACP3/System/Resources/config/services.yml }
  - { resource: ../../Modules/ACP3/Users/Resources/config/services.yml }

services:
  core.acl:
    class: ACP3\Core\ACL
    arguments:
      - '@core.user'
      - '@core.modules'
      - '@permissions.model.rolerepository'
      - '@permissions.model.userrolerepository'
      - '@permissions.model.privilegerepository'
      - '@permissions.cache'

  core.application.front_controller:
    class: ACP3\Core\Application\FrontController
    arguments:
      - '@service_container'

  core.breadcrumb:
    class: ACP3\Core\Breadcrumb
    arguments: ['@service_container', '@core.lang', '@core.request', '@core.router', '@core.config']

  core.cache.system:
    class: ACP3\Core\Cache
    arguments: ['@service_container', @core.environment.application_path, 'system']

  core.config:
    class: ACP3\Core\Config
    arguments: ['@core.cache.system', '@system.model.modulerepository', @system.model.settingsrepository]

  core.db:
    class: ACP3\Core\DB
    arguments:
      - @core.logger
      - @core.environment.application_path
      - %core.environment%
      - { dbname: '%db_name%', user: '%db_user%', password: '%db_password%', host: '%db_host%', driver: '%db_driver%', charset: '%db_charset%'}
      - '%db_table_prefix%'
      - '%cache_driver%'

  core.functions:
    class: ACP3\Core\Functions

  core.image:
    class: ACP3\Core\Picture
    arguments: [@core.response, @core.environment.application_path, %core.environment%]
    scope: prototype

  core.logger:
    class: ACP3\Core\Logger
    arguments:
      - @core.environment.application_path

  core.mailer:
    class: ACP3\Core\Mailer
    arguments:
      - @core.logger
      - '@core.view'
      - '@core.config'
      - @core.helpers.stringFormatter

  core.pagination:
    class: ACP3\Core\Pagination
    arguments: ['@core.user', '@core.breadcrumb', '@core.lang', '@core.seo', '@core.request', '@core.router', '@core.view']

  core.redirect:
    class: ACP3\Core\Redirect
    arguments: ['@core.request', '@core.router']

  core.seo:
    class: ACP3\Core\SEO
    arguments: ['@core.lang', '@core.request', '@core.router.aliases', '@core.helpers.forms', '@seo.cache', '@core.config', '@seo.model.seorepository']

  core.session:
    class: ACP3\Core\SessionHandler
    arguments: ['@core.db', @core.environment.application_path, @core.request]

  core.user:
    class: ACP3\Core\User
    arguments: [@core.request, @core.environment.application_path, @core.authentication, '@core.session', '@core.helpers.secure', '@core.config', '@users.model.userrepository']

  core.xml:
    class: ACP3\Core\XML

  core.eventDispatcher:
    class: Symfony\Component\EventDispatcher\ContainerAwareEventDispatcher
    arguments: [@service_container]

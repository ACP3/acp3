services:
  menus.event.on_menus_model_before_delete_listener:
    class: ACP3\Modules\ACP3\Menus\Event\Listener\OnMenusModelBeforeDeleteListener
    arguments:
      - '@menus.cache'
      - '@menus.model.menurepository'
      - '@menus.model.menuitemrepository'
      - '@menus.model.menu_items_model'
    tags:
      - { name: core.eventListener, event: menus.model.menus.before_delete, method: execute }

  menus.event.update_menus_cache_on_model_after_save_listener:
    class: ACP3\Modules\ACP3\Menus\Event\Listener\UpdateMenusCacheOnModelAfterSaveListener
    arguments:
      - '@menus.cache'
    tags:
      - { name: core.eventListener, event: menus.model.menus.after_save, method: execute }
      - { name: core.eventListener, event: menus.model.menu_items.after_save, method: execute }
      - { name: core.eventListener, event: menus.model.menu_items.after_delete, method: execute }

  menus.event.on_menus_layout_render_manage_menu_item_listener:
    class: ACP3\Modules\ACP3\Menus\Event\Listener\OnMenusLayoutRenderManageMenuItemListener
    arguments:
      - '@core.acl'
      - '@core.i18n.translator'
      - '@core.view'
      - '@core.helpers.forms'
      - '@menus.helpers.menuitemformfields'
      - '@menus.model.menuitemrepository'
    tags:
      - { name: core.eventListener, event: menus.layout.render_manage_menu_item, method: renderManageMenuItem }

  menus.event_on_menus_validation_validate_manage_menu_item_listener:
    class: ACP3\Modules\ACP3\Menus\Event\Listener\OnMenusValidationValidateManageMenuItem
    arguments:
      - '@core.acl'
      - '@core.i18n.translator'
    tags:
      - { name: core.eventListener, event: menus.validation.validate_manage_menu_item, method: validateManageMenuItem }

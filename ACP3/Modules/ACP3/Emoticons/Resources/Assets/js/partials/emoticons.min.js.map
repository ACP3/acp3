{"version":3,"sources":["ACP3/Modules/ACP3/Emoticons/Resources/Assets/js/partials/emoticons.js"],"names":["jQuery","fn","getCaretPosition","selectionStart","document","selection","focus","range","createRange","re","createTextRange","rc","duplicate","moveToBookmark","getBookmark","setEndPoint","text","length","setCaretPosition","pos","each","index","elem","setSelectionRange","collapse","moveEnd","moveStart","select","insertEmoticon","textareaId","caretPosition","textarea","$","$this","click","e","preventDefault","currentValue","val","textBeforeSelection","substr","textAfterSelection","attr","blur","data"],"mappings":"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","sourcesContent":["/**\n * Cursorposition in einem Textfeld bestimmen\n *\n * @returns {*}\n */\njQuery.fn.getCaretPosition = function () {\n    if (this[0].selectionStart) {\n        return this[0].selectionStart;\n    } else if (document.selection) {\n        this[0].focus();\n\n        const range = document.selection.createRange();\n        if (range == null) {\n            return 0;\n        }\n\n        const re = this[0].createTextRange(),\n            rc = re.duplicate();\n        re.moveToBookmark(range.getBookmark());\n        rc.setEndPoint('EndToStart', re);\n\n        return rc.text.length;\n    }\n    return 0;\n};\n\n/**\n * Cursorposition in einem Textfeld an eine bestimme Position setzen\n *\n * @param pos\n * @returns {jQuery.fn}\n */\njQuery.fn.setCaretPosition = function (pos) {\n    this.each(function (index, elem) {\n        if (elem.setSelectionRange) {\n            elem.setSelectionRange(pos, pos);\n        } else if (elem.createTextRange) {\n            const range = elem.createTextRange();\n            range.collapse(true);\n            range.moveEnd('character', pos);\n            range.moveStart('character', pos);\n            range.select();\n        }\n    });\n    return this;\n};\n\n/**\n *\n * @param textareaId\n */\njQuery.fn.insertEmoticon = function (textareaId) {\n    let caretPosition = 0;\n    const textarea = $(textareaId),\n        $this = $(this);\n\n    $this.click(function (e) {\n        e.preventDefault();\n\n        let currentValue = textarea.val(),\n            textBeforeSelection = currentValue.substr(0, caretPosition),\n            textAfterSelection = currentValue.substr(caretPosition);\n\n        caretPosition += $(this).attr('title').length + 2;\n\n        textarea.val(textBeforeSelection + ' ' + $(this).attr('title') + ' ' + textAfterSelection).focus().setCaretPosition(caretPosition);\n    });\n\n    // Aktuelle Cursorposition speichern\n    textarea.blur(() => {\n        caretPosition = textarea.getCaretPosition();\n    });\n};\n\n(($) => {\n    $('.icons a').insertEmoticon($('.icons').data('emoticons-input'));\n})(jQuery);\n"],"file":"ACP3\\Modules\\ACP3\\Emoticons\\Resources\\Assets\\js\\partials\\emoticons.min.js"}
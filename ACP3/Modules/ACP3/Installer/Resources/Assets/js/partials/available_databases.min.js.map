{"version":3,"sources":["ACP3/Modules/ACP3/Installer/Resources/Assets/js/partials/ACP3/Modules/ACP3/Installer/Resources/Assets/js/partials/available_databases.js"],"names":["document","dbName","getElementById","formFields","querySelectorAll","ajaxUrl","dataset","availableDatabasesUrl","forEach","formField","addEventListener","async","disabled","i","children","length","remove","classList","formData","FormData","append","value","response","fetch","method","body","headers","X-Requested-With","responseData","json","insertAdjacentHTML","add"],"mappings":"AAKA,CAAEA,IACA,MAAMC,EAASD,EAASE,eAAe,WACjCC,EAAaH,EAASI,iBAAiB,oCACvCC,EAAUJ,EAAOK,QAAQC,sBAE/BJ,EAAWK,QAASC,IAClBA,EAAUC,iBAAiB,SAAUC,UACnCV,EAAOW,UAAA,EAEP,IAAK,IAAIC,EAAI,EAAGA,EAAIZ,EAAOa,SAASC,SAAUF,EAC5CZ,EAAOa,SAASD,GAAGG,SAGrBb,EAAWK,QAASC,IAClBA,EAAUQ,UAAUD,OAAO,aAAc,cAG3C,MAAME,EAAW,IAAIC,SACrBD,EAASE,OAAO,UAAWpB,EAASE,eAAe,WAAWmB,OAC9DH,EAASE,OAAO,UAAWpB,EAASE,eAAe,WAAWmB,OAC9DH,EAASE,OAAO,cAAepB,EAASE,eAAe,eAAemB,OAEtE,IACE,MAAMC,QAAiBC,MAAMlB,EAAS,CACpCmB,OAAQ,OACRC,KAAMP,EACNQ,QAAS,CACPC,mBAAoB,oBAGlBC,QAAqBN,EAASO,OAEpC,GAAID,EAAab,OAAS,EAAG,CAC3B,IAAK,IAAIF,EAAI,EAAGA,EAAIe,EAAab,SAAUF,EACzCZ,EAAO6B,mBACL,YACA,kBAAoBF,EAAaf,GAAK,KAAOe,EAAaf,GAAK,aAInEV,EAAWK,QAASC,IAClBA,EAAUQ,UAAUc,IAAI,mBAG1B5B,EAAWK,QAASC,IAClBA,EAAUQ,UAAUc,IAAI,gBAvB9B,QA2BE9B,EAAOW,UAAA,QAjDf,CAqDGZ","sourcesContent":["/*\n * Copyright (c) by the ACP3 Developers.\n * See the LICENSE file at the top-level module directory for licencing details.\n */\n\n((document) => {\n  const dbName = document.getElementById(\"db-name\");\n  const formFields = document.querySelectorAll(\"#db-host, #db-user, #db-password\");\n  const ajaxUrl = dbName.dataset.availableDatabasesUrl;\n\n  formFields.forEach((formField) => {\n    formField.addEventListener(\"change\", async () => {\n      dbName.disabled = true;\n\n      for (let i = 1; i < dbName.children.length; ++i) {\n        dbName.children[i].remove();\n      }\n\n      formFields.forEach((formField) => {\n        formField.classList.remove(\"is-invalid\", \"is-valid\");\n      });\n\n      const formData = new FormData();\n      formData.append(\"db_host\", document.getElementById(\"db-host\").value);\n      formData.append(\"db_user\", document.getElementById(\"db-user\").value);\n      formData.append(\"db_password\", document.getElementById(\"db-password\").value);\n\n      try {\n        const response = await fetch(ajaxUrl, {\n          method: \"POST\",\n          body: formData,\n          headers: {\n            \"X-Requested-With\": \"XMLHttpRequest\",\n          },\n        });\n        const responseData = await response.json();\n\n        if (responseData.length > 0) {\n          for (let i = 0; i < responseData.length; ++i) {\n            dbName.insertAdjacentHTML(\n              \"beforeend\",\n              '<option value=\"' + responseData[i] + '\">' + responseData[i] + \"</option>\"\n            );\n          }\n\n          formFields.forEach((formField) => {\n            formField.classList.add(\"is-valid\");\n          });\n        } else {\n          formFields.forEach((formField) => {\n            formField.classList.add(\"is-invalid\");\n          });\n        }\n      } finally {\n        dbName.disabled = false;\n      }\n    });\n  });\n})(document);\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFDUDMvTW9kdWxlcy9BQ1AzL0luc3RhbGxlci9SZXNvdXJjZXMvQXNzZXRzL2pzL3BhcnRpYWxzL2F2YWlsYWJsZV9kYXRhYmFzZXMuanMiXSwibmFtZXMiOlsiZG9jdW1lbnQiLCJkYk5hbWUiLCJnZXRFbGVtZW50QnlJZCIsImZvcm1GaWVsZHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYWpheFVybCIsImRhdGFzZXQiLCJhdmFpbGFibGVEYXRhYmFzZXNVcmwiLCJmb3JFYWNoIiwiZm9ybUZpZWxkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImFzeW5jIiwiZGlzYWJsZWQiLCJpIiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJyZW1vdmUiLCJjbGFzc0xpc3QiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwidmFsdWUiLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiYm9keSIsImhlYWRlcnMiLCJYLVJlcXVlc3RlZC1XaXRoIiwicmVzcG9uc2VEYXRhIiwianNvbiIsImluc2VydEFkamFjZW50SFRNTCIsImFkZCJdLCJtYXBwaW5ncyI6IkFBS0EsQ0FBRUEsSUFDQSxNQUFNQyxFQUFTRCxFQUFTRSxlQUFlLFdBQ2pDQyxFQUFhSCxFQUFTSSxpQkFBaUIsb0NBQ3ZDQyxFQUFVSixFQUFPSyxRQUFRQyxzQkFFL0JKLEVBQVdLLFFBQVNDLElBQ2xCQSxFQUFVQyxpQkFBaUIsU0FBVUMsVUFDbkNWLEVBQU9XLFVBQUEsRUFFUCxJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSVosRUFBT2EsU0FBU0MsU0FBVUYsRUFDNUNaLEVBQU9hLFNBQVNELEdBQUdHLFNBR3JCYixFQUFXSyxRQUFTQyxJQUNsQkEsRUFBVVEsVUFBVUQsT0FBTyxhQUFjLGNBRzNDLE1BQU1FLEVBQVcsSUFBSUMsU0FDckJELEVBQVNFLE9BQU8sVUFBV3BCLEVBQVNFLGVBQWUsV0FBV21CLE9BQzlESCxFQUFTRSxPQUFPLFVBQVdwQixFQUFTRSxlQUFlLFdBQVdtQixPQUM5REgsRUFBU0UsT0FBTyxjQUFlcEIsRUFBU0UsZUFBZSxlQUFlbUIsT0FFdEUsSUFDRSxNQUFNQyxRQUFpQkMsTUFBTWxCLEVBQVMsQ0FDcENtQixPQUFRLE9BQ1JDLEtBQU1QLEVBQ05RLFFBQVMsQ0FDUEMsbUJBQW9CLG9CQUdsQkMsUUFBcUJOLEVBQVNPLE9BRXBDLEdBQUlELEVBQWFiLE9BQVMsRUFBRyxDQUMzQixJQUFLLElBQUlGLEVBQUksRUFBR0EsRUFBSWUsRUFBYWIsU0FBVUYsRUFDekNaLEVBQU82QixtQkFDTCxZQUNBLGtCQUFvQkYsRUFBYWYsR0FBSyxLQUFPZSxFQUFhZixHQUFLLGFBSW5FVixFQUFXSyxRQUFTQyxJQUNsQkEsRUFBVVEsVUFBVWMsSUFBSSxtQkFHMUI1QixFQUFXSyxRQUFTQyxJQUNsQkEsRUFBVVEsVUFBVWMsSUFBSSxnQkF2QjlCLFFBMkJFOUIsRUFBT1csVUFBQSxRQWpEZixDQXFER1oiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IChjKSBieSB0aGUgQUNQMyBEZXZlbG9wZXJzLlxuICogU2VlIHRoZSBMSUNFTlNFIGZpbGUgYXQgdGhlIHRvcC1sZXZlbCBtb2R1bGUgZGlyZWN0b3J5IGZvciBsaWNlbmNpbmcgZGV0YWlscy5cbiAqL1xuXG4oKGRvY3VtZW50KSA9PiB7XG4gIGNvbnN0IGRiTmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGItbmFtZVwiKTtcbiAgY29uc3QgZm9ybUZpZWxkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIjZGItaG9zdCwgI2RiLXVzZXIsICNkYi1wYXNzd29yZFwiKTtcbiAgY29uc3QgYWpheFVybCA9IGRiTmFtZS5kYXRhc2V0LmF2YWlsYWJsZURhdGFiYXNlc1VybDtcblxuICBmb3JtRmllbGRzLmZvckVhY2goKGZvcm1GaWVsZCkgPT4ge1xuICAgIGZvcm1GaWVsZC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGRiTmFtZS5kaXNhYmxlZCA9IHRydWU7XG5cbiAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgZGJOYW1lLmNoaWxkcmVuLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIGRiTmFtZS5jaGlsZHJlbltpXS5yZW1vdmUoKTtcbiAgICAgIH1cblxuICAgICAgZm9ybUZpZWxkcy5mb3JFYWNoKChmb3JtRmllbGQpID0+IHtcbiAgICAgICAgZm9ybUZpZWxkLmNsYXNzTGlzdC5yZW1vdmUoXCJpcy1pbnZhbGlkXCIsIFwiaXMtdmFsaWRcIik7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcbiAgICAgIGZvcm1EYXRhLmFwcGVuZChcImRiX2hvc3RcIiwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkYi1ob3N0XCIpLnZhbHVlKTtcbiAgICAgIGZvcm1EYXRhLmFwcGVuZChcImRiX3VzZXJcIiwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkYi11c2VyXCIpLnZhbHVlKTtcbiAgICAgIGZvcm1EYXRhLmFwcGVuZChcImRiX3Bhc3N3b3JkXCIsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGItcGFzc3dvcmRcIikudmFsdWUpO1xuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGFqYXhVcmwsIHtcbiAgICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICAgIGJvZHk6IGZvcm1EYXRhLFxuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgIFwiWC1SZXF1ZXN0ZWQtV2l0aFwiOiBcIlhNTEh0dHBSZXF1ZXN0XCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgICAgICBpZiAocmVzcG9uc2VEYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlc3BvbnNlRGF0YS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgZGJOYW1lLmluc2VydEFkamFjZW50SFRNTChcbiAgICAgICAgICAgICAgXCJiZWZvcmVlbmRcIixcbiAgICAgICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCInICsgcmVzcG9uc2VEYXRhW2ldICsgJ1wiPicgKyByZXNwb25zZURhdGFbaV0gKyBcIjwvb3B0aW9uPlwiXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGZvcm1GaWVsZHMuZm9yRWFjaCgoZm9ybUZpZWxkKSA9PiB7XG4gICAgICAgICAgICBmb3JtRmllbGQuY2xhc3NMaXN0LmFkZChcImlzLXZhbGlkXCIpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvcm1GaWVsZHMuZm9yRWFjaCgoZm9ybUZpZWxkKSA9PiB7XG4gICAgICAgICAgICBmb3JtRmllbGQuY2xhc3NMaXN0LmFkZChcImlzLWludmFsaWRcIik7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGRiTmFtZS5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn0pKGRvY3VtZW50KTtcbiJdfQ==","file":"available_databases.min.js"}
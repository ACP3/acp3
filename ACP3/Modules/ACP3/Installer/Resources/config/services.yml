imports:
  - { resource: components/*.yml }

parameters:
  core.environment: !php/const ACP3\Core\Environment\ApplicationMode::INSTALLER

services:
  core.application.event.listener.add_template_variables_listener:
    class: ACP3\Modules\ACP3\Installer\Core\Application\Event\Listener\AddTemplatesVariablesListener
    arguments:
      - '@core.environment.application_path'
      - '@core.environment.theme'
      - '@core.i18n.translator'
      - '@core.view'
      - '@core.http.request'
    tags:
      - { name: core.eventListener, event: core.application.controller_action_dispatcher.before_dispatch }

  core.application.event.listener.on_language_change_listener:
    class: ACP3\Modules\ACP3\Installer\Core\Application\Event\Listener\OnLanguageChangeListener
    arguments:
      - '@core.http.request'
      - '@core.http.redirect_response'
    tags:
      - { name: core.eventListener, event: core.application.controller_action_dispatcher.before_dispatch }

  core.context.install:
    class: ACP3\Modules\ACP3\Installer\Core\Controller\Context\InstallerContext
    arguments:
      - '@service_container'
      - '@core.i18n.translator'
      - '@core.http.request'
      - '@core.router'
      - '@core.view'
      - '@core.http.response'
      - '@core.environment.application_path'
      - '@core.http.redirect_response'

  core.controller.install:
    abstract: true
    arguments:
      - '@core.context.install'

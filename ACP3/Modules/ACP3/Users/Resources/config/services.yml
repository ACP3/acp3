imports:
  - { resource: components/*.yml }

services:
  core.authentication.native:
    class: ACP3\Modules\ACP3\Users\Core\Authentication\Native
    arguments:
      - '@core.http.request'
      - '@core.session'
      - '@users.model.authentication_model'
      - '@users.model.repository.users_repository'
    tags:
      - { name: core.authentication }
    public: false

  users.core.application.bootstrap_cache.is_authenticated_provider:
    class: ACP3\Modules\ACP3\Users\Core\Application\BootstrapCache\IsAuthenticatedProvider
    arguments:
      - '@core.config'
      - '@core.acl'
      - '@users.model.user_model'
    public: false

  http_cache.hash_generator:
    class: FOS\HttpCache\UserContext\DefaultHashGenerator
    arguments:
      - ['@users.core.application.bootstrap_cache.is_authenticated_provider']
    public: false

  users.helpers.forms:
    class: ACP3\Modules\ACP3\Users\Helpers\Forms
    arguments:
      - '@core.i18n.translator'
      - '@core.i18n.country_list'
      - '@core.http.request'
      - '@core.helpers.forms'

  users.helpers.data_grid.column_renderer.user_roles_column_renderer:
    class: ACP3\Modules\ACP3\Users\Helpers\DataGrid\ColumnRenderer\UserRolesColumnRenderer
    arguments:
      - '@core.acl'
    tags:
      - { name: core.helpers.data_grid.column_renderer }
    public: false

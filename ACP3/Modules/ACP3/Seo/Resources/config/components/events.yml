services:
  seo.event.on_breadcrumb_title_get_site_and_page_title_before_listener:
    class: ACP3\Modules\ACP3\Seo\Event\Listener\OnBreadcrumbTitleGetSiteAndPageTitleBeforeListener
    arguments:
      - '@core.http.request'
      - '@seo.helper.meta_statements'
    tags:
      - { name: core.eventListener, event: core.breadcrumb.title.get_site_and_page_title_before, method: useMetaTitle, priority: -255 }

  seo.event.on_controller_action_before_dispatch_listener:
    class: ACP3\Modules\ACP3\Seo\Event\Listener\OnControllerActionBeforeDispatchListener
    arguments:
      - '@core.environment.application_path'
      - '@core.http.request'
      - '@core.router'
      - '@seo.core.router.aliases'
      - '@seo.helper.meta_statements'
    tags:
      - { name: core.eventListener, event: core.application.controller_action_dispatcher.before_dispatch, method: onBeforeDispatch }

  seo.event.on_layout_meta_listener:
    class: ACP3\Modules\ACP3\Seo\Event\Listener\OnLayoutMetaListener
    arguments:
      - '@core.view'
      - '@seo.helper.meta_statements'
    tags:
      - { name: core.eventListener, event: core.layout.meta, method: renderSeoMetaTags }

  seo.event.on_layout_seo_render_form_fields_listener:
    class: ACP3\Modules\ACP3\Seo\Event\Listener\OnLayoutSeoRenderFormFieldsListener
    arguments:
      - '@core.acl'
      - '@core.view'
      - '@seo.helper.meta_form_fields'
    tags:
      - { name: core.eventListener, event: seo.layout.render_form_fields, method: renderSeoFormFields }

  seo.event.generate_sitemap_on_model_after_save_listener:
    class: ACP3\Modules\ACP3\Seo\Event\Listener\GenerateSitemapOnModelAfterSaveListener
    arguments:
      - '@seo.sitemap_logger'
      - '@core.config'
      - '@seo.utility.sitemap_availability_registrar'
      - '@seo.model.sitemap_generation_model'
    tags:
      - { name: core.eventListener, event: core.model.after_save, method: generateSeoSitemap, priority: -255 }

  seo.event.insert_uri_alias_on_model_after_save_listener:
    class: ACP3\Modules\ACP3\Seo\Event\Listener\InsertUriAliasOnModelAfterSaveListener
    arguments:
      - '@core.acl'
      - '@seo.helper.uri_alias_manager'
    tags:
      - { name: core.eventListener, event: core.model.after_save, method: insertUriAlias }

  seo.event.on_validation_validate_uri_alias_listener:
    class: ACP3\Modules\ACP3\Seo\Event\Listener\OnSeoValidationValidateUriAlias
    arguments:
      - '@core.acl'
      - '@core.i18n.translator'
    tags:
      - { name: core.eventListener, event: seo.validation.validate_uri_alias, method: validateUriAlias }

  seo.event.update_seo_cache_on_model_after_save_listener:
    class: ACP3\Modules\ACP3\Seo\Event\Listener\UpdateSeoCacheOnModelAfterSaveListener
    arguments:
      - '@seo.cache'
    tags:
      - { name: core.eventListener, event: seo.model.seo.after_save, method: execute }
      - { name: core.eventListener, event: seo.model.seo.after_delete, method: execute }

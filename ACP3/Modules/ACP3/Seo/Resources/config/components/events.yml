services:
  _defaults:
    autowire: true

  seo.event.on_breadcrumb_title_get_site_and_page_title_before_listener:
    class: ACP3\Modules\ACP3\Seo\Event\Listener\OnBreadcrumbTitleGetSiteAndPageTitleBeforeListener
    tags:
      - { name: core.eventListener, event: core.breadcrumb.title.get_site_and_page_title_before, priority: -255 }

  seo.event.on_layout_meta_listener:
    class: ACP3\Modules\ACP3\Seo\Event\Listener\OnLayoutMetaListener
    tags:
      - { name: core.eventListener, event: core.layout.meta }

  seo.event.on_layout_seo_render_form_fields_listener:
    class: ACP3\Modules\ACP3\Seo\Event\Listener\OnLayoutSeoRenderFormFieldsListener
    tags:
      - { name: core.eventListener, event: core.layout.form_extension }

  seo.event.generate_sitemap_listener:
    class: ACP3\Modules\ACP3\Seo\Event\Listener\GenerateSitemapListener
    arguments:
      $logger: "@seo.sitemap_logger"
      $sitemapGenerationModel: "@seo.model.sitemap_generation_model"
    tags:
      - { name: core.eventSubscriber }

  seo.event.insert_uri_alias_on_model_after_save_listener:
    class: ACP3\Modules\ACP3\Seo\Event\Listener\InsertUriAliasOnModelAfterSaveListener
    tags:
      - { name: core.eventListener, event: core.model.after_save }

  seo.event.on_validation_validate_uri_alias_listener:
    class: ACP3\Modules\ACP3\Seo\Event\Listener\OnSeoValidationValidateUriAlias
    tags:
      - { name: core.eventListener, event: core.validation.form_extension }
      - { name: core.eventListener, event: seo.validation.validate_uri_alias }

  seo.event.update_seo_cache_on_model_after_save_listener:
    class: ACP3\Modules\ACP3\Seo\Event\Listener\UpdateSeoCacheOnModelAfterSaveListener
    tags:
      - { name: core.eventListener, event: seo.model.seo.after_save }
      - { name: core.eventListener, event: seo.model.seo.after_delete }

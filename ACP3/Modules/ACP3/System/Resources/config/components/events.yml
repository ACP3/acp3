services:
  system.event.listener.invalidate_page_cache_on_model_after_save_listener:
    class: ACP3\Modules\ACP3\System\Event\Listener\InvalidatePageCacheOnModelAfterSaveListener
    arguments:
      - '@core.environment.application_path'
      - '@core.config'
      - '@system.helpers.can_use_page_cache'
    tags:
      - { name: core.eventListener, event: core.model.after_save }
      - { name: core.eventListener, event: core.model.after_delete }

  system.event.listener.invalidate_page_cache_on_settings_save_before_listener:
    class: ACP3\Modules\ACP3\System\Event\Listener\InvalidatePageCacheOnSettingsSaveBeforeListener
    arguments:
      - '@core.environment.application_path'
      - '@core.config'
      - '@core.modules'
      - '@system.model.settingsrepository'
      - '@system.helpers.can_use_page_cache'
    tags:
      - { name: core.eventListener, event: core.settings.save_before }

  system.event.listener.render_page_cache_invalid_listener:
    class: ACP3\Modules\ACP3\System\Event\Listener\RenderPageCacheInvalidListener
    arguments:
      - '@core.acl'
      - '@core.config'
      - '@core.view'
    tags:
      - { name: core.eventListener, event: layout.content_before }

  system.event.listener.render_cookie_consent_listener:
    class: ACP3\Modules\ACP3\System\Event\Listener\RenderCookieConsentListener
    arguments:
      - '@core.config'
      - '@core.view'
    tags:
      - { name: core.eventListener, event: layout.content_before }

  system.event.listener.render_update_check_alert_on_layout_content_before_listener:
    class: ACP3\Modules\ACP3\System\Event\Listener\RenderUpdateCheckAlertOnLayoutContentBeforeListener
    arguments:
      - '@core.acl'
      - '@core.http.request'
      - '@core.view'
      - '@system.helpers.update_check'
    tags:
      - { name: core.eventListener, event: layout.content_before }

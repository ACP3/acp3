"use strict";var cssClassName="row-selected bg-light",markEntries=function(a,b,c){var d=a.parents("thead:first").next("tbody").find("input[name=\""+b+"[]\"]:visible");jQuery.each(d,function(){var a=jQuery(this).prop("checked","add"===c).parents("tr:first");a.toggleClass(cssClassName,"add"===c)})},toggleMassActionsBar=function(){var a=jQuery(".datagrid-mass-actions");if(0!==a.find(".container").children().length){var b=jQuery(".datagrid-column__mass-action:not(th) :checkbox:checked");a.toggleClass("d-none",0===b.length)}},setMassActionCheckboxState=function(a,b,c){var d=b.find("input[name=\""+c+"[]\"]:visible").length,e=b.find("input[name=\""+c+"[]\"]:checked").length;0===d||0===e?(a.prop("checked",!1),a.prop("indeterminate",!1)):e<d?(a.prop("checked",!1),a.prop("indeterminate",!0)):(a.prop("checked",!0),a.prop("indeterminate",!1))};/**
 * Marks all visible results
 *
 * @param $massActionCheckbox
 * @param name
 * @param action
 */ /**
 *
 * @param checkboxName
 * @returns {*|jQuery|HTMLElement}
 */ /**
 *
 * @param options
 * @returns {*|jQuery|HTMLElement}
 */jQuery.fn.highlightTableRow=function(a){var b=$(this);return b.closest("table").on("click","tr:has(td :checkbox)",function(c){var d=$(this),e=d.closest("tbody");if("checkbox"!==c.target.type){if("A"===c.target.nodeName)return;var f=$("input[name=\""+a+"[]\"]",this);f.prop("checked",!f.is(":checked"))}d.toggleClass(cssClassName),toggleMassActionsBar(),setMassActionCheckboxState(b,e,a)}),b},jQuery.fn.deleteMarkedResults=function(a){var b=$(this),c=$.extend({checkBoxName:"",language:{confirmationTextSingle:"",confirmationTextMultiple:"",noEntriesSelectedText:""},bootboxLocale:"en"},a);return b.on("click",function(a){a.preventDefault();var d=$("form .table input[name=\""+c.checkBoxName+"[]\"]:checked");if(0<d.length){var e=1===d.length?c.language.confirmationTextSingle:c.language.confirmationTextMultiple.replace("{items}",d.length);bootbox.confirm({message:e,locale:c.bootboxLocale,callback:function callback(a){if(a){var c=b.closest("form");c.formSubmit({customFormData:{action:"confirmed"}}),c.triggerHandler("submit")}}})}else bootbox.alert({message:c.language.noEntriesSelectedText,locale:c.bootboxLocale})}),b},jQuery(document).ready(function(a){var b=a("[data-mark-all-id]");b.each(function(b,c){var d=a(c);d.click(function(){markEntries(d,d.data("checkbox-name"),d.is(":checked")?"add":"remove"),toggleMassActionsBar()}).highlightTableRow(d.data("checkbox-name"))}),a(".datagrid-mass-actions .fa-trash").closest(".btn").deleteMarkedResults(b.data("delete-options"))});
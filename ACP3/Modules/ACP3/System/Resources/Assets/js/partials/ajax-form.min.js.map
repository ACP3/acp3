{"version":3,"sources":["ACP3/Modules/ACP3/System/Resources/Assets/js/partials/node_modules/browser-pack-flat/_prelude","ACP3/Modules/ACP3/System/Resources/Assets/js/partials/ACP3/Modules/ACP3/System/Resources/Assets/js/lib/utils.js","ACP3/Modules/ACP3/System/Resources/Assets/js/partials/ACP3/Modules/ACP3/System/Resources/Assets/js/lib/event-handler.js","ACP3/Modules/ACP3/System/Resources/Assets/js/partials/ACP3/Modules/ACP3/System/Resources/Assets/js/lib/ajax-form.js","ACP3/Modules/ACP3/System/Resources/Assets/js/partials/ACP3/Modules/ACP3/System/Resources/Assets/js/lib/loading-indicator.js","ACP3/Modules/ACP3/System/Resources/Assets/js/partials/ACP3/Modules/ACP3/System/Resources/Assets/js/lib/form-validator.js","ACP3/Modules/ACP3/System/Resources/Assets/js/partials/ACP3/Modules/ACP3/System/Resources/Assets/js/partials/ajax-form.js"],"names":["_$utils_5","defaultSettings","constructorOptions","dataAttributeOptions","mergedSettings","key","value","Object","entries","keyStripped","string","replace","charAt","toLowerCase","slice","length","JSON","parse","_unused","addScriptsToHead","elementContainingScriptTags","ajaxScriptElement","getElementsByTagName","scriptElement","document","createElement","src","innerHTML","head","appendChild","element","eventName","selectorOrTargetElement","handler","addEventListener","event","elems","querySelectorAll","forEach","elem","contains","target","_classPrivateFieldLooseBase","receiver","privateKey","prototype","hasOwnProperty","call","TypeError","id","_classPrivateFieldLooseKey","name","_loadingIndicator","_formValidator","_defaults","_init","_registerClickedSubmitButton","_prepareFormData","_handleResponseError","_handleSuccessfulResponse","_disableSubmitButton","_enableSubmitButton","_decodeResponse","_redirectToNewPage","_scrollIntoView","_replaceContent","_init2","this","_$eventHandler_2","delegateEvent","async","preventDefault","performAjaxRequest","setFormAsValid","dispatchEvent","CustomEvent","detail","isValid","preValidateForm","checkFormElementsForErrors","_registerClickedSubmitButton2","submitElem","closest","dataset","clicked","_prepareFormData2","formElement","submitButton","initialData","customFormData","data","getAttribute","FormData","append","_handleResponseError2","response","targetElement","responseData","clone","text","status","handleFormErrorMessages","open","write","close","_handleSuccessfulResponse2","hash","window","completeCallback","redirect_url","location","_disableSubmitButton2","disabled","_enableSubmitButton2","_decodeResponse2","json","error","_redirectToNewPage2","href","reload","_scrollIntoView2","setTimeout","querySelector","concat","scrollTo","top","getBoundingClientRect","y","behavior","offsetTop","scrollTop","_replaceContent2","updatedContentData","doc","DOMParser","parseFromString","_$ajaxForm_1","AjaxForm","[object Object]","loadingIndicator","formValidator","defineProperty","writable","loadingOverlay","method","mergeSettings","_submitButton","HTMLFormElement","hashChange","addLoadingIndicator","showLoadingIndicator","_ref","_targetElement$getAtt","_targetElement$getAtt2","_mergedSettings$metho","toUpperCase","fetch","body","headers","X-Requested-With","ok","console","hideLoadingIndicator","show","_targetElement$queryS","classList","toggle","_$loadingIndicator_4","LoadingIndicator","_toggleLoadingIndicator","_toggleLoadingIndicator2","loadingIndicatorHtml","svgIcons","loadingIndicatorIcon","insertAdjacentHTML","___classPrivateFieldLooseBase_4","___classPrivateFieldLooseBase_3","__id_3","___classPrivateFieldLooseKey_3","___defaults_3","_settings","_removeAllPreviousErrors","_removeErrorMessageFromFormField","_addErrorMessageToFormField","_focusTabWithFirstErrorMessage","_prettyPrintResponseErrorMessages","_scrollToFirstFormError","_isElementInViewport","_removeAllPreviousErrors2","invalidFormField","remove","_removeErrorMessageFromFormField2","formField","_formField$closest","_formField$closest$qu","_addErrorMessageToFormField2","errorMessage","add","_focusTabWithFirstErrorMessage2","firstElemWithError","tabId","click","focus","_prettyPrintResponseErrorMessages2","errorBox","errorMessageLine","errorClass","getElementById","_scrollToFirstFormError2","_formElement$closest","formErrors","item","scrollOffsetElement","clientHeight","_isElementInViewport2","rect","left","bottom","innerHeight","documentElement","right","innerWidth","clientWidth","_$formValidator_3","FormValidator","options","field","elements","nodeName","checkValidity","validationMessage","_formElement$formVali","errorMessagesHtml","_document$getElementB","modalBody"],"mappings":"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","sourcesContent":["(function(){\n","/*\n * Copyright (c) by the ACP3 Developers.\n * See the LICENSE file at the top-level module directory for licensing details.\n */\n\nexport function mergeSettings(defaultSettings, constructorOptions, dataAttributeOptions) {\n  const mergedSettings = { ...defaultSettings, ...constructorOptions };\n\n  if (!dataAttributeOptions) {\n    return mergedSettings;\n  }\n\n  for (let [key, value] of Object.entries(dataAttributeOptions)) {\n    const keyStripped = lowerCaseFirstLetter(key.replace(\"ajaxForm\", \"\"));\n\n    if (keyStripped.length > 0 && typeof mergedSettings[keyStripped] !== \"undefined\") {\n      try {\n        mergedSettings[keyStripped] = JSON.parse(value);\n      } catch {\n        mergedSettings[keyStripped] = value;\n      }\n    }\n  }\n\n  return mergedSettings;\n}\n\nfunction lowerCaseFirstLetter(string) {\n  return string.charAt(0).toLowerCase() + string.slice(1);\n}\n\n/**\n * This function add downloads javascript code (e.g. after XHR requests) to the HTML documents <head>, so that the\n * javascript code can actually get executed.\n *\n * @param {HTMLElement} elementContainingScriptTags\n */\nexport function addScriptsToHead(elementContainingScriptTags) {\n  for (const ajaxScriptElement of elementContainingScriptTags.getElementsByTagName(\"script\")) {\n    const scriptElement = document.createElement(\"script\");\n    if (!ajaxScriptElement.src) {\n      scriptElement.innerHTML = ajaxScriptElement.innerHTML;\n    } else {\n      scriptElement.src = ajaxScriptElement.src;\n    }\n    document.head.appendChild(scriptElement);\n  }\n}\n","/*\n * Copyright (c) by the ACP3 Developers.\n * See the LICENCE file at the top-level module directory for licencing details.\n */\n\n/**\n *\n * @param {HTMLElement|Document} element\n * @param {string} eventName\n * @param {string|HTMLElement} selectorOrTargetElement\n * @param {function} handler\n */\nexport function delegateEvent(element, eventName, selectorOrTargetElement, handler) {\n  element.addEventListener(eventName, (event) => {\n    if (typeof selectorOrTargetElement === \"string\") {\n      const elems = document.querySelectorAll(selectorOrTargetElement);\n\n      if (!elems) {\n        return;\n      }\n\n      elems.forEach((elem) => {\n        if (elem && elem.contains(event.target)) {\n          handler(event, elem);\n        }\n      });\n    } else if (selectorOrTargetElement && selectorOrTargetElement.contains(event.target)) {\n      handler(event, selectorOrTargetElement);\n    }\n  });\n}\n","/*\n * Copyright (c) by the ACP3 Developers.\n * See the LICENSE file at the top-level module directory for licensing details.\n */\n\nimport { addScriptsToHead, mergeSettings } from \"./utils\";\nimport { delegateEvent } from \"./event-handler\";\n\nexport class AjaxForm {\n  #loadingIndicator;\n  #formValidator;\n  #defaults = {\n    completeCallback: null,\n    targetElement: \"#content\",\n    loadingOverlay: true,\n    customFormData: null,\n    method: null,\n  };\n\n  /**\n   *\n   * @param {LoadingIndicator} loadingIndicator\n   * @param {FormValidator} formValidator\n   */\n  constructor(loadingIndicator, formValidator) {\n    this.#loadingIndicator = loadingIndicator;\n    this.#formValidator = formValidator;\n\n    this.#init();\n  }\n\n  #init() {\n    this.#registerClickedSubmitButton();\n\n    delegateEvent(document, \"click\", 'a[data-ajax-form=\"true\"]', async (event, elem) => {\n      event.preventDefault();\n\n      await this.performAjaxRequest(elem);\n    });\n\n    delegateEvent(document, \"submit\", 'form[data-ajax-form=\"true\"]', async (event, elem) => {\n      event.preventDefault();\n\n      this.#formValidator.setFormAsValid(elem);\n\n      document.dispatchEvent(new CustomEvent(\"acp3.ajaxFrom.submit.before\", { detail: this }));\n\n      if (this.#formValidator.isValid(elem) && this.#formValidator.preValidateForm(elem)) {\n        await this.performAjaxRequest(elem);\n      }\n    });\n\n    delegateEvent(document, \"change\", 'form[data-ajax-form=\"true\"]', async (event, elem) => {\n      if (this.#formValidator.isValid(elem) === false) {\n        this.#formValidator.checkFormElementsForErrors(elem);\n      }\n    });\n  }\n\n  #registerClickedSubmitButton() {\n    delegateEvent(document, \"click\", 'form[data-ajax-form=\"true\"] [type=\"submit\"]', (event, submitElem) => {\n      submitElem\n        .closest(\"form\")\n        .querySelectorAll(\"[type=submit]\")\n        .forEach((elem) => {\n          delete elem.dataset[\"clicked\"];\n        });\n      submitElem.dataset.clicked = \"true\";\n    });\n  }\n\n  /**\n   *\n   * @param {HTMLElement} targetElement\n   * @returns {Promise<void>}\n   */\n  async performAjaxRequest(targetElement) {\n    const mergedSettings = mergeSettings(this.#defaults, {}, targetElement.dataset);\n    let hash, submitButton;\n\n    if (targetElement instanceof HTMLFormElement) {\n      submitButton = targetElement.querySelector('[type=\"submit\"][data-clicked=\"true\"]');\n\n      hash = submitButton?.dataset.hashChange;\n    } else {\n      hash = targetElement.dataset.hashChange;\n    }\n\n    if (mergedSettings.loadingOverlay) {\n      this.#loadingIndicator.addLoadingIndicator(submitButton || targetElement);\n      this.#loadingIndicator.showLoadingIndicator(submitButton || targetElement);\n    }\n\n    this.#disableSubmitButton(submitButton);\n\n    try {\n      const method =\n        targetElement.getAttribute(\"method\")?.toUpperCase() ?? mergedSettings.method?.toUpperCase() ?? \"GET\";\n\n      const response = await fetch(targetElement.getAttribute(\"action\") || targetElement.getAttribute(\"href\"), {\n        method: method,\n        body: method !== \"GET\" ? this.#prepareFormData(targetElement, submitButton, mergedSettings) : null,\n        headers: {\n          \"X-Requested-With\": \"XMLHttpRequest\",\n        },\n      });\n\n      if (!response.ok) {\n        await this.#handleResponseError(response, targetElement);\n      } else {\n        await this.#handleSuccessfulResponse(response, hash, mergedSettings);\n      }\n    } catch (error) {\n      console.error(error);\n    } finally {\n      this.#loadingIndicator.hideLoadingIndicator(submitButton || targetElement);\n      this.#enableSubmitButton(submitButton);\n    }\n  }\n\n  /**\n   *\n   * @param {HTMLFormElement} formElement\n   * @param {HTMLElement} submitButton\n   * @param {Record<string, any>} mergedSettings\n   * @returns {FormData}\n   */\n  #prepareFormData(formElement, submitButton, mergedSettings) {\n    const initialData = mergedSettings.customFormData || {};\n    let data;\n\n    if (formElement.getAttribute(\"method\")) {\n      data = new FormData(formElement);\n\n      if (submitButton) {\n        data.append(submitButton.getAttribute(\"name\"), \"1\");\n      }\n    } else {\n      data = new FormData();\n    }\n\n    for (let [key, value] of Object.entries(initialData)) {\n      data.append(key, value);\n    }\n\n    return data;\n  }\n\n  /**\n   *\n   * @param {Response} response\n   * @param {HTMLElement} targetElement\n   * @returns {Promise<void>}\n   */\n  async #handleResponseError(response, targetElement) {\n    const responseData = await response.clone().text();\n\n    if (response.status === 400) {\n      this.#formValidator.handleFormErrorMessages(targetElement, responseData);\n\n      document.dispatchEvent(new CustomEvent(\"acp3.ajaxFrom.submit.fail\", { detail: this }));\n    } else if (responseData.length > 0) {\n      document.open();\n      document.write(responseData);\n      document.close();\n    }\n  }\n\n  /**\n   *\n   * @param {Response} response\n   * @param {string} hash\n   * @param {Record<string, any>} mergedSettings\n   * @returns {Promise<void>}\n   */\n  async #handleSuccessfulResponse(response, hash, mergedSettings) {\n    const responseData = await this.#decodeResponse(response);\n\n    if (typeof window[mergedSettings.completeCallback] === \"function\") {\n      window[mergedSettings.completeCallback](responseData);\n    } else if (responseData.redirect_url) {\n      this.#redirectToNewPage(hash, responseData);\n    } else {\n      this.#replaceContent(hash, responseData, mergedSettings);\n      this.#scrollIntoView(hash, mergedSettings);\n\n      if (hash !== undefined) {\n        window.location.hash = hash;\n      }\n\n      document.dispatchEvent(new CustomEvent(\"acp3.ajaxFrom.complete\"));\n    }\n  }\n\n  /**\n   *\n   * @param {Element} submitButton\n   */\n  #disableSubmitButton(submitButton) {\n    if (submitButton) {\n      submitButton.disabled = true;\n    }\n  }\n\n  /**\n   *\n   * @param {Element} submitButton\n   */\n  #enableSubmitButton(submitButton) {\n    if (submitButton) {\n      submitButton.disabled = false;\n    }\n  }\n\n  /**\n   *\n   * @param {Response} response\n   * @returns {Promise<*>}\n   */\n  async #decodeResponse(response) {\n    try {\n      return await response.clone().json();\n    } catch (error) {\n      return await response.clone().text();\n    }\n  }\n\n  #redirectToNewPage(hash, responseData) {\n    if (hash !== undefined) {\n      window.location.href = responseData.redirect_url + hash;\n      window.location.reload();\n    } else {\n      window.location.href = responseData.redirect_url;\n    }\n  }\n\n  #scrollIntoView(hash, mergedSettings) {\n    setTimeout(() => {\n      if (hash) {\n        const targetElement = document.querySelector(`[data-hash-change=\"${hash}\"]`);\n\n        window.scrollTo({ top: targetElement.getBoundingClientRect().y, behavior: \"smooth\" });\n      } else {\n        const targetElement = document.querySelector(mergedSettings.targetElement);\n        const offsetTop = targetElement.getBoundingClientRect().y;\n\n        if (document.scrollTop > offsetTop) {\n          window.scrollTo({ top: offsetTop, behavior: \"smooth\" });\n        }\n      }\n    });\n  }\n\n  #replaceContent(hash, responseData, mergedSettings) {\n    let targetElement;\n    let updatedContentData;\n\n    if (hash && document.querySelector(hash)) {\n      const parser = new DOMParser();\n      const doc = parser.parseFromString(responseData, \"text/html\");\n\n      targetElement = document.querySelector(hash);\n      updatedContentData = doc.querySelector(hash).innerHTML;\n    } else {\n      targetElement = document.querySelector(mergedSettings.targetElement);\n      updatedContentData = responseData;\n    }\n\n    targetElement.innerHTML = updatedContentData;\n    addScriptsToHead(targetElement);\n  }\n}\n","/*\n * Copyright (c) by the ACP3 Developers.\n * See the LICENSE file at the top-level module directory for licensing details.\n */\n\nexport class LoadingIndicator {\n  /**\n   *\n   * @param {HTMLElement} targetElement\n   */\n  addLoadingIndicator(targetElement) {\n    if (!targetElement.querySelector(\".loading-indicator\")) {\n      const body = document.querySelector(\"body\");\n      const jsSvgIcons = JSON.parse(body.dataset.svgIcons);\n      const loadingIndicatorHtml =\n        '<svg class=\"svg-icon svg-icon__spinner svg-icon--spin loading-indicator me-1\" fill=\"currentColor\"><use xlink:href=\"' +\n        jsSvgIcons[\"loadingIndicatorIcon\"] +\n        '\"></use></svg>';\n\n      targetElement.insertAdjacentHTML(\"afterbegin\", loadingIndicatorHtml);\n    }\n  }\n\n  /**\n   *\n   * @param {HTMLElement} targetElement\n   */\n  showLoadingIndicator(targetElement) {\n    this.#toggleLoadingIndicator(targetElement, true);\n  }\n\n  /**\n   *\n   * @param {HTMLElement} targetElement\n   */\n  hideLoadingIndicator(targetElement) {\n    this.#toggleLoadingIndicator(targetElement, false);\n  }\n\n  /**\n   *\n   * @param {HTMLElement} targetElement\n   * @param {Boolean} show\n   */\n  #toggleLoadingIndicator(targetElement, show) {\n    targetElement.querySelector(\".loading-indicator\")?.classList.toggle(\"loading-indicator__active\", show);\n  }\n}\n","/*\n * Copyright (c) by the ACP3 Developers.\n * See the LICENSE file at the top-level module directory for licensing details.\n */\n\nimport { mergeSettings } from \"./utils\";\n\nexport class FormValidator {\n  #defaults = {\n    scrollOffsetElement: null,\n  };\n  #settings;\n\n  constructor(options = {}) {\n    this.#settings = mergeSettings(this.#defaults, options, {});\n  }\n\n  /**\n   *\n   * @param {HTMLFormElement} formElement\n   * @returns {boolean}\n   */\n  preValidateForm(formElement) {\n    this.checkFormElementsForErrors(formElement);\n    this.#focusTabWithFirstErrorMessage(formElement);\n    this.#scrollToFirstFormError(formElement);\n\n    return this.isValid(formElement);\n  }\n\n  /**\n   *\n   * @param {HTMLFormElement} formElement\n   */\n  checkFormElementsForErrors(formElement) {\n    this.#removeAllPreviousErrors(formElement);\n\n    for (const field of formElement.elements) {\n      if (field.nodeName !== \"INPUT\" && field.nodeName !== \"TEXTAREA\" && field.nodeName !== \"SELECT\") {\n        continue;\n      }\n\n      if (!field.checkValidity()) {\n        this.#addErrorMessageToFormField(field, field.validationMessage);\n\n        if (!formElement.formValidator) {\n          formElement.formValidator = {};\n        }\n\n        formElement.formValidator.isValid = false;\n      }\n    }\n  }\n\n  /**\n   * @param {HTMLFormElement} formElement\n   */\n  #removeAllPreviousErrors(formElement) {\n    formElement.querySelectorAll(\".is-invalid\").forEach((invalidFormField) => {\n      invalidFormField.classList.remove(\"is-invalid\");\n    });\n  }\n\n  /**\n   *\n   * @param {HTMLElement} formField\n   */\n  #removeErrorMessageFromFormField(formField) {\n    formField.closest(\"div\")?.querySelector(\".invalid-feedback\")?.remove();\n  }\n\n  /**\n   *\n   * @param {HTMLElement} formField\n   * @param {string} errorMessage\n   */\n  #addErrorMessageToFormField(formField, errorMessage) {\n    this.#removeErrorMessageFromFormField(formField);\n\n    formField.classList.add(\"is-invalid\");\n\n    formField\n      .closest(\"div:not(.input-group):not(.btn-group)\")\n      .insertAdjacentHTML(\"beforeend\", `<div class=\"invalid-feedback\">${errorMessage}</div>`);\n  }\n\n  /**\n   *\n   * @param {HTMLFormElement} formElement\n   */\n  #focusTabWithFirstErrorMessage(formElement) {\n    if (!formElement.querySelector(\".nav-tabs\")) {\n      return;\n    }\n\n    const firstElemWithError = formElement.querySelector(\".is-invalid\");\n\n    if (!firstElemWithError) {\n      return;\n    }\n\n    const tabId = firstElemWithError.closest(\".tab-pane\").getAttribute(\"id\");\n\n    formElement.querySelector('.nav-tabs a[href=\"#' + tabId + '\"]').click();\n\n    firstElemWithError.focus();\n  }\n\n  /**\n   *\n   * @param {HTMLFormElement} formElement\n   * @returns {boolean}\n   */\n  isValid(formElement) {\n    return !!formElement.formValidator?.isValid;\n  }\n\n  /**\n   *\n   * @param {HTMLFormElement} formElement\n   */\n  setFormAsValid(formElement) {\n    formElement.formValidator = {\n      isValid: true,\n    };\n  }\n\n  /**\n   *\n   * @param {HTMLElement} targetElement\n   * @param {string} errorMessagesHtml\n   */\n  handleFormErrorMessages(targetElement, errorMessagesHtml) {\n    if (!(targetElement instanceof HTMLFormElement)) {\n      return;\n    }\n\n    const modalBody = targetElement.querySelector(\".modal-body\");\n\n    // Remove the old - possible existing - error-box\n    document.getElementById(\"error-box\")?.remove();\n\n    // Place the error messages inside the modal body for a better styling\n    if (modalBody) {\n      modalBody.insertAdjacentHTML(\"afterbegin\", errorMessagesHtml);\n    } else {\n      targetElement.insertAdjacentHTML(\"afterbegin\", errorMessagesHtml);\n    }\n\n    this.#prettyPrintResponseErrorMessages(targetElement, document.getElementById(\"error-box\"));\n  }\n\n  /**\n   *\n   * @param {HTMLFormElement} formElement\n   * @param {HTMLElement} errorBox\n   */\n  #prettyPrintResponseErrorMessages(formElement, errorBox) {\n    this.#removeAllPreviousErrors(formElement);\n\n    // highlight all input fields where the validation has failed\n    errorBox.querySelectorAll(\"li\").forEach((errorMessageLine) => {\n      let errorClass = errorMessageLine.dataset.element;\n\n      if (errorClass.length > 0) {\n        let elem = document.getElementById(errorClass) || formElement.querySelector('[id|=\"' + errorClass + '\"]');\n\n        if (elem) {\n          // Move the error message to the responsible input field(s)\n          // and remove the list item from the error box container\n          this.#addErrorMessageToFormField(elem[0], errorMessageLine.innerHTML);\n          errorMessageLine.remove();\n        }\n      }\n    });\n\n    // if all list items have been removed, remove the error box container too\n    if (errorBox.querySelectorAll(\"li\").length === 0) {\n      errorBox.remove();\n    }\n\n    this.#focusTabWithFirstErrorMessage(formElement);\n    this.#scrollToFirstFormError(formElement);\n  }\n\n  /**\n   * @param {HTMLFormElement} formElement\n   */\n  #scrollToFirstFormError(formElement) {\n    if (formElement.closest(\".modal\")?.length > 0) {\n      return;\n    }\n\n    const formErrors = formElement.querySelectorAll(\".is-invalid\");\n\n    if (!formErrors || formErrors.length === 0) {\n      return;\n    }\n\n    if (this.#isElementInViewport(formElement.querySelector(\".invalid-feedback\"))) {\n      return;\n    }\n\n    let offsetTop = formErrors.item(0).getBoundingClientRect().top;\n\n    if (this.#settings.scrollOffsetElement) {\n      const scrollOffsetElement = document.querySelector(this.#settings.scrollOffsetElement);\n\n      if (scrollOffsetElement) {\n        offsetTop -= scrollOffsetElement.clientHeight;\n      }\n    }\n\n    window.scrollTo({ top: offsetTop, behavior: \"smooth\" });\n  }\n\n  #isElementInViewport(element) {\n    const scrollOffsetElement = document.querySelector(this.#settings.scrollOffsetElement);\n    let offsetTop = 0;\n\n    if (scrollOffsetElement) {\n      offsetTop = scrollOffsetElement.clientHeight;\n    }\n\n    const rect = element.getBoundingClientRect();\n\n    return (\n      rect.top >= offsetTop &&\n      rect.left >= 0 &&\n      rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n      rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n    );\n  }\n}\n","/*\n * Copyright (c) by the ACP3 Developers.\n * See the LICENSE file at the top-level module directory for licencing details.\n */\n\nimport { AjaxForm } from \"../lib/ajax-form\";\nimport { LoadingIndicator } from \"../lib/loading-indicator\";\nimport { FormValidator } from \"../lib/form-validator\";\n\n(() => {\n  new AjaxForm(new LoadingIndicator(), new FormValidator());\n})();\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2stZmxhdC9fcHJlbHVkZSIsIkFDUDMvTW9kdWxlcy9BQ1AzL1N5c3RlbS9SZXNvdXJjZXMvQXNzZXRzL2pzL2xpYi91dGlscy5qcyIsIkFDUDMvTW9kdWxlcy9BQ1AzL1N5c3RlbS9SZXNvdXJjZXMvQXNzZXRzL2pzL2xpYi9ldmVudC1oYW5kbGVyLmpzIiwiQUNQMy9Nb2R1bGVzL0FDUDMvU3lzdGVtL1Jlc291cmNlcy9Bc3NldHMvanMvbGliL2FqYXgtZm9ybS5qcyIsIkFDUDMvTW9kdWxlcy9BQ1AzL1N5c3RlbS9SZXNvdXJjZXMvQXNzZXRzL2pzL2xpYi9sb2FkaW5nLWluZGljYXRvci5qcyIsIkFDUDMvTW9kdWxlcy9BQ1AzL1N5c3RlbS9SZXNvdXJjZXMvQXNzZXRzL2pzL2xpYi9mb3JtLXZhbGlkYXRvci5qcyIsIkFDUDMvTW9kdWxlcy9BQ1AzL1N5c3RlbS9SZXNvdXJjZXMvQXNzZXRzL2pzL3BhcnRpYWxzL2FqYXgtZm9ybS5qcyJdLCJuYW1lcyI6WyJfJHV0aWxzXzUiLCJkZWZhdWx0U2V0dGluZ3MiLCJjb25zdHJ1Y3Rvck9wdGlvbnMiLCJkYXRhQXR0cmlidXRlT3B0aW9ucyIsIm1lcmdlZFNldHRpbmdzIiwia2V5IiwidmFsdWUiLCJPYmplY3QiLCJlbnRyaWVzIiwia2V5U3RyaXBwZWQiLCJzdHJpbmciLCJyZXBsYWNlIiwiY2hhckF0IiwidG9Mb3dlckNhc2UiLCJzbGljZSIsImxlbmd0aCIsIkpTT04iLCJwYXJzZSIsIl91bnVzZWQiLCJhZGRTY3JpcHRzVG9IZWFkIiwiZWxlbWVudENvbnRhaW5pbmdTY3JpcHRUYWdzIiwiYWpheFNjcmlwdEVsZW1lbnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInNjcmlwdEVsZW1lbnQiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzcmMiLCJpbm5lckhUTUwiLCJoZWFkIiwiYXBwZW5kQ2hpbGQiLCJlbGVtZW50IiwiZXZlbnROYW1lIiwic2VsZWN0b3JPclRhcmdldEVsZW1lbnQiLCJoYW5kbGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiZWxlbXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImVsZW0iLCJjb250YWlucyIsInRhcmdldCIsIl9jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZSIsInJlY2VpdmVyIiwicHJpdmF0ZUtleSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlR5cGVFcnJvciIsImlkIiwiX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VLZXkiLCJuYW1lIiwiX2xvYWRpbmdJbmRpY2F0b3IiLCJfZm9ybVZhbGlkYXRvciIsIl9kZWZhdWx0cyIsIl9pbml0IiwiX3JlZ2lzdGVyQ2xpY2tlZFN1Ym1pdEJ1dHRvbiIsIl9wcmVwYXJlRm9ybURhdGEiLCJfaGFuZGxlUmVzcG9uc2VFcnJvciIsIl9oYW5kbGVTdWNjZXNzZnVsUmVzcG9uc2UiLCJfZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsIl9lbmFibGVTdWJtaXRCdXR0b24iLCJfZGVjb2RlUmVzcG9uc2UiLCJfcmVkaXJlY3RUb05ld1BhZ2UiLCJfc2Nyb2xsSW50b1ZpZXciLCJfcmVwbGFjZUNvbnRlbnQiLCJfaW5pdDIiLCJ0aGlzIiwiXyRldmVudEhhbmRsZXJfMiIsImRlbGVnYXRlRXZlbnQiLCJhc3luYyIsInByZXZlbnREZWZhdWx0IiwicGVyZm9ybUFqYXhSZXF1ZXN0Iiwic2V0Rm9ybUFzVmFsaWQiLCJkaXNwYXRjaEV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJkZXRhaWwiLCJpc1ZhbGlkIiwicHJlVmFsaWRhdGVGb3JtIiwiY2hlY2tGb3JtRWxlbWVudHNGb3JFcnJvcnMiLCJfcmVnaXN0ZXJDbGlja2VkU3VibWl0QnV0dG9uMiIsInN1Ym1pdEVsZW0iLCJjbG9zZXN0IiwiZGF0YXNldCIsImNsaWNrZWQiLCJfcHJlcGFyZUZvcm1EYXRhMiIsImZvcm1FbGVtZW50Iiwic3VibWl0QnV0dG9uIiwiaW5pdGlhbERhdGEiLCJjdXN0b21Gb3JtRGF0YSIsImRhdGEiLCJnZXRBdHRyaWJ1dGUiLCJGb3JtRGF0YSIsImFwcGVuZCIsIl9oYW5kbGVSZXNwb25zZUVycm9yMiIsInJlc3BvbnNlIiwidGFyZ2V0RWxlbWVudCIsInJlc3BvbnNlRGF0YSIsImNsb25lIiwidGV4dCIsInN0YXR1cyIsImhhbmRsZUZvcm1FcnJvck1lc3NhZ2VzIiwib3BlbiIsIndyaXRlIiwiY2xvc2UiLCJfaGFuZGxlU3VjY2Vzc2Z1bFJlc3BvbnNlMiIsImhhc2giLCJ3aW5kb3ciLCJjb21wbGV0ZUNhbGxiYWNrIiwicmVkaXJlY3RfdXJsIiwibG9jYXRpb24iLCJfZGlzYWJsZVN1Ym1pdEJ1dHRvbjIiLCJkaXNhYmxlZCIsIl9lbmFibGVTdWJtaXRCdXR0b24yIiwiX2RlY29kZVJlc3BvbnNlMiIsImpzb24iLCJlcnJvciIsIl9yZWRpcmVjdFRvTmV3UGFnZTIiLCJocmVmIiwicmVsb2FkIiwiX3Njcm9sbEludG9WaWV3MiIsInNldFRpbWVvdXQiLCJxdWVyeVNlbGVjdG9yIiwiY29uY2F0Iiwic2Nyb2xsVG8iLCJ0b3AiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ5IiwiYmVoYXZpb3IiLCJvZmZzZXRUb3AiLCJzY3JvbGxUb3AiLCJfcmVwbGFjZUNvbnRlbnQyIiwidXBkYXRlZENvbnRlbnREYXRhIiwiZG9jIiwiRE9NUGFyc2VyIiwicGFyc2VGcm9tU3RyaW5nIiwiXyRhamF4Rm9ybV8xIiwiQWpheEZvcm0iLCJbb2JqZWN0IE9iamVjdF0iLCJsb2FkaW5nSW5kaWNhdG9yIiwiZm9ybVZhbGlkYXRvciIsImRlZmluZVByb3BlcnR5Iiwid3JpdGFibGUiLCJsb2FkaW5nT3ZlcmxheSIsIm1ldGhvZCIsIm1lcmdlU2V0dGluZ3MiLCJfc3VibWl0QnV0dG9uIiwiSFRNTEZvcm1FbGVtZW50IiwiaGFzaENoYW5nZSIsImFkZExvYWRpbmdJbmRpY2F0b3IiLCJzaG93TG9hZGluZ0luZGljYXRvciIsIl9yZWYiLCJfdGFyZ2V0RWxlbWVudCRnZXRBdHQiLCJfdGFyZ2V0RWxlbWVudCRnZXRBdHQyIiwiX21lcmdlZFNldHRpbmdzJG1ldGhvIiwidG9VcHBlckNhc2UiLCJmZXRjaCIsImJvZHkiLCJoZWFkZXJzIiwiWC1SZXF1ZXN0ZWQtV2l0aCIsIm9rIiwiY29uc29sZSIsImhpZGVMb2FkaW5nSW5kaWNhdG9yIiwic2hvdyIsIl90YXJnZXRFbGVtZW50JHF1ZXJ5UyIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIl8kbG9hZGluZ0luZGljYXRvcl80IiwiTG9hZGluZ0luZGljYXRvciIsIl90b2dnbGVMb2FkaW5nSW5kaWNhdG9yIiwiX3RvZ2dsZUxvYWRpbmdJbmRpY2F0b3IyIiwibG9hZGluZ0luZGljYXRvckh0bWwiLCJzdmdJY29ucyIsImxvYWRpbmdJbmRpY2F0b3JJY29uIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwiX19fY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2VfNCIsIl9fX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlXzMiLCJfX2lkXzMiLCJfX19jbGFzc1ByaXZhdGVGaWVsZExvb3NlS2V5XzMiLCJfX19kZWZhdWx0c18zIiwiX3NldHRpbmdzIiwiX3JlbW92ZUFsbFByZXZpb3VzRXJyb3JzIiwiX3JlbW92ZUVycm9yTWVzc2FnZUZyb21Gb3JtRmllbGQiLCJfYWRkRXJyb3JNZXNzYWdlVG9Gb3JtRmllbGQiLCJfZm9jdXNUYWJXaXRoRmlyc3RFcnJvck1lc3NhZ2UiLCJfcHJldHR5UHJpbnRSZXNwb25zZUVycm9yTWVzc2FnZXMiLCJfc2Nyb2xsVG9GaXJzdEZvcm1FcnJvciIsIl9pc0VsZW1lbnRJblZpZXdwb3J0IiwiX3JlbW92ZUFsbFByZXZpb3VzRXJyb3JzMiIsImludmFsaWRGb3JtRmllbGQiLCJyZW1vdmUiLCJfcmVtb3ZlRXJyb3JNZXNzYWdlRnJvbUZvcm1GaWVsZDIiLCJmb3JtRmllbGQiLCJfZm9ybUZpZWxkJGNsb3Nlc3QiLCJfZm9ybUZpZWxkJGNsb3Nlc3QkcXUiLCJfYWRkRXJyb3JNZXNzYWdlVG9Gb3JtRmllbGQyIiwiZXJyb3JNZXNzYWdlIiwiYWRkIiwiX2ZvY3VzVGFiV2l0aEZpcnN0RXJyb3JNZXNzYWdlMiIsImZpcnN0RWxlbVdpdGhFcnJvciIsInRhYklkIiwiY2xpY2siLCJmb2N1cyIsIl9wcmV0dHlQcmludFJlc3BvbnNlRXJyb3JNZXNzYWdlczIiLCJlcnJvckJveCIsImVycm9yTWVzc2FnZUxpbmUiLCJlcnJvckNsYXNzIiwiZ2V0RWxlbWVudEJ5SWQiLCJfc2Nyb2xsVG9GaXJzdEZvcm1FcnJvcjIiLCJfZm9ybUVsZW1lbnQkY2xvc2VzdCIsImZvcm1FcnJvcnMiLCJpdGVtIiwic2Nyb2xsT2Zmc2V0RWxlbWVudCIsImNsaWVudEhlaWdodCIsIl9pc0VsZW1lbnRJblZpZXdwb3J0MiIsInJlY3QiLCJsZWZ0IiwiYm90dG9tIiwiaW5uZXJIZWlnaHQiLCJkb2N1bWVudEVsZW1lbnQiLCJyaWdodCIsImlubmVyV2lkdGgiLCJjbGllbnRXaWR0aCIsIl8kZm9ybVZhbGlkYXRvcl8zIiwiRm9ybVZhbGlkYXRvciIsIm9wdGlvbnMiLCJmaWVsZCIsImVsZW1lbnRzIiwibm9kZU5hbWUiLCJjaGVja1ZhbGlkaXR5IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfZm9ybUVsZW1lbnQkZm9ybVZhbGkiLCJlcnJvck1lc3NhZ2VzSHRtbCIsIl9kb2N1bWVudCRnZXRFbGVtZW50QiIsIm1vZGFsQm9keSJdLCJtYXBwaW5ncyI6IkNBQUEsV0FDQSxJQUFBQSxFQUFBLG9FQ0lPLFNBQXVCQyxFQUFpQkMsRUFBb0JDLEdBQ2pFLE1BQU1DLEVBQWlCLElBQUtILEtBQW9CQyxHQUVoRCxJQUFLQyxFQUNILE9BQU9DLEVBR1QsSUFBSyxJQUFLQyxFQUFLQyxLQUFVQyxPQUFPQyxRQUFRTCxHQUF1QixDQUM3RCxNQUFNTSxHQWNvQkMsRUFkZUwsRUFBSU0sUUFBUSxXQUFZLEtBZXJEQyxPQUFPLEdBQUdDLGNBQWdCSCxFQUFPSSxNQUFNLEdBYm5ELEdBQUlMLEVBQVlNLE9BQVMsUUFBQSxJQUFZWCxFQUFlSyxHQUNsRCxJQUNFTCxFQUFlSyxHQUFlTyxLQUFLQyxNQUFNWCxHQUN6QyxNQUFBWSxHQUNBZCxFQUFlSyxHQUFlSCxHQVF0QyxJQUE4QkksRUFINUIsT0FBT04sR0FBQUosRUFBQW1CLGlCQWFGLFNBQTBCQyxHQUMvQixJQUFLLE1BQU1DLEtBQXFCRCxFQUE0QkUscUJBQXFCLFVBQVcsQ0FDMUYsTUFBTUMsRUFBZ0JDLFNBQVNDLGNBQWMsVUFDeENKLEVBQWtCSyxJQUdyQkgsRUFBY0csSUFBTUwsRUFBa0JLLElBRnRDSCxFQUFjSSxVQUFZTixFQUFrQk0sVUFJOUNILFNBQVNJLEtBQUtDLFlBQVlOLCtFQ2pDdkIsU0FBdUJPLEVBQVNDLEVBQVdDLEVBQXlCQyxHQUN6RUgsRUFBUUksaUJBQWlCSCxFQUFZSSxJQUNuQyxHQUF1QyxpQkFBNUJILEVBQXNDLENBQy9DLE1BQU1JLEVBQVFaLFNBQVNhLGlCQUFpQkwsR0FFeEMsSUFBS0ksRUFDSCxPQUdGQSxFQUFNRSxRQUFTQyxJQUNUQSxHQUFRQSxFQUFLQyxTQUFTTCxFQUFNTSxTQUM5QlIsRUFBUUUsRUFBT0ksVUFHVlAsR0FBMkJBLEVBQXdCUSxTQUFTTCxFQUFNTSxTQUMzRVIsRUFBUUUsRUFBT0gsZUNyQnJCLFNBQUFVLEVBQUFDLEVBQUFDLEdBQUEsSUFBQXJDLE9BQUFzQyxVQUFBQyxlQUFBQyxLQUFBSixFQUFBQyxHQUFBLE1BQUEsSUFBQUksVUFBQSxrREFBQSxPQUFBTCxxRUFBQSxJQUFBTSxFQUFBLEVBQUEsU0FBQUMsRUFBQUMsR0FBQSxNQUFBLGFBQUFGLElBQUEsSUFBQUUsRUFBQSxJQUFBQyxFQUFBRixFQUFBLG9CQUFBRyxFQUFBSCxFQUFBLGlCQUFBSSxFQUFBSixFQUFBLFlBQUFLLEVBQUFMLEVBQUEsUUFBQU0sRUFBQU4sRUFBQSwrQkFBQU8sRUFBQVAsRUFBQSxtQkFBQVEsRUFBQVIsRUFBQSx1QkFBQVMsRUFBQVQsRUFBQSw0QkFBQVUsRUFBQVYsRUFBQSx1QkFBQVcsRUFBQVgsRUFBQSxzQkFBQVksRUFBQVosRUFBQSxrQkFBQWEsRUFBQWIsRUFBQSxxQkFBQWMsRUFBQWQsRUFBQSxrQkFBQWUsRUFBQWYsRUFBQSxrQkFBQSxTQUFBZ0IsSUEwQkl4QixFQUFBeUIsS0FBQVgsR0FBQUEsTUFBQSxFQUVBWSxFQUFBQyxlQUFjN0MsU0FBVSxRQUFTLDJCQUE0QjhDLE1BQU9uQyxFQUFPSSxLQUN6RUosRUFBTW9DLHVCQUVBSixLQUFLSyxtQkFBbUJqQyxNQUFBLEVBR2hDNkIsRUFBQUMsZUFBYzdDLFNBQVUsU0FBVSw4QkFBK0I4QyxNQUFPbkMsRUFBT0ksS0FDN0VKLEVBQU1vQyxpQkFFTjdCLEVBQUF5QixLQUFBZCxHQUFBQSxHQUFvQm9CLGVBQWVsQyxHQUVuQ2YsU0FBU2tELGNBQWMsSUFBSUMsWUFBWSw4QkFBK0IsQ0FBRUMsT0FBUVQsUUFFNUV6QixFQUFBeUIsS0FBQWQsR0FBQUEsR0FBb0J3QixRQUFRdEMsSUFBU0csRUFBQXlCLEtBQUFkLEdBQUFBLEdBQW9CeUIsZ0JBQWdCdkMsVUFDckU0QixLQUFLSyxtQkFBbUJqQyxNQUFBLEVBSWxDNkIsRUFBQUMsZUFBYzdDLFNBQVUsU0FBVSw4QkFBK0I4QyxNQUFPbkMsRUFBT0ksTUFBQSxJQUN6RUcsRUFBQXlCLEtBQUFkLEdBQUFBLEdBQW9Cd0IsUUFBUXRDLElBQzlCRyxFQUFBeUIsS0FBQWQsR0FBQUEsR0FBb0IwQiwyQkFBMkJ4QyxLQUFBLFNBQUF5QyxLQUFBLEVBTW5EWixFQUFBQyxlQUFjN0MsU0FBVSxRQUFTLDhDQUErQyxDQUFDVyxFQUFPOEMsS0FDdEZBLEVBQ0dDLFFBQVEsUUFDUjdDLGlCQUFpQixpQkFDakJDLFFBQVNDLFdBQ0RBLEVBQUs0QyxRQUFMQyxVQUVYSCxFQUFXRSxRQUFRQyxRQUFVLFNBQUEsU0FBQUMsRUE0RGhCQyxFQUFhQyxFQUFjbkYsR0FDMUMsTUFBTW9GLEVBQWNwRixFQUFlcUYsZ0JBQWtCLEdBQ3JELElBQUlDLEVBRUFKLEVBQVlLLGFBQWEsV0FDM0JELEVBQU8sSUFBSUUsU0FBU04sR0FFaEJDLEdBQ0ZHLEVBQUtHLE9BQU9OLEVBQWFJLGFBQWEsUUFBUyxNQUdqREQsRUFBTyxJQUFJRSxTQUdiLElBQUssSUFBS3ZGLEVBQUtDLEtBQVVDLE9BQU9DLFFBQVFnRixHQUN0Q0UsRUFBS0csT0FBT3hGLEVBQUtDLEdBR25CLE9BQU9vRixFQUFBcEIsZUFBQXdCLEVBU2tCQyxFQUFVQyxHQUNuQyxNQUFNQyxRQUFxQkYsRUFBU0csUUFBUUMsT0FFcEIsTUFBcEJKLEVBQVNLLFFBQ1gxRCxFQUFBeUIsS0FBQWQsR0FBQUEsR0FBb0JnRCx3QkFBd0JMLEVBQWVDLEdBRTNEekUsU0FBU2tELGNBQWMsSUFBSUMsWUFBWSw0QkFBNkIsQ0FBRUMsT0FBUVQsU0FDckU4QixFQUFhbEYsT0FBUyxJQUMvQlMsU0FBUzhFLE9BQ1Q5RSxTQUFTK0UsTUFBTU4sR0FDZnpFLFNBQVNnRixTQUFBbEMsZUFBQW1DLEVBV21CVixFQUFVVyxFQUFNdEcsR0FDOUMsTUFBTTZGLFFBQWV2RCxFQUFNeUIsS0FBTkwsR0FBQUEsR0FBMkJpQyxHQUVPLG1CQUE1Q1ksT0FBT3ZHLEVBQWV3RyxrQkFDL0JELE9BQU92RyxFQUFld0csa0JBQWtCWCxHQUMvQkEsRUFBYVksYUFDdEJuRSxFQUFBeUIsS0FBQUosR0FBQUEsR0FBd0IyQyxFQUFNVCxJQUU5QnZELEVBQUF5QixLQUFBRixHQUFBQSxHQUFxQnlDLEVBQU1ULEVBQWM3RixHQUN6Q3NDLEVBQUF5QixLQUFBSCxHQUFBQSxHQUFxQjBDLEVBQU10RyxRQUFBLElBRXZCc0csSUFDRkMsT0FBT0csU0FBU0osS0FBT0EsR0FHekJsRixTQUFTa0QsY0FBYyxJQUFJQyxZQUFZLDRCQUFBLFNBQUFvQyxFQVF0QnhCLEdBQ2ZBLElBQ0ZBLEVBQWF5QixVQUFBLEdBQVcsU0FBQUMsRUFRUjFCLEdBQ2RBLElBQ0ZBLEVBQWF5QixVQUFBLEdBQVcxQyxlQUFBNEMsRUFTTm5CLEdBQ3BCLElBQ0UsYUFBYUEsRUFBU0csUUFBUWlCLE9BQzlCLE1BQU9DLEdBQ1AsYUFBYXJCLEVBQVNHLFFBQVFDLFFBQUEsU0FBQWtCLEVBSWZYLEVBQU1ULFFBQUEsSUFDbkJTLEdBQ0ZDLE9BQU9HLFNBQVNRLEtBQU9yQixFQUFhWSxhQUFlSCxFQUNuREMsT0FBT0csU0FBU1MsVUFFaEJaLE9BQU9HLFNBQVNRLEtBQU9yQixFQUFhWSxhQUFBLFNBQUFXLEVBSXhCZCxFQUFNdEcsR0FDcEJxSCxXQUFXLEtBQ1QsR0FBSWYsRUFBTSxDQUNSLE1BQU1WLEVBQWdCeEUsU0FBU2tHLGNBQVQsc0JBQUFDLE9BQTZDakIsRUFBN0MsT0FFdEJDLE9BQU9pQixTQUFTLENBQUVDLElBQUs3QixFQUFjOEIsd0JBQXdCQyxFQUFHQyxTQUFVLGVBQ3JFLENBQ0wsTUFDTUMsRUFEZ0J6RyxTQUFTa0csY0FBY3RILEVBQWU0RixlQUM1QjhCLHdCQUF3QkMsRUFFcER2RyxTQUFTMEcsVUFBWUQsR0FDdkJ0QixPQUFPaUIsU0FBUyxDQUFFQyxJQUFLSSxFQUFXRCxTQUFVLGNBQUEsU0FBQUcsRUFNcEN6QixFQUFNVCxFQUFjN0YsR0FDbEMsSUFBSTRGLEVBQ0FvQyxFQUVKLEdBQUkxQixHQUFRbEYsU0FBU2tHLGNBQWNoQixHQUFPLENBQ3hDLE1BQ00yQixHQUFBLElBRGFDLFdBQ0FDLGdCQUFnQnRDLEVBQWMsYUFFakRELEVBQWdCeEUsU0FBU2tHLGNBQWNoQixHQUN2QzBCLEVBQXFCQyxFQUFJWCxjQUFjaEIsR0FBTS9FLGVBRTdDcUUsRUFBZ0J4RSxTQUFTa0csY0FBY3RILEVBQWU0RixlQUN0RG9DLEVBQXFCbkMsRUFHdkJELEVBQWNyRSxVQUFZeUcsR0FBQSxFQUMxQnBJLEVBQUFtQixrQkFBaUI2RSxHQUFBd0MsRUFBQUMsU0FyUWQsTUFnQkxDLFlBQVlDLEVBQWtCQyxHQUFlckksT0FBQXNJLGVBQUExRSxLQUFBRixFQUFBLENBQUEzRCxNQUFBNkgsSUFBQTVILE9BQUFzSSxlQUFBMUUsS0FBQUgsRUFBQSxDQUFBMUQsTUFBQWtILElBQUFqSCxPQUFBc0ksZUFBQTFFLEtBQUFKLEVBQUEsQ0FBQXpELE1BQUErRyxJQUFBOUcsT0FBQXNJLGVBQUExRSxLQUFBTCxFQUFBLENBQUF4RCxNQUFBNEcsSUFBQTNHLE9BQUFzSSxlQUFBMUUsS0FBQU4sRUFBQSxDQUFBdkQsTUFBQTJHLElBQUExRyxPQUFBc0ksZUFBQTFFLEtBQUFQLEVBQUEsQ0FBQXRELE1BQUF5RyxJQUFBeEcsT0FBQXNJLGVBQUExRSxLQUFBUixFQUFBLENBQUFyRCxNQUFBbUcsSUFBQWxHLE9BQUFzSSxlQUFBMUUsS0FBQVQsRUFBQSxDQUFBcEQsTUFBQXdGLElBQUF2RixPQUFBc0ksZUFBQTFFLEtBQUFWLEVBQUEsQ0FBQW5ELE1BQUErRSxJQUFBOUUsT0FBQXNJLGVBQUExRSxLQUFBWCxFQUFBLENBQUFsRCxNQUFBMEUsSUFBQXpFLE9BQUFzSSxlQUFBMUUsS0FBQVosRUFBQSxDQUFBakQsTUFBQTRELElBQUEzRCxPQUFBc0ksZUFBQTFFLEtBQUFmLEVBQUEsQ0FBQTBGLFVBQUEsRUFBQXhJLFdBQUEsSUFBQUMsT0FBQXNJLGVBQUExRSxLQUFBZCxFQUFBLENBQUF5RixVQUFBLEVBQUF4SSxXQUFBLElBQUFDLE9BQUFzSSxlQUFBMUUsS0FBQWIsRUFBQSxDQUFBd0YsVUFBQSxFQUFBeEksTUFiakMsQ0FDVnNHLGlCQUFrQixLQUNsQlosY0FBZSxXQUNmK0MsZ0JBQUEsRUFDQXRELGVBQWdCLEtBQ2hCdUQsT0FBUSxRQVNSdEcsRUFBQXlCLEtBQUFmLEdBQUFBLEdBQXlCdUYsRUFDekJqRyxFQUFBeUIsS0FBQWQsR0FBQUEsR0FBc0J1RixFQUV0QmxHLEVBQUF5QixLQUFBWixHQUFBQSxLQWdEc0JtRix5QkFBQzFDLEdBQ3ZCLE1BQU01RixHQUFBLEVBQWlCSixFQUFBaUosZUFBQXZHLEVBQWN5QixLQUFkYixHQUFBQSxHQUE4QixHQUFJMEMsRUFBY2IsU0FDdkUsSUFBSXVCLEVBQU1uQixFQUVvQyxJQUFBMkQsRUFHNUN4QyxFQUhFVixhQUF5Qm1ELGdCQUd2QixRQUFBRCxFQUZKM0QsRUFBZVMsRUFBYzBCLGNBQWMsK0NBQUEsSUFFdkN3QixPQUFBLEVBQUdBLEVBQWMvRCxRQUFRaUUsV0FFdEJwRCxFQUFjYixRQUFRaUUsV0FHM0JoSixFQUFlMkksaUJBQ2pCckcsRUFBQXlCLEtBQUFmLEdBQUFBLEdBQXVCaUcsb0JBQW9COUQsR0FBZ0JTLEdBQzNEdEQsRUFBQXlCLEtBQUFmLEdBQUFBLEdBQXVCa0cscUJBQXFCL0QsR0FBZ0JTLElBRzlEdEQsRUFBQXlCLEtBQUFQLEdBQUFBLEdBQTBCMkIsR0FFMUIsSUFBSSxJQUFBZ0UsRUFBQUMsRUFBQUMsRUFBQUMsRUFDRixNQUFNVixFQUFNLFFBQUFPLEVBQUEsUUFBQUMsRUFBQSxRQUFBQyxFQUNWekQsRUFBY0wsYUFBYSxpQkFBQSxJQURqQjhELE9BQUEsRUFDVkEsRUFBc0NFLHFCQUFBLElBRDVCSCxFQUFBQSxFQUFBLFFBQUFFLEVBQzZDdEosRUFBZTRJLGNBQUEsSUFENURVLE9BQUEsRUFDNkNBLEVBQXVCQyxxQkFBQSxJQURwRUosRUFBQUEsRUFDcUYsTUFFM0Z4RCxRQUFpQjZELE1BQU01RCxFQUFjTCxhQUFhLFdBQWFLLEVBQWNMLGFBQWEsUUFBUyxDQUN2R3FELE9BQVFBLEVBQ1JhLEtBQWlCLFFBQVhiLEVBQUF0RyxFQUFtQnlCLEtBQW5CVixHQUFBQSxHQUF5Q3VDLEVBQWVULEVBQWNuRixHQUFrQixLQUM5RjBKLFFBQVMsQ0FDUEMsbUJBQW9CLG9CQUluQmhFLEVBQVNpRSxTQUdadEgsRUFBTXlCLEtBQU5SLEdBQUFBLEdBQXFDb0MsRUFBVVcsRUFBTXRHLFNBRnJEc0MsRUFBTXlCLEtBQU5ULEdBQUFBLEdBQWdDcUMsRUFBVUMsR0FJNUMsTUFBT29CLEdBQ1A2QyxRQUFRN0MsTUFBTUEsR0FsQmhCLFFBb0JFMUUsRUFBQXlCLEtBQUFmLEdBQUFBLEdBQXVCOEcscUJBQXFCM0UsR0FBZ0JTLEdBQzVEdEQsRUFBQXlCLEtBQUFOLEdBQUFBLEdBQXlCMEIsOFNDeEVMUyxFQUFlbUUsR0FBTSxJQUFBQyxFQUMzQyxRQUFBQSxFQUFBcEUsRUFBYzBCLGNBQWMsNkJBQUEsSUFBNUIwQyxHQUFBQSxFQUFtREMsVUFBVUMsT0FBTyw0QkFBNkJILEdBQUFJLEVBQUFDLGlCQXhDOUYsTUFBdUI5QixjQUFBbkksT0FBQXNJLGVBQUExRSxLQUFBc0csRUFBQSxDQUFBbkssTUFBQW9LLElBSzVCaEMsb0JBQW9CMUMsR0FDbEIsSUFBS0EsRUFBYzBCLGNBQWMsc0JBQXVCLENBQ3RELE1BQU1tQyxFQUFPckksU0FBU2tHLGNBQWMsUUFFOUJpRCxFQUNKLHNIQUZpQjNKLEtBQUtDLE1BQU00SSxFQUFLMUUsUUFBUXlGLFVBRy9CQyxxQkFDVixpQkFFRjdFLEVBQWM4RSxtQkFBbUIsYUFBY0gsSUFRbkRqQyxxQkFBcUIxQyxHQUNuQitFLEVBQUE1RyxLQUFBc0csR0FBQUEsR0FBNkJ6RSxHQUFBLEdBTy9CMEMscUJBQXFCMUMsR0FDbkIrRSxFQUFBNUcsS0FBQXNHLEdBQUFBLEdBQTZCekUsR0FBQSxjQy9CakMsU0FBQWdGLEVBQUFySSxFQUFBQyxHQUFBLElBQUFyQyxPQUFBc0MsVUFBQUMsZUFBQUMsS0FBQUosRUFBQUMsR0FBQSxNQUFBLElBQUFJLFVBQUEsa0RBQUEsT0FBQUwsMEVBQUEsSUFBQXNJLEVBQUEsRUFBQSxTQUFBQyxFQUFBL0gsR0FBQSxNQUFBLGFBQUE4SCxJQUFBLElBQUE5SCxFQUFBLElBQUFnSSxFQUFBRCxFQUFBLFlBQUFFLEVBQUFGLEVBQUEsWUFBQUcsRUFBQUgsRUFBQSwyQkFBQUksRUFBQUosRUFBQSxtQ0FBQUssRUFBQUwsRUFBQSw4QkFBQU0sRUFBQU4sRUFBQSxpQ0FBQU8sRUFBQVAsRUFBQSxvQ0FBQVEsRUFBQVIsRUFBQSwwQkFBQVMsRUFBQVQsRUFBQSx1QkFBQSxTQUFBVSxFQW9EMkJ0RyxHQUN2QkEsRUFBWWpELGlCQUFpQixlQUFlQyxRQUFTdUosSUFDbkRBLEVBQWlCeEIsVUFBVXlCLE9BQU8sZ0JBQUEsU0FBQUMsRUFRTEMsR0FBVyxJQUFBQyxFQUFBQyxFQUMxQyxRQUFBRCxFQUFBRCxFQUFVOUcsUUFBUSxjQUFBLElBQWxCK0csR0FBQSxRQUFBQyxFQUFBRCxFQUEwQnZFLGNBQWMsNEJBQUEsSUFBeEN3RSxHQUFBQSxFQUE4REosU0FBQSxTQUFBSyxFQVFwQ0gsRUFBV0ksR0FDckNwQixFQUFBN0csS0FBQW1ILEdBQUFBLEdBQXNDVSxHQUV0Q0EsRUFBVTNCLFVBQVVnQyxJQUFJLGNBRXhCTCxFQUNHOUcsUUFBUSx5Q0FDUjRGLG1CQUFtQixZQUZ0QixpQ0FBQW5ELE9BRW9FeUUsRUFGcEUsV0FBQSxTQUFBRSxFQVM2QmhILEdBQzdCLElBQUtBLEVBQVlvQyxjQUFjLGFBQzdCLE9BR0YsTUFBTTZFLEVBQXFCakgsRUFBWW9DLGNBQWMsZUFFckQsSUFBSzZFLEVBQ0gsT0FHRixNQUFNQyxFQUFRRCxFQUFtQnJILFFBQVEsYUFBYVMsYUFBYSxNQUVuRUwsRUFBWW9DLGNBQWMsc0JBQXdCOEUsRUFBUSxNQUFNQyxRQUVoRUYsRUFBbUJHLFFBQUEsU0FBQUMsRUFvRGFySCxFQUFhc0gsR0FDN0M1QixFQUFBN0csS0FBQWtILEdBQUFBLEdBQThCL0YsR0FHOUJzSCxFQUFTdkssaUJBQWlCLE1BQU1DLFFBQVN1SyxJQUN2QyxJQUFJQyxFQUFhRCxFQUFpQjFILFFBQVFyRCxRQUUxQyxHQUFJZ0wsRUFBVy9MLE9BQVMsRUFBRyxDQUN6QixJQUFJd0IsRUFBT2YsU0FBU3VMLGVBQWVELElBQWV4SCxFQUFZb0MsY0FBYyxTQUFXb0YsRUFBYSxNQUVoR3ZLLElBR0Z5SSxFQUFBN0csS0FBQW9ILEdBQUFBLEdBQWlDaEosRUFBSyxHQUFJc0ssRUFBaUJsTCxXQUMzRGtMLEVBQWlCZixhQU13QixJQUEzQ2MsRUFBU3ZLLGlCQUFpQixNQUFNdEIsUUFDbEM2TCxFQUFTZCxTQUdYZCxFQUFBN0csS0FBQXFILEdBQUFBLEdBQW9DbEcsR0FDcEMwRixFQUFBN0csS0FBQXVILEdBQUFBLEdBQTZCcEcsR0FBQSxTQUFBMEgsR0FNUDFILEdBQWEsSUFBQTJILEVBQ25DLElBQUksUUFBQUEsRUFBQTNILEVBQVlKLFFBQVEsaUJBQUEsSUFBcEIrSCxPQUFBLEVBQUFBLEVBQStCbE0sUUFBUyxFQUMxQyxPQUdGLE1BQU1tTSxFQUFhNUgsRUFBWWpELGlCQUFpQixlQUVoRCxJQUFLNkssR0FBb0MsSUFBdEJBLEVBQVduTSxPQUM1QixPQUdGLEdBQUFpSyxFQUFJN0csS0FBSndILEdBQUFBLEdBQThCckcsRUFBWW9DLGNBQWMsc0JBQ3RELE9BR0YsSUFBSU8sRUFBWWlGLEVBQVdDLEtBQUssR0FBR3JGLHdCQUF3QkQsSUFFM0QsR0FBSW1ELEVBQUE3RyxLQUFBaUgsR0FBQUEsR0FBZWdDLG9CQUFxQixDQUN0QyxNQUFNQSxFQUFzQjVMLFNBQVNrRyxjQUFjc0QsRUFBQTdHLEtBQUFpSCxHQUFBQSxHQUFlZ0MscUJBRTlEQSxJQUNGbkYsR0FBYW1GLEVBQW9CQyxjQUlyQzFHLE9BQU9pQixTQUFTLENBQUVDLElBQUtJLEVBQVdELFNBQVUsV0FBQSxTQUFBc0YsR0FHekJ4TCxHQUNuQixNQUFNc0wsRUFBc0I1TCxTQUFTa0csY0FBY3NELEVBQUE3RyxLQUFBaUgsR0FBQUEsR0FBZWdDLHFCQUNsRSxJQUFJbkYsRUFBWSxFQUVabUYsSUFDRm5GLEVBQVltRixFQUFvQkMsY0FHbEMsTUFBTUUsRUFBT3pMLEVBQVFnRyx3QkFFckIsT0FDRXlGLEVBQUsxRixLQUFPSSxHQUNac0YsRUFBS0MsTUFBUSxHQUNiRCxFQUFLRSxTQUFXOUcsT0FBTytHLGFBQWVsTSxTQUFTbU0sZ0JBQWdCTixlQUMvREUsRUFBS0ssUUFBVWpILE9BQU9rSCxZQUFjck0sU0FBU21NLGdCQUFnQkcsYUFBQUMsRUFBQUMsY0EvTjVELE1BTUx0RixZQUFZdUYsRUFBVSxJQUFJMU4sT0FBQXNJLGVBQUExRSxLQUFBd0gsRUFBQSxDQUFBckwsTUFBQWdOLEtBQUEvTSxPQUFBc0ksZUFBQTFFLEtBQUF1SCxFQUFBLENBQUFwTCxNQUFBME0sS0FBQXpNLE9BQUFzSSxlQUFBMUUsS0FBQXNILEVBQUEsQ0FBQW5MLE1BQUFxTSxJQUFBcE0sT0FBQXNJLGVBQUExRSxLQUFBcUgsRUFBQSxDQUFBbEwsTUFBQWdNLElBQUEvTCxPQUFBc0ksZUFBQTFFLEtBQUFvSCxFQUFBLENBQUFqTCxNQUFBNkwsSUFBQTVMLE9BQUFzSSxlQUFBMUUsS0FBQW1ILEVBQUEsQ0FBQWhMLE1BQUF5TCxJQUFBeEwsT0FBQXNJLGVBQUExRSxLQUFBa0gsRUFBQSxDQUFBL0ssTUFBQXNMLElBQUFyTCxPQUFBc0ksZUFBQTFFLEtBQUFnSCxFQUFBLENBQUFyQyxVQUFBLEVBQUF4SSxNQUxkLENBQ1Y4TSxvQkFBcUIsUUFJRzdNLE9BQUFzSSxlQUFBMUUsS0FBQWlILEVBQUEsQ0FBQXRDLFVBQUEsRUFBQXhJLFdBQUEsSUFDeEIwSyxFQUFBN0csS0FBQWlILEdBQUFBLElBQUEsRUFBaUJwTCxFQUFBaUosZUFBQStCLEVBQWM3RyxLQUFkZ0gsR0FBQUEsR0FBOEI4QyxFQUFTLElBUTFEdkYsZ0JBQWdCcEQsR0FLZCxPQUpBbkIsS0FBS1ksMkJBQTJCTyxHQUNoQzBGLEVBQUE3RyxLQUFBcUgsR0FBQUEsR0FBb0NsRyxHQUNwQzBGLEVBQUE3RyxLQUFBdUgsR0FBQUEsR0FBNkJwRyxHQUV0Qm5CLEtBQUtVLFFBQVFTLEdBT3RCb0QsMkJBQTJCcEQsR0FDekIwRixFQUFBN0csS0FBQWtILEdBQUFBLEdBQThCL0YsR0FFOUIsSUFBSyxNQUFNNEksS0FBUzVJLEVBQVk2SSxTQUNQLFVBQW5CRCxFQUFNRSxVQUEyQyxhQUFuQkYsRUFBTUUsVUFBOEMsV0FBbkJGLEVBQU1FLFVBSXBFRixFQUFNRyxrQkFDVHJELEVBQUE3RyxLQUFBb0gsR0FBQUEsR0FBaUMyQyxFQUFPQSxFQUFNSSxtQkFFekNoSixFQUFZc0QsZ0JBQ2Z0RCxFQUFZc0QsY0FBZ0IsSUFHOUJ0RCxFQUFZc0QsY0FBYy9ELFNBQUEsR0FnRWhDNkQsUUFBUXBELEdBQWEsSUFBQWlKLEVBQ25CLFFBQVEsUUFBQUEsRUFBQ2pKLEVBQVlzRCxxQkFBQSxJQUFiMkYsSUFBQ0EsRUFBMkIxSixTQU90QzZELGVBQWVwRCxHQUNiQSxFQUFZc0QsY0FBZ0IsQ0FDMUIvRCxTQUFBLEdBU0o2RCx3QkFBd0IxQyxFQUFld0ksR0FBbUIsSUFBQUMsRUFDeEQsS0FBTXpJLGFBQXlCbUQsaUJBQzdCLE9BR0YsTUFBTXVGLEVBQVkxSSxFQUFjMEIsY0FBYyxlQUc5QyxRQUFBK0csRUFBQWpOLFNBQVN1TCxlQUFlLG9CQUFBLElBQXhCMEIsR0FBQUEsRUFBc0MzQyxTQUdsQzRDLEVBQ0ZBLEVBQVU1RCxtQkFBbUIsYUFBYzBELEdBRTNDeEksRUFBYzhFLG1CQUFtQixhQUFjMEQsR0FHakR4RCxFQUFBN0csS0FBQXNILEdBQUFBLEdBQXVDekYsRUFBZXhFLFNBQVN1TCxlQUFlLGdCQzNJaEYsSUFBSXZFLEVBQUFDLFNBQVMsSUFBSThCLEVBQUFDLGlCQUFvQixJQUFJdUQsRUFBQUMsZU5WM0MiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtcbiIsIi8qXG4gKiBDb3B5cmlnaHQgKGMpIGJ5IHRoZSBBQ1AzIERldmVsb3BlcnMuXG4gKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBhdCB0aGUgdG9wLWxldmVsIG1vZHVsZSBkaXJlY3RvcnkgZm9yIGxpY2Vuc2luZyBkZXRhaWxzLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZVNldHRpbmdzKGRlZmF1bHRTZXR0aW5ncywgY29uc3RydWN0b3JPcHRpb25zLCBkYXRhQXR0cmlidXRlT3B0aW9ucykge1xuICBjb25zdCBtZXJnZWRTZXR0aW5ncyA9IHsgLi4uZGVmYXVsdFNldHRpbmdzLCAuLi5jb25zdHJ1Y3Rvck9wdGlvbnMgfTtcblxuICBpZiAoIWRhdGFBdHRyaWJ1dGVPcHRpb25zKSB7XG4gICAgcmV0dXJuIG1lcmdlZFNldHRpbmdzO1xuICB9XG5cbiAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGFBdHRyaWJ1dGVPcHRpb25zKSkge1xuICAgIGNvbnN0IGtleVN0cmlwcGVkID0gbG93ZXJDYXNlRmlyc3RMZXR0ZXIoa2V5LnJlcGxhY2UoXCJhamF4Rm9ybVwiLCBcIlwiKSk7XG5cbiAgICBpZiAoa2V5U3RyaXBwZWQubGVuZ3RoID4gMCAmJiB0eXBlb2YgbWVyZ2VkU2V0dGluZ3Nba2V5U3RyaXBwZWRdICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICB0cnkge1xuICAgICAgICBtZXJnZWRTZXR0aW5nc1trZXlTdHJpcHBlZF0gPSBKU09OLnBhcnNlKHZhbHVlKTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICBtZXJnZWRTZXR0aW5nc1trZXlTdHJpcHBlZF0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbWVyZ2VkU2V0dGluZ3M7XG59XG5cbmZ1bmN0aW9uIGxvd2VyQ2FzZUZpcnN0TGV0dGVyKHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgc3RyaW5nLnNsaWNlKDEpO1xufVxuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gYWRkIGRvd25sb2FkcyBqYXZhc2NyaXB0IGNvZGUgKGUuZy4gYWZ0ZXIgWEhSIHJlcXVlc3RzKSB0byB0aGUgSFRNTCBkb2N1bWVudHMgPGhlYWQ+LCBzbyB0aGF0IHRoZVxuICogamF2YXNjcmlwdCBjb2RlIGNhbiBhY3R1YWxseSBnZXQgZXhlY3V0ZWQuXG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWxlbWVudENvbnRhaW5pbmdTY3JpcHRUYWdzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRTY3JpcHRzVG9IZWFkKGVsZW1lbnRDb250YWluaW5nU2NyaXB0VGFncykge1xuICBmb3IgKGNvbnN0IGFqYXhTY3JpcHRFbGVtZW50IG9mIGVsZW1lbnRDb250YWluaW5nU2NyaXB0VGFncy5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKSkge1xuICAgIGNvbnN0IHNjcmlwdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIpO1xuICAgIGlmICghYWpheFNjcmlwdEVsZW1lbnQuc3JjKSB7XG4gICAgICBzY3JpcHRFbGVtZW50LmlubmVySFRNTCA9IGFqYXhTY3JpcHRFbGVtZW50LmlubmVySFRNTDtcbiAgICB9IGVsc2Uge1xuICAgICAgc2NyaXB0RWxlbWVudC5zcmMgPSBhamF4U2NyaXB0RWxlbWVudC5zcmM7XG4gICAgfVxuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc2NyaXB0RWxlbWVudCk7XG4gIH1cbn1cbiIsIi8qXG4gKiBDb3B5cmlnaHQgKGMpIGJ5IHRoZSBBQ1AzIERldmVsb3BlcnMuXG4gKiBTZWUgdGhlIExJQ0VOQ0UgZmlsZSBhdCB0aGUgdG9wLWxldmVsIG1vZHVsZSBkaXJlY3RvcnkgZm9yIGxpY2VuY2luZyBkZXRhaWxzLlxuICovXG5cbi8qKlxuICpcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR8RG9jdW1lbnR9IGVsZW1lbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWVcbiAqIEBwYXJhbSB7c3RyaW5nfEhUTUxFbGVtZW50fSBzZWxlY3Rvck9yVGFyZ2V0RWxlbWVudFxuICogQHBhcmFtIHtmdW5jdGlvbn0gaGFuZGxlclxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVsZWdhdGVFdmVudChlbGVtZW50LCBldmVudE5hbWUsIHNlbGVjdG9yT3JUYXJnZXRFbGVtZW50LCBoYW5kbGVyKSB7XG4gIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIChldmVudCkgPT4ge1xuICAgIGlmICh0eXBlb2Ygc2VsZWN0b3JPclRhcmdldEVsZW1lbnQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGNvbnN0IGVsZW1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvck9yVGFyZ2V0RWxlbWVudCk7XG5cbiAgICAgIGlmICghZWxlbXMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBlbGVtcy5mb3JFYWNoKChlbGVtKSA9PiB7XG4gICAgICAgIGlmIChlbGVtICYmIGVsZW0uY29udGFpbnMoZXZlbnQudGFyZ2V0KSkge1xuICAgICAgICAgIGhhbmRsZXIoZXZlbnQsIGVsZW0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKHNlbGVjdG9yT3JUYXJnZXRFbGVtZW50ICYmIHNlbGVjdG9yT3JUYXJnZXRFbGVtZW50LmNvbnRhaW5zKGV2ZW50LnRhcmdldCkpIHtcbiAgICAgIGhhbmRsZXIoZXZlbnQsIHNlbGVjdG9yT3JUYXJnZXRFbGVtZW50KTtcbiAgICB9XG4gIH0pO1xufVxuIiwiLypcbiAqIENvcHlyaWdodCAoYykgYnkgdGhlIEFDUDMgRGV2ZWxvcGVycy5cbiAqIFNlZSB0aGUgTElDRU5TRSBmaWxlIGF0IHRoZSB0b3AtbGV2ZWwgbW9kdWxlIGRpcmVjdG9yeSBmb3IgbGljZW5zaW5nIGRldGFpbHMuXG4gKi9cblxuaW1wb3J0IHsgYWRkU2NyaXB0c1RvSGVhZCwgbWVyZ2VTZXR0aW5ncyB9IGZyb20gXCIuL3V0aWxzXCI7XG5pbXBvcnQgeyBkZWxlZ2F0ZUV2ZW50IH0gZnJvbSBcIi4vZXZlbnQtaGFuZGxlclwiO1xuXG5leHBvcnQgY2xhc3MgQWpheEZvcm0ge1xuICAjbG9hZGluZ0luZGljYXRvcjtcbiAgI2Zvcm1WYWxpZGF0b3I7XG4gICNkZWZhdWx0cyA9IHtcbiAgICBjb21wbGV0ZUNhbGxiYWNrOiBudWxsLFxuICAgIHRhcmdldEVsZW1lbnQ6IFwiI2NvbnRlbnRcIixcbiAgICBsb2FkaW5nT3ZlcmxheTogdHJ1ZSxcbiAgICBjdXN0b21Gb3JtRGF0YTogbnVsbCxcbiAgICBtZXRob2Q6IG51bGwsXG4gIH07XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7TG9hZGluZ0luZGljYXRvcn0gbG9hZGluZ0luZGljYXRvclxuICAgKiBAcGFyYW0ge0Zvcm1WYWxpZGF0b3J9IGZvcm1WYWxpZGF0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKGxvYWRpbmdJbmRpY2F0b3IsIGZvcm1WYWxpZGF0b3IpIHtcbiAgICB0aGlzLiNsb2FkaW5nSW5kaWNhdG9yID0gbG9hZGluZ0luZGljYXRvcjtcbiAgICB0aGlzLiNmb3JtVmFsaWRhdG9yID0gZm9ybVZhbGlkYXRvcjtcblxuICAgIHRoaXMuI2luaXQoKTtcbiAgfVxuXG4gICNpbml0KCkge1xuICAgIHRoaXMuI3JlZ2lzdGVyQ2xpY2tlZFN1Ym1pdEJ1dHRvbigpO1xuXG4gICAgZGVsZWdhdGVFdmVudChkb2N1bWVudCwgXCJjbGlja1wiLCAnYVtkYXRhLWFqYXgtZm9ybT1cInRydWVcIl0nLCBhc3luYyAoZXZlbnQsIGVsZW0pID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIGF3YWl0IHRoaXMucGVyZm9ybUFqYXhSZXF1ZXN0KGVsZW0pO1xuICAgIH0pO1xuXG4gICAgZGVsZWdhdGVFdmVudChkb2N1bWVudCwgXCJzdWJtaXRcIiwgJ2Zvcm1bZGF0YS1hamF4LWZvcm09XCJ0cnVlXCJdJywgYXN5bmMgKGV2ZW50LCBlbGVtKSA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICB0aGlzLiNmb3JtVmFsaWRhdG9yLnNldEZvcm1Bc1ZhbGlkKGVsZW0pO1xuXG4gICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcImFjcDMuYWpheEZyb20uc3VibWl0LmJlZm9yZVwiLCB7IGRldGFpbDogdGhpcyB9KSk7XG5cbiAgICAgIGlmICh0aGlzLiNmb3JtVmFsaWRhdG9yLmlzVmFsaWQoZWxlbSkgJiYgdGhpcy4jZm9ybVZhbGlkYXRvci5wcmVWYWxpZGF0ZUZvcm0oZWxlbSkpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5wZXJmb3JtQWpheFJlcXVlc3QoZWxlbSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBkZWxlZ2F0ZUV2ZW50KGRvY3VtZW50LCBcImNoYW5nZVwiLCAnZm9ybVtkYXRhLWFqYXgtZm9ybT1cInRydWVcIl0nLCBhc3luYyAoZXZlbnQsIGVsZW0pID0+IHtcbiAgICAgIGlmICh0aGlzLiNmb3JtVmFsaWRhdG9yLmlzVmFsaWQoZWxlbSkgPT09IGZhbHNlKSB7XG4gICAgICAgIHRoaXMuI2Zvcm1WYWxpZGF0b3IuY2hlY2tGb3JtRWxlbWVudHNGb3JFcnJvcnMoZWxlbSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAjcmVnaXN0ZXJDbGlja2VkU3VibWl0QnV0dG9uKCkge1xuICAgIGRlbGVnYXRlRXZlbnQoZG9jdW1lbnQsIFwiY2xpY2tcIiwgJ2Zvcm1bZGF0YS1hamF4LWZvcm09XCJ0cnVlXCJdIFt0eXBlPVwic3VibWl0XCJdJywgKGV2ZW50LCBzdWJtaXRFbGVtKSA9PiB7XG4gICAgICBzdWJtaXRFbGVtXG4gICAgICAgIC5jbG9zZXN0KFwiZm9ybVwiKVxuICAgICAgICAucXVlcnlTZWxlY3RvckFsbChcIlt0eXBlPXN1Ym1pdF1cIilcbiAgICAgICAgLmZvckVhY2goKGVsZW0pID0+IHtcbiAgICAgICAgICBkZWxldGUgZWxlbS5kYXRhc2V0W1wiY2xpY2tlZFwiXTtcbiAgICAgICAgfSk7XG4gICAgICBzdWJtaXRFbGVtLmRhdGFzZXQuY2xpY2tlZCA9IFwidHJ1ZVwiO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldEVsZW1lbnRcbiAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XG4gICAqL1xuICBhc3luYyBwZXJmb3JtQWpheFJlcXVlc3QodGFyZ2V0RWxlbWVudCkge1xuICAgIGNvbnN0IG1lcmdlZFNldHRpbmdzID0gbWVyZ2VTZXR0aW5ncyh0aGlzLiNkZWZhdWx0cywge30sIHRhcmdldEVsZW1lbnQuZGF0YXNldCk7XG4gICAgbGV0IGhhc2gsIHN1Ym1pdEJ1dHRvbjtcblxuICAgIGlmICh0YXJnZXRFbGVtZW50IGluc3RhbmNlb2YgSFRNTEZvcm1FbGVtZW50KSB7XG4gICAgICBzdWJtaXRCdXR0b24gPSB0YXJnZXRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1t0eXBlPVwic3VibWl0XCJdW2RhdGEtY2xpY2tlZD1cInRydWVcIl0nKTtcblxuICAgICAgaGFzaCA9IHN1Ym1pdEJ1dHRvbj8uZGF0YXNldC5oYXNoQ2hhbmdlO1xuICAgIH0gZWxzZSB7XG4gICAgICBoYXNoID0gdGFyZ2V0RWxlbWVudC5kYXRhc2V0Lmhhc2hDaGFuZ2U7XG4gICAgfVxuXG4gICAgaWYgKG1lcmdlZFNldHRpbmdzLmxvYWRpbmdPdmVybGF5KSB7XG4gICAgICB0aGlzLiNsb2FkaW5nSW5kaWNhdG9yLmFkZExvYWRpbmdJbmRpY2F0b3Ioc3VibWl0QnV0dG9uIHx8IHRhcmdldEVsZW1lbnQpO1xuICAgICAgdGhpcy4jbG9hZGluZ0luZGljYXRvci5zaG93TG9hZGluZ0luZGljYXRvcihzdWJtaXRCdXR0b24gfHwgdGFyZ2V0RWxlbWVudCk7XG4gICAgfVxuXG4gICAgdGhpcy4jZGlzYWJsZVN1Ym1pdEJ1dHRvbihzdWJtaXRCdXR0b24pO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG1ldGhvZCA9XG4gICAgICAgIHRhcmdldEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibWV0aG9kXCIpPy50b1VwcGVyQ2FzZSgpID8/IG1lcmdlZFNldHRpbmdzLm1ldGhvZD8udG9VcHBlckNhc2UoKSA/PyBcIkdFVFwiO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHRhcmdldEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiYWN0aW9uXCIpIHx8IHRhcmdldEVsZW1lbnQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSwge1xuICAgICAgICBtZXRob2Q6IG1ldGhvZCxcbiAgICAgICAgYm9keTogbWV0aG9kICE9PSBcIkdFVFwiID8gdGhpcy4jcHJlcGFyZUZvcm1EYXRhKHRhcmdldEVsZW1lbnQsIHN1Ym1pdEJ1dHRvbiwgbWVyZ2VkU2V0dGluZ3MpIDogbnVsbCxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIFwiWC1SZXF1ZXN0ZWQtV2l0aFwiOiBcIlhNTEh0dHBSZXF1ZXN0XCIsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBhd2FpdCB0aGlzLiNoYW5kbGVSZXNwb25zZUVycm9yKHJlc3BvbnNlLCB0YXJnZXRFbGVtZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IHRoaXMuI2hhbmRsZVN1Y2Nlc3NmdWxSZXNwb25zZShyZXNwb25zZSwgaGFzaCwgbWVyZ2VkU2V0dGluZ3MpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy4jbG9hZGluZ0luZGljYXRvci5oaWRlTG9hZGluZ0luZGljYXRvcihzdWJtaXRCdXR0b24gfHwgdGFyZ2V0RWxlbWVudCk7XG4gICAgICB0aGlzLiNlbmFibGVTdWJtaXRCdXR0b24oc3VibWl0QnV0dG9uKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtIVE1MRm9ybUVsZW1lbnR9IGZvcm1FbGVtZW50XG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHN1Ym1pdEJ1dHRvblxuICAgKiBAcGFyYW0ge1JlY29yZDxzdHJpbmcsIGFueT59IG1lcmdlZFNldHRpbmdzXG4gICAqIEByZXR1cm5zIHtGb3JtRGF0YX1cbiAgICovXG4gICNwcmVwYXJlRm9ybURhdGEoZm9ybUVsZW1lbnQsIHN1Ym1pdEJ1dHRvbiwgbWVyZ2VkU2V0dGluZ3MpIHtcbiAgICBjb25zdCBpbml0aWFsRGF0YSA9IG1lcmdlZFNldHRpbmdzLmN1c3RvbUZvcm1EYXRhIHx8IHt9O1xuICAgIGxldCBkYXRhO1xuXG4gICAgaWYgKGZvcm1FbGVtZW50LmdldEF0dHJpYnV0ZShcIm1ldGhvZFwiKSkge1xuICAgICAgZGF0YSA9IG5ldyBGb3JtRGF0YShmb3JtRWxlbWVudCk7XG5cbiAgICAgIGlmIChzdWJtaXRCdXR0b24pIHtcbiAgICAgICAgZGF0YS5hcHBlbmQoc3VibWl0QnV0dG9uLmdldEF0dHJpYnV0ZShcIm5hbWVcIiksIFwiMVwiKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZGF0YSA9IG5ldyBGb3JtRGF0YSgpO1xuICAgIH1cblxuICAgIGZvciAobGV0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhpbml0aWFsRGF0YSkpIHtcbiAgICAgIGRhdGEuYXBwZW5kKGtleSwgdmFsdWUpO1xuICAgIH1cblxuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7UmVzcG9uc2V9IHJlc3BvbnNlXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldEVsZW1lbnRcbiAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XG4gICAqL1xuICBhc3luYyAjaGFuZGxlUmVzcG9uc2VFcnJvcihyZXNwb25zZSwgdGFyZ2V0RWxlbWVudCkge1xuICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmNsb25lKCkudGV4dCgpO1xuXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAwKSB7XG4gICAgICB0aGlzLiNmb3JtVmFsaWRhdG9yLmhhbmRsZUZvcm1FcnJvck1lc3NhZ2VzKHRhcmdldEVsZW1lbnQsIHJlc3BvbnNlRGF0YSk7XG5cbiAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwiYWNwMy5hamF4RnJvbS5zdWJtaXQuZmFpbFwiLCB7IGRldGFpbDogdGhpcyB9KSk7XG4gICAgfSBlbHNlIGlmIChyZXNwb25zZURhdGEubGVuZ3RoID4gMCkge1xuICAgICAgZG9jdW1lbnQub3BlbigpO1xuICAgICAgZG9jdW1lbnQud3JpdGUocmVzcG9uc2VEYXRhKTtcbiAgICAgIGRvY3VtZW50LmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7UmVzcG9uc2V9IHJlc3BvbnNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBoYXNoXG4gICAqIEBwYXJhbSB7UmVjb3JkPHN0cmluZywgYW55Pn0gbWVyZ2VkU2V0dGluZ3NcbiAgICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XG4gICAqL1xuICBhc3luYyAjaGFuZGxlU3VjY2Vzc2Z1bFJlc3BvbnNlKHJlc3BvbnNlLCBoYXNoLCBtZXJnZWRTZXR0aW5ncykge1xuICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHRoaXMuI2RlY29kZVJlc3BvbnNlKHJlc3BvbnNlKTtcblxuICAgIGlmICh0eXBlb2Ygd2luZG93W21lcmdlZFNldHRpbmdzLmNvbXBsZXRlQ2FsbGJhY2tdID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHdpbmRvd1ttZXJnZWRTZXR0aW5ncy5jb21wbGV0ZUNhbGxiYWNrXShyZXNwb25zZURhdGEpO1xuICAgIH0gZWxzZSBpZiAocmVzcG9uc2VEYXRhLnJlZGlyZWN0X3VybCkge1xuICAgICAgdGhpcy4jcmVkaXJlY3RUb05ld1BhZ2UoaGFzaCwgcmVzcG9uc2VEYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4jcmVwbGFjZUNvbnRlbnQoaGFzaCwgcmVzcG9uc2VEYXRhLCBtZXJnZWRTZXR0aW5ncyk7XG4gICAgICB0aGlzLiNzY3JvbGxJbnRvVmlldyhoYXNoLCBtZXJnZWRTZXR0aW5ncyk7XG5cbiAgICAgIGlmIChoYXNoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhhc2ggPSBoYXNoO1xuICAgICAgfVxuXG4gICAgICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcImFjcDMuYWpheEZyb20uY29tcGxldGVcIikpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IHN1Ym1pdEJ1dHRvblxuICAgKi9cbiAgI2Rpc2FibGVTdWJtaXRCdXR0b24oc3VibWl0QnV0dG9uKSB7XG4gICAgaWYgKHN1Ym1pdEJ1dHRvbikge1xuICAgICAgc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBzdWJtaXRCdXR0b25cbiAgICovXG4gICNlbmFibGVTdWJtaXRCdXR0b24oc3VibWl0QnV0dG9uKSB7XG4gICAgaWYgKHN1Ym1pdEJ1dHRvbikge1xuICAgICAgc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7UmVzcG9uc2V9IHJlc3BvbnNlXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPCo+fVxuICAgKi9cbiAgYXN5bmMgI2RlY29kZVJlc3BvbnNlKHJlc3BvbnNlKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCByZXNwb25zZS5jbG9uZSgpLmpzb24oKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmNsb25lKCkudGV4dCgpO1xuICAgIH1cbiAgfVxuXG4gICNyZWRpcmVjdFRvTmV3UGFnZShoYXNoLCByZXNwb25zZURhdGEpIHtcbiAgICBpZiAoaGFzaCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHJlc3BvbnNlRGF0YS5yZWRpcmVjdF91cmwgKyBoYXNoO1xuICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHJlc3BvbnNlRGF0YS5yZWRpcmVjdF91cmw7XG4gICAgfVxuICB9XG5cbiAgI3Njcm9sbEludG9WaWV3KGhhc2gsIG1lcmdlZFNldHRpbmdzKSB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAoaGFzaCkge1xuICAgICAgICBjb25zdCB0YXJnZXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW2RhdGEtaGFzaC1jaGFuZ2U9XCIke2hhc2h9XCJdYCk7XG5cbiAgICAgICAgd2luZG93LnNjcm9sbFRvKHsgdG9wOiB0YXJnZXRFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnksIGJlaGF2aW9yOiBcInNtb290aFwiIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobWVyZ2VkU2V0dGluZ3MudGFyZ2V0RWxlbWVudCk7XG4gICAgICAgIGNvbnN0IG9mZnNldFRvcCA9IHRhcmdldEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkueTtcblxuICAgICAgICBpZiAoZG9jdW1lbnQuc2Nyb2xsVG9wID4gb2Zmc2V0VG9wKSB7XG4gICAgICAgICAgd2luZG93LnNjcm9sbFRvKHsgdG9wOiBvZmZzZXRUb3AsIGJlaGF2aW9yOiBcInNtb290aFwiIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAjcmVwbGFjZUNvbnRlbnQoaGFzaCwgcmVzcG9uc2VEYXRhLCBtZXJnZWRTZXR0aW5ncykge1xuICAgIGxldCB0YXJnZXRFbGVtZW50O1xuICAgIGxldCB1cGRhdGVkQ29udGVudERhdGE7XG5cbiAgICBpZiAoaGFzaCAmJiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGhhc2gpKSB7XG4gICAgICBjb25zdCBwYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7XG4gICAgICBjb25zdCBkb2MgPSBwYXJzZXIucGFyc2VGcm9tU3RyaW5nKHJlc3BvbnNlRGF0YSwgXCJ0ZXh0L2h0bWxcIik7XG5cbiAgICAgIHRhcmdldEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGhhc2gpO1xuICAgICAgdXBkYXRlZENvbnRlbnREYXRhID0gZG9jLnF1ZXJ5U2VsZWN0b3IoaGFzaCkuaW5uZXJIVE1MO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihtZXJnZWRTZXR0aW5ncy50YXJnZXRFbGVtZW50KTtcbiAgICAgIHVwZGF0ZWRDb250ZW50RGF0YSA9IHJlc3BvbnNlRGF0YTtcbiAgICB9XG5cbiAgICB0YXJnZXRFbGVtZW50LmlubmVySFRNTCA9IHVwZGF0ZWRDb250ZW50RGF0YTtcbiAgICBhZGRTY3JpcHRzVG9IZWFkKHRhcmdldEVsZW1lbnQpO1xuICB9XG59XG4iLCIvKlxuICogQ29weXJpZ2h0IChjKSBieSB0aGUgQUNQMyBEZXZlbG9wZXJzLlxuICogU2VlIHRoZSBMSUNFTlNFIGZpbGUgYXQgdGhlIHRvcC1sZXZlbCBtb2R1bGUgZGlyZWN0b3J5IGZvciBsaWNlbnNpbmcgZGV0YWlscy5cbiAqL1xuXG5leHBvcnQgY2xhc3MgTG9hZGluZ0luZGljYXRvciB7XG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0YXJnZXRFbGVtZW50XG4gICAqL1xuICBhZGRMb2FkaW5nSW5kaWNhdG9yKHRhcmdldEVsZW1lbnQpIHtcbiAgICBpZiAoIXRhcmdldEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5sb2FkaW5nLWluZGljYXRvclwiKSkge1xuICAgICAgY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpO1xuICAgICAgY29uc3QganNTdmdJY29ucyA9IEpTT04ucGFyc2UoYm9keS5kYXRhc2V0LnN2Z0ljb25zKTtcbiAgICAgIGNvbnN0IGxvYWRpbmdJbmRpY2F0b3JIdG1sID1cbiAgICAgICAgJzxzdmcgY2xhc3M9XCJzdmctaWNvbiBzdmctaWNvbl9fc3Bpbm5lciBzdmctaWNvbi0tc3BpbiBsb2FkaW5nLWluZGljYXRvciBtZS0xXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiPjx1c2UgeGxpbms6aHJlZj1cIicgK1xuICAgICAgICBqc1N2Z0ljb25zW1wibG9hZGluZ0luZGljYXRvckljb25cIl0gK1xuICAgICAgICAnXCI+PC91c2U+PC9zdmc+JztcblxuICAgICAgdGFyZ2V0RWxlbWVudC5pbnNlcnRBZGphY2VudEhUTUwoXCJhZnRlcmJlZ2luXCIsIGxvYWRpbmdJbmRpY2F0b3JIdG1sKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFyZ2V0RWxlbWVudFxuICAgKi9cbiAgc2hvd0xvYWRpbmdJbmRpY2F0b3IodGFyZ2V0RWxlbWVudCkge1xuICAgIHRoaXMuI3RvZ2dsZUxvYWRpbmdJbmRpY2F0b3IodGFyZ2V0RWxlbWVudCwgdHJ1ZSk7XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFyZ2V0RWxlbWVudFxuICAgKi9cbiAgaGlkZUxvYWRpbmdJbmRpY2F0b3IodGFyZ2V0RWxlbWVudCkge1xuICAgIHRoaXMuI3RvZ2dsZUxvYWRpbmdJbmRpY2F0b3IodGFyZ2V0RWxlbWVudCwgZmFsc2UpO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldEVsZW1lbnRcbiAgICogQHBhcmFtIHtCb29sZWFufSBzaG93XG4gICAqL1xuICAjdG9nZ2xlTG9hZGluZ0luZGljYXRvcih0YXJnZXRFbGVtZW50LCBzaG93KSB7XG4gICAgdGFyZ2V0RWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmxvYWRpbmctaW5kaWNhdG9yXCIpPy5jbGFzc0xpc3QudG9nZ2xlKFwibG9hZGluZy1pbmRpY2F0b3JfX2FjdGl2ZVwiLCBzaG93KTtcbiAgfVxufVxuIiwiLypcbiAqIENvcHlyaWdodCAoYykgYnkgdGhlIEFDUDMgRGV2ZWxvcGVycy5cbiAqIFNlZSB0aGUgTElDRU5TRSBmaWxlIGF0IHRoZSB0b3AtbGV2ZWwgbW9kdWxlIGRpcmVjdG9yeSBmb3IgbGljZW5zaW5nIGRldGFpbHMuXG4gKi9cblxuaW1wb3J0IHsgbWVyZ2VTZXR0aW5ncyB9IGZyb20gXCIuL3V0aWxzXCI7XG5cbmV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgI2RlZmF1bHRzID0ge1xuICAgIHNjcm9sbE9mZnNldEVsZW1lbnQ6IG51bGwsXG4gIH07XG4gICNzZXR0aW5ncztcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLiNzZXR0aW5ncyA9IG1lcmdlU2V0dGluZ3ModGhpcy4jZGVmYXVsdHMsIG9wdGlvbnMsIHt9KTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge0hUTUxGb3JtRWxlbWVudH0gZm9ybUVsZW1lbnRcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBwcmVWYWxpZGF0ZUZvcm0oZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLmNoZWNrRm9ybUVsZW1lbnRzRm9yRXJyb3JzKGZvcm1FbGVtZW50KTtcbiAgICB0aGlzLiNmb2N1c1RhYldpdGhGaXJzdEVycm9yTWVzc2FnZShmb3JtRWxlbWVudCk7XG4gICAgdGhpcy4jc2Nyb2xsVG9GaXJzdEZvcm1FcnJvcihmb3JtRWxlbWVudCk7XG5cbiAgICByZXR1cm4gdGhpcy5pc1ZhbGlkKGZvcm1FbGVtZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge0hUTUxGb3JtRWxlbWVudH0gZm9ybUVsZW1lbnRcbiAgICovXG4gIGNoZWNrRm9ybUVsZW1lbnRzRm9yRXJyb3JzKGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy4jcmVtb3ZlQWxsUHJldmlvdXNFcnJvcnMoZm9ybUVsZW1lbnQpO1xuXG4gICAgZm9yIChjb25zdCBmaWVsZCBvZiBmb3JtRWxlbWVudC5lbGVtZW50cykge1xuICAgICAgaWYgKGZpZWxkLm5vZGVOYW1lICE9PSBcIklOUFVUXCIgJiYgZmllbGQubm9kZU5hbWUgIT09IFwiVEVYVEFSRUFcIiAmJiBmaWVsZC5ub2RlTmFtZSAhPT0gXCJTRUxFQ1RcIikge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCFmaWVsZC5jaGVja1ZhbGlkaXR5KCkpIHtcbiAgICAgICAgdGhpcy4jYWRkRXJyb3JNZXNzYWdlVG9Gb3JtRmllbGQoZmllbGQsIGZpZWxkLnZhbGlkYXRpb25NZXNzYWdlKTtcblxuICAgICAgICBpZiAoIWZvcm1FbGVtZW50LmZvcm1WYWxpZGF0b3IpIHtcbiAgICAgICAgICBmb3JtRWxlbWVudC5mb3JtVmFsaWRhdG9yID0ge307XG4gICAgICAgIH1cblxuICAgICAgICBmb3JtRWxlbWVudC5mb3JtVmFsaWRhdG9yLmlzVmFsaWQgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtIVE1MRm9ybUVsZW1lbnR9IGZvcm1FbGVtZW50XG4gICAqL1xuICAjcmVtb3ZlQWxsUHJldmlvdXNFcnJvcnMoZm9ybUVsZW1lbnQpIHtcbiAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmlzLWludmFsaWRcIikuZm9yRWFjaCgoaW52YWxpZEZvcm1GaWVsZCkgPT4ge1xuICAgICAgaW52YWxpZEZvcm1GaWVsZC5jbGFzc0xpc3QucmVtb3ZlKFwiaXMtaW52YWxpZFwiKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBmb3JtRmllbGRcbiAgICovXG4gICNyZW1vdmVFcnJvck1lc3NhZ2VGcm9tRm9ybUZpZWxkKGZvcm1GaWVsZCkge1xuICAgIGZvcm1GaWVsZC5jbG9zZXN0KFwiZGl2XCIpPy5xdWVyeVNlbGVjdG9yKFwiLmludmFsaWQtZmVlZGJhY2tcIik/LnJlbW92ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGZvcm1GaWVsZFxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXJyb3JNZXNzYWdlXG4gICAqL1xuICAjYWRkRXJyb3JNZXNzYWdlVG9Gb3JtRmllbGQoZm9ybUZpZWxkLCBlcnJvck1lc3NhZ2UpIHtcbiAgICB0aGlzLiNyZW1vdmVFcnJvck1lc3NhZ2VGcm9tRm9ybUZpZWxkKGZvcm1GaWVsZCk7XG5cbiAgICBmb3JtRmllbGQuY2xhc3NMaXN0LmFkZChcImlzLWludmFsaWRcIik7XG5cbiAgICBmb3JtRmllbGRcbiAgICAgIC5jbG9zZXN0KFwiZGl2Om5vdCguaW5wdXQtZ3JvdXApOm5vdCguYnRuLWdyb3VwKVwiKVxuICAgICAgLmluc2VydEFkamFjZW50SFRNTChcImJlZm9yZWVuZFwiLCBgPGRpdiBjbGFzcz1cImludmFsaWQtZmVlZGJhY2tcIj4ke2Vycm9yTWVzc2FnZX08L2Rpdj5gKTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge0hUTUxGb3JtRWxlbWVudH0gZm9ybUVsZW1lbnRcbiAgICovXG4gICNmb2N1c1RhYldpdGhGaXJzdEVycm9yTWVzc2FnZShmb3JtRWxlbWVudCkge1xuICAgIGlmICghZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5uYXYtdGFic1wiKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGZpcnN0RWxlbVdpdGhFcnJvciA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaXMtaW52YWxpZFwiKTtcblxuICAgIGlmICghZmlyc3RFbGVtV2l0aEVycm9yKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdGFiSWQgPSBmaXJzdEVsZW1XaXRoRXJyb3IuY2xvc2VzdChcIi50YWItcGFuZVwiKS5nZXRBdHRyaWJ1dGUoXCJpZFwiKTtcblxuICAgIGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5uYXYtdGFicyBhW2hyZWY9XCIjJyArIHRhYklkICsgJ1wiXScpLmNsaWNrKCk7XG5cbiAgICBmaXJzdEVsZW1XaXRoRXJyb3IuZm9jdXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge0hUTUxGb3JtRWxlbWVudH0gZm9ybUVsZW1lbnRcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBpc1ZhbGlkKGZvcm1FbGVtZW50KSB7XG4gICAgcmV0dXJuICEhZm9ybUVsZW1lbnQuZm9ybVZhbGlkYXRvcj8uaXNWYWxpZDtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge0hUTUxGb3JtRWxlbWVudH0gZm9ybUVsZW1lbnRcbiAgICovXG4gIHNldEZvcm1Bc1ZhbGlkKGZvcm1FbGVtZW50KSB7XG4gICAgZm9ybUVsZW1lbnQuZm9ybVZhbGlkYXRvciA9IHtcbiAgICAgIGlzVmFsaWQ6IHRydWUsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0YXJnZXRFbGVtZW50XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlcnJvck1lc3NhZ2VzSHRtbFxuICAgKi9cbiAgaGFuZGxlRm9ybUVycm9yTWVzc2FnZXModGFyZ2V0RWxlbWVudCwgZXJyb3JNZXNzYWdlc0h0bWwpIHtcbiAgICBpZiAoISh0YXJnZXRFbGVtZW50IGluc3RhbmNlb2YgSFRNTEZvcm1FbGVtZW50KSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG1vZGFsQm9keSA9IHRhcmdldEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbC1ib2R5XCIpO1xuXG4gICAgLy8gUmVtb3ZlIHRoZSBvbGQgLSBwb3NzaWJsZSBleGlzdGluZyAtIGVycm9yLWJveFxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZXJyb3ItYm94XCIpPy5yZW1vdmUoKTtcblxuICAgIC8vIFBsYWNlIHRoZSBlcnJvciBtZXNzYWdlcyBpbnNpZGUgdGhlIG1vZGFsIGJvZHkgZm9yIGEgYmV0dGVyIHN0eWxpbmdcbiAgICBpZiAobW9kYWxCb2R5KSB7XG4gICAgICBtb2RhbEJvZHkuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYWZ0ZXJiZWdpblwiLCBlcnJvck1lc3NhZ2VzSHRtbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRhcmdldEVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYWZ0ZXJiZWdpblwiLCBlcnJvck1lc3NhZ2VzSHRtbCk7XG4gICAgfVxuXG4gICAgdGhpcy4jcHJldHR5UHJpbnRSZXNwb25zZUVycm9yTWVzc2FnZXModGFyZ2V0RWxlbWVudCwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlcnJvci1ib3hcIikpO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7SFRNTEZvcm1FbGVtZW50fSBmb3JtRWxlbWVudFxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlcnJvckJveFxuICAgKi9cbiAgI3ByZXR0eVByaW50UmVzcG9uc2VFcnJvck1lc3NhZ2VzKGZvcm1FbGVtZW50LCBlcnJvckJveCkge1xuICAgIHRoaXMuI3JlbW92ZUFsbFByZXZpb3VzRXJyb3JzKGZvcm1FbGVtZW50KTtcblxuICAgIC8vIGhpZ2hsaWdodCBhbGwgaW5wdXQgZmllbGRzIHdoZXJlIHRoZSB2YWxpZGF0aW9uIGhhcyBmYWlsZWRcbiAgICBlcnJvckJveC5xdWVyeVNlbGVjdG9yQWxsKFwibGlcIikuZm9yRWFjaCgoZXJyb3JNZXNzYWdlTGluZSkgPT4ge1xuICAgICAgbGV0IGVycm9yQ2xhc3MgPSBlcnJvck1lc3NhZ2VMaW5lLmRhdGFzZXQuZWxlbWVudDtcblxuICAgICAgaWYgKGVycm9yQ2xhc3MubGVuZ3RoID4gMCkge1xuICAgICAgICBsZXQgZWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGVycm9yQ2xhc3MpIHx8IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tpZHw9XCInICsgZXJyb3JDbGFzcyArICdcIl0nKTtcblxuICAgICAgICBpZiAoZWxlbSkge1xuICAgICAgICAgIC8vIE1vdmUgdGhlIGVycm9yIG1lc3NhZ2UgdG8gdGhlIHJlc3BvbnNpYmxlIGlucHV0IGZpZWxkKHMpXG4gICAgICAgICAgLy8gYW5kIHJlbW92ZSB0aGUgbGlzdCBpdGVtIGZyb20gdGhlIGVycm9yIGJveCBjb250YWluZXJcbiAgICAgICAgICB0aGlzLiNhZGRFcnJvck1lc3NhZ2VUb0Zvcm1GaWVsZChlbGVtWzBdLCBlcnJvck1lc3NhZ2VMaW5lLmlubmVySFRNTCk7XG4gICAgICAgICAgZXJyb3JNZXNzYWdlTGluZS5yZW1vdmUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgLy8gaWYgYWxsIGxpc3QgaXRlbXMgaGF2ZSBiZWVuIHJlbW92ZWQsIHJlbW92ZSB0aGUgZXJyb3IgYm94IGNvbnRhaW5lciB0b29cbiAgICBpZiAoZXJyb3JCb3gucXVlcnlTZWxlY3RvckFsbChcImxpXCIpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZXJyb3JCb3gucmVtb3ZlKCk7XG4gICAgfVxuXG4gICAgdGhpcy4jZm9jdXNUYWJXaXRoRmlyc3RFcnJvck1lc3NhZ2UoZm9ybUVsZW1lbnQpO1xuICAgIHRoaXMuI3Njcm9sbFRvRmlyc3RGb3JtRXJyb3IoZm9ybUVsZW1lbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7SFRNTEZvcm1FbGVtZW50fSBmb3JtRWxlbWVudFxuICAgKi9cbiAgI3Njcm9sbFRvRmlyc3RGb3JtRXJyb3IoZm9ybUVsZW1lbnQpIHtcbiAgICBpZiAoZm9ybUVsZW1lbnQuY2xvc2VzdChcIi5tb2RhbFwiKT8ubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGZvcm1FcnJvcnMgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmlzLWludmFsaWRcIik7XG5cbiAgICBpZiAoIWZvcm1FcnJvcnMgfHwgZm9ybUVycm9ycy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy4jaXNFbGVtZW50SW5WaWV3cG9ydChmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmludmFsaWQtZmVlZGJhY2tcIikpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IG9mZnNldFRvcCA9IGZvcm1FcnJvcnMuaXRlbSgwKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7XG5cbiAgICBpZiAodGhpcy4jc2V0dGluZ3Muc2Nyb2xsT2Zmc2V0RWxlbWVudCkge1xuICAgICAgY29uc3Qgc2Nyb2xsT2Zmc2V0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy4jc2V0dGluZ3Muc2Nyb2xsT2Zmc2V0RWxlbWVudCk7XG5cbiAgICAgIGlmIChzY3JvbGxPZmZzZXRFbGVtZW50KSB7XG4gICAgICAgIG9mZnNldFRvcCAtPSBzY3JvbGxPZmZzZXRFbGVtZW50LmNsaWVudEhlaWdodDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB3aW5kb3cuc2Nyb2xsVG8oeyB0b3A6IG9mZnNldFRvcCwgYmVoYXZpb3I6IFwic21vb3RoXCIgfSk7XG4gIH1cblxuICAjaXNFbGVtZW50SW5WaWV3cG9ydChlbGVtZW50KSB7XG4gICAgY29uc3Qgc2Nyb2xsT2Zmc2V0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy4jc2V0dGluZ3Muc2Nyb2xsT2Zmc2V0RWxlbWVudCk7XG4gICAgbGV0IG9mZnNldFRvcCA9IDA7XG5cbiAgICBpZiAoc2Nyb2xsT2Zmc2V0RWxlbWVudCkge1xuICAgICAgb2Zmc2V0VG9wID0gc2Nyb2xsT2Zmc2V0RWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gICAgfVxuXG4gICAgY29uc3QgcmVjdCA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICByZXR1cm4gKFxuICAgICAgcmVjdC50b3AgPj0gb2Zmc2V0VG9wICYmXG4gICAgICByZWN0LmxlZnQgPj0gMCAmJlxuICAgICAgcmVjdC5ib3R0b20gPD0gKHdpbmRvdy5pbm5lckhlaWdodCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50SGVpZ2h0KSAmJlxuICAgICAgcmVjdC5yaWdodCA8PSAod2luZG93LmlubmVyV2lkdGggfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoKVxuICAgICk7XG4gIH1cbn1cbiIsIi8qXG4gKiBDb3B5cmlnaHQgKGMpIGJ5IHRoZSBBQ1AzIERldmVsb3BlcnMuXG4gKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBhdCB0aGUgdG9wLWxldmVsIG1vZHVsZSBkaXJlY3RvcnkgZm9yIGxpY2VuY2luZyBkZXRhaWxzLlxuICovXG5cbmltcG9ydCB7IEFqYXhGb3JtIH0gZnJvbSBcIi4uL2xpYi9hamF4LWZvcm1cIjtcbmltcG9ydCB7IExvYWRpbmdJbmRpY2F0b3IgfSBmcm9tIFwiLi4vbGliL2xvYWRpbmctaW5kaWNhdG9yXCI7XG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4uL2xpYi9mb3JtLXZhbGlkYXRvclwiO1xuXG4oKCkgPT4ge1xuICBuZXcgQWpheEZvcm0obmV3IExvYWRpbmdJbmRpY2F0b3IoKSwgbmV3IEZvcm1WYWxpZGF0b3IoKSk7XG59KSgpO1xuIl19","file":"ajax-form.min.js"}
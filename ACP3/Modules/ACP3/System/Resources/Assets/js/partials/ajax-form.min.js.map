{"version":3,"sources":["ACP3/Modules/ACP3/System/Resources/Assets/js/partials/node_modules/browser-pack-flat/_prelude","ACP3/Modules/ACP3/System/Resources/Assets/js/partials/ACP3/Modules/ACP3/System/Resources/Assets/js/lib/utils.js","ACP3/Modules/ACP3/System/Resources/Assets/js/partials/ACP3/Modules/ACP3/System/Resources/Assets/js/lib/event-handler.js","ACP3/Modules/ACP3/System/Resources/Assets/js/partials/ACP3/Modules/ACP3/System/Resources/Assets/js/lib/ajax-form.js","ACP3/Modules/ACP3/System/Resources/Assets/js/partials/ACP3/Modules/ACP3/System/Resources/Assets/js/lib/loading-indicator.js","ACP3/Modules/ACP3/System/Resources/Assets/js/partials/ACP3/Modules/ACP3/System/Resources/Assets/js/lib/form-validator.js","ACP3/Modules/ACP3/System/Resources/Assets/js/partials/ACP3/Modules/ACP3/System/Resources/Assets/js/partials/ajax-form.js"],"names":["_$utils_5","defaultSettings","constructorOptions","dataAttributeOptions","mergedSettings","key","value","Object","entries","keyStripped","string","replace","charAt","toLowerCase","slice","length","JSON","parse","_unused","element","eventName","selectorOrTargetElement","handler","addEventListener","event","elems","document","querySelectorAll","forEach","elem","contains","target","_classPrivateFieldLooseBase","receiver","privateKey","prototype","hasOwnProperty","call","TypeError","id","_classPrivateFieldLooseKey","name","_loadingIndicator","_formValidator","_defaults","_init","_registerClickedSubmitButton","_prepareFormData","_handleResponseError","_handleSuccessfulResponse","_disableSubmitButton","_enableSubmitButton","_decodeResponse","_redirectToNewPage","_scrollIntoView","_replaceContent","_init2","this","_$eventHandler_2","delegateEvent","async","preventDefault","performAjaxRequest","setFormAsValid","dispatchEvent","CustomEvent","detail","isValid","preValidateForm","checkFormElementsForErrors","_registerClickedSubmitButton2","submitElem","closest","dataset","clicked","_prepareFormData2","formElement","submitButton","initialData","customFormData","data","getAttribute","FormData","append","_handleResponseError2","response","targetElement","responseData","clone","text","status","handleFormErrorMessages","open","write","close","_handleSuccessfulResponse2","hash","window","completeCallback","redirect_url","location","_disableSubmitButton2","disabled","_enableSubmitButton2","_decodeResponse2","json","error","_redirectToNewPage2","href","reload","_scrollIntoView2","setTimeout","querySelector","concat","scrollTo","top","getBoundingClientRect","y","behavior","offsetTop","scrollTop","_replaceContent2","doc","DOMParser","parseFromString","innerHTML","_$ajaxForm_1","AjaxForm","[object Object]","loadingIndicator","formValidator","defineProperty","writable","loadingOverlay","method","mergeSettings","_submitButton","HTMLFormElement","hashChange","addLoadingIndicator","showLoadingIndicator","_ref","_targetElement$getAtt","_targetElement$getAtt2","_mergedSettings$metho","toUpperCase","fetch","body","headers","X-Requested-With","ok","console","hideLoadingIndicator","show","_targetElement$queryS","classList","toggle","_$loadingIndicator_4","LoadingIndicator","_toggleLoadingIndicator","_toggleLoadingIndicator2","loadingIndicatorHtml","svgIcons","loadingIndicatorIcon","insertAdjacentHTML","___classPrivateFieldLooseBase_4","___classPrivateFieldLooseBase_3","__id_3","___classPrivateFieldLooseKey_3","___defaults_3","_settings","_removeAllPreviousErrors","_removeErrorMessageFromFormField","_addErrorMessageToFormField","_focusTabWithFirstErrorMessage","_prettyPrintResponseErrorMessages","_scrollToFirstFormError","_isElementInViewport","_removeAllPreviousErrors2","invalidFormField","remove","_removeErrorMessageFromFormField2","formField","_formField$closest","_formField$closest$qu","_addErrorMessageToFormField2","errorMessage","add","_focusTabWithFirstErrorMessage2","firstElemWithError","tabId","click","focus","_prettyPrintResponseErrorMessages2","errorBox","errorMessageLine","errorClass","getElementById","_scrollToFirstFormError2","_formElement$closest","formErrors","item","scrollOffsetElement","clientHeight","_isElementInViewport2","rect","left","bottom","innerHeight","documentElement","right","innerWidth","clientWidth","_$formValidator_3","FormValidator","options","field","elements","nodeName","checkValidity","validationMessage","_formElement$formVali","errorMessagesHtml","_document$getElementB","modalBody"],"mappings":"CAAA,WACA,IAAAA,EAAA,oECIO,SAAuBC,EAAiBC,EAAoBC,GACjE,MAAMC,EAAiB,IAAKH,KAAoBC,GAEhD,IAAKC,EACH,OAAOC,EAGT,IAAK,IAAKC,EAAKC,KAAUC,OAAOC,QAAQL,GAAuB,CAC7D,MAAMM,GAcoBC,EAdeL,EAAIM,QAAQ,WAAY,KAerDC,OAAO,GAAGC,cAAgBH,EAAOI,MAAM,GAbnD,GAAIL,EAAYM,OAAS,QAAA,IAAYX,EAAeK,GAClD,IACEL,EAAeK,GAAeO,KAAKC,MAAMX,GACzC,MAAAY,GACAd,EAAeK,GAAeH,GAQtC,IAA8BI,EAH5B,OAAON,6ECZF,SAAuBe,EAASC,EAAWC,EAAyBC,GACzEH,EAAQI,iBAAiBH,EAAYI,IACnC,GAAuC,iBAA5BH,EAAsC,CAC/C,MAAMI,EAAQC,SAASC,iBAAiBN,GAExC,IAAKI,EACH,OAGFA,EAAMG,QAASC,IACTA,GAAQA,EAAKC,SAASN,EAAMO,SAC9BT,EAAQE,EAAOK,UAGVR,GAA2BA,EAAwBS,SAASN,EAAMO,SAC3ET,EAAQE,EAAOH,eCrBrB,SAAAW,EAAAC,EAAAC,GAAA,IAAA3B,OAAA4B,UAAAC,eAAAC,KAAAJ,EAAAC,GAAA,MAAA,IAAAI,UAAA,kDAAA,OAAAL,qEAAA,IAAAM,EAAA,EAAA,SAAAC,EAAAC,GAAA,MAAA,aAAAF,IAAA,IAAAE,EAAA,IAAAC,EAAAF,EAAA,oBAAAG,EAAAH,EAAA,iBAAAI,EAAAJ,EAAA,YAAAK,EAAAL,EAAA,QAAAM,EAAAN,EAAA,+BAAAO,EAAAP,EAAA,mBAAAQ,EAAAR,EAAA,uBAAAS,EAAAT,EAAA,4BAAAU,EAAAV,EAAA,uBAAAW,EAAAX,EAAA,sBAAAY,EAAAZ,EAAA,kBAAAa,EAAAb,EAAA,qBAAAc,EAAAd,EAAA,kBAAAe,EAAAf,EAAA,kBAAA,SAAAgB,IA0BIxB,EAAAyB,KAAAX,GAAAA,MAAA,EAEAY,EAAAC,eAAcjC,SAAU,QAAS,2BAA4BkC,MAAOpC,EAAOK,KACzEL,EAAMqC,uBAEAJ,KAAKK,mBAAmBjC,MAAA,EAGhC6B,EAAAC,eAAcjC,SAAU,SAAU,8BAA+BkC,MAAOpC,EAAOK,KAC7EL,EAAMqC,iBAEN7B,EAAAyB,KAAAd,GAAAA,GAAoBoB,eAAelC,GAEnCH,SAASsC,cAAc,IAAIC,YAAY,8BAA+B,CAAEC,OAAQT,QAE5EzB,EAAAyB,KAAAd,GAAAA,GAAoBwB,QAAQtC,IAASG,EAAAyB,KAAAd,GAAAA,GAAoByB,gBAAgBvC,UACrE4B,KAAKK,mBAAmBjC,MAAA,EAIlC6B,EAAAC,eAAcjC,SAAU,SAAU,8BAA+BkC,MAAOpC,EAAOK,MAAA,IACzEG,EAAAyB,KAAAd,GAAAA,GAAoBwB,QAAQtC,IAC9BG,EAAAyB,KAAAd,GAAAA,GAAoB0B,2BAA2BxC,KAAA,SAAAyC,KAAA,EAMnDZ,EAAAC,eAAcjC,SAAU,QAAS,8CAA+C,CAACF,EAAO+C,KACtFA,EACGC,QAAQ,QACR7C,iBAAiB,iBACjBC,QAASC,WACDA,EAAK4C,QAALC,UAEXH,EAAWE,QAAQC,QAAU,SAAA,SAAAC,EA4DhBC,EAAaC,EAAczE,GAC1C,MAAM0E,EAAc1E,EAAe2E,gBAAkB,GACrD,IAAIC,EAEAJ,EAAYK,aAAa,WAC3BD,EAAO,IAAIE,SAASN,GAEhBC,GACFG,EAAKG,OAAON,EAAaI,aAAa,QAAS,MAGjDD,EAAO,IAAIE,SAGb,IAAK,IAAK7E,EAAKC,KAAUC,OAAOC,QAAQsE,GACtCE,EAAKG,OAAO9E,EAAKC,GAGnB,OAAO0E,EAAApB,eAAAwB,EASkBC,EAAUC,GACnC,MAAMC,QAAqBF,EAASG,QAAQC,OAEpB,MAApBJ,EAASK,QACX1D,EAAAyB,KAAAd,GAAAA,GAAoBgD,wBAAwBL,EAAeC,GAE3D7D,SAASsC,cAAc,IAAIC,YAAY,4BAA6B,CAAEC,OAAQT,SACrE8B,EAAaxE,OAAS,IAC/BW,SAASkE,OACTlE,SAASmE,MAAMN,GACf7D,SAASoE,SAAAlC,eAAAmC,EAWmBV,EAAUW,EAAM5F,GAC9C,MAAMmF,QAAevD,EAAMyB,KAANL,GAAAA,GAA2BiC,GAEO,mBAA5CY,OAAO7F,EAAe8F,kBAC/BD,OAAO7F,EAAe8F,kBAAkBX,GAC/BA,EAAaY,aACtBnE,EAAAyB,KAAAJ,GAAAA,GAAwB2C,EAAMT,IAE9BvD,EAAAyB,KAAAF,GAAAA,GAAqByC,EAAMT,EAAcnF,GACzC4B,EAAAyB,KAAAH,GAAAA,GAAqB0C,EAAM5F,QAAA,IAEvB4F,IACFC,OAAOG,SAASJ,KAAOA,GAGzBtE,SAASsC,cAAc,IAAIC,YAAY,4BAAA,SAAAoC,EAQtBxB,GACfA,IACFA,EAAayB,UAAA,GAAW,SAAAC,EAQR1B,GACdA,IACFA,EAAayB,UAAA,GAAW1C,eAAA4C,EASNnB,GACpB,IACE,aAAaA,EAASG,QAAQiB,OAC9B,MAAOC,GACP,aAAarB,EAASG,QAAQC,QAAA,SAAAkB,EAIfX,EAAMT,QAAA,IACnBS,GACFC,OAAOG,SAASQ,KAAOrB,EAAaY,aAAeH,EACnDC,OAAOG,SAASS,UAEhBZ,OAAOG,SAASQ,KAAOrB,EAAaY,aAAA,SAAAW,EAIxBd,EAAM5F,GACpB2G,WAAW,KACT,GAAIf,EAAM,CACR,MAAMV,EAAgB5D,SAASsF,cAAT,sBAAAC,OAA6CjB,EAA7C,OAEtBC,OAAOiB,SAAS,CAAEC,IAAK7B,EAAc8B,wBAAwBC,EAAGC,SAAU,eACrE,CACL,MACMC,EADgB7F,SAASsF,cAAc5G,EAAekF,eAC5B8B,wBAAwBC,EAEpD3F,SAAS8F,UAAYD,GACvBtB,OAAOiB,SAAS,CAAEC,IAAKI,EAAWD,SAAU,cAAA,SAAAG,EAMpCzB,EAAMT,EAAcnF,GAClC,GAAI4F,GAAQtE,SAASsF,cAAchB,GAAO,CACxC,MACM0B,GAAA,IADaC,WACAC,gBAAgBrC,EAAc,aAEjD7D,SAASsF,cAAchB,GAAM6B,UAAYH,EAAIV,cAAchB,GAAM6B,eAEjEnG,SAASsF,cAAc5G,EAAekF,eAAeuC,UAAYtC,EAAAuC,EAAAC,SA5PhE,MAgBLC,YAAYC,EAAkBC,GAAe3H,OAAA4H,eAAA1E,KAAAF,EAAA,CAAAjD,MAAAmH,IAAAlH,OAAA4H,eAAA1E,KAAAH,EAAA,CAAAhD,MAAAwG,IAAAvG,OAAA4H,eAAA1E,KAAAJ,EAAA,CAAA/C,MAAAqG,IAAApG,OAAA4H,eAAA1E,KAAAL,EAAA,CAAA9C,MAAAkG,IAAAjG,OAAA4H,eAAA1E,KAAAN,EAAA,CAAA7C,MAAAiG,IAAAhG,OAAA4H,eAAA1E,KAAAP,EAAA,CAAA5C,MAAA+F,IAAA9F,OAAA4H,eAAA1E,KAAAR,EAAA,CAAA3C,MAAAyF,IAAAxF,OAAA4H,eAAA1E,KAAAT,EAAA,CAAA1C,MAAA8E,IAAA7E,OAAA4H,eAAA1E,KAAAV,EAAA,CAAAzC,MAAAqE,IAAApE,OAAA4H,eAAA1E,KAAAX,EAAA,CAAAxC,MAAAgE,IAAA/D,OAAA4H,eAAA1E,KAAAZ,EAAA,CAAAvC,MAAAkD,IAAAjD,OAAA4H,eAAA1E,KAAAf,EAAA,CAAA0F,UAAA,EAAA9H,WAAA,IAAAC,OAAA4H,eAAA1E,KAAAd,EAAA,CAAAyF,UAAA,EAAA9H,WAAA,IAAAC,OAAA4H,eAAA1E,KAAAb,EAAA,CAAAwF,UAAA,EAAA9H,MAbjC,CACV4F,iBAAkB,KAClBZ,cAAe,WACf+C,gBAAA,EACAtD,eAAgB,KAChBuD,OAAQ,QASRtG,EAAAyB,KAAAf,GAAAA,GAAyBuF,EACzBjG,EAAAyB,KAAAd,GAAAA,GAAsBuF,EAEtBlG,EAAAyB,KAAAZ,GAAAA,KAgDsBmF,yBAAC1C,GACvB,MAAMlF,GAAA,EAAiBJ,EAAAuI,eAAAvG,EAAcyB,KAAdb,GAAAA,GAA8B,GAAI0C,EAAcb,SACvE,IAAIuB,EAAMnB,EAEoC,IAAA2D,EAG5CxC,EAHEV,aAAyBmD,gBAGvB,QAAAD,EAFJ3D,EAAeS,EAAc0B,cAAc,+CAAA,IAEvCwB,OAAA,EAAGA,EAAc/D,QAAQiE,WAEtBpD,EAAcb,QAAQiE,WAG3BtI,EAAeiI,iBACjBrG,EAAAyB,KAAAf,GAAAA,GAAuBiG,oBAAoB9D,GAAgBS,GAC3DtD,EAAAyB,KAAAf,GAAAA,GAAuBkG,qBAAqB/D,GAAgBS,IAG9DtD,EAAAyB,KAAAP,GAAAA,GAA0B2B,GAE1B,IAAI,IAAAgE,EAAAC,EAAAC,EAAAC,EACF,MAAMV,EAAM,QAAAO,EAAA,QAAAC,EAAA,QAAAC,EACVzD,EAAcL,aAAa,iBAAA,IADjB8D,OAAA,EACVA,EAAsCE,qBAAA,IAD5BH,EAAAA,EAAA,QAAAE,EAC6C5I,EAAekI,cAAA,IAD5DU,OAAA,EAC6CA,EAAuBC,qBAAA,IADpEJ,EAAAA,EACqF,MAE3FxD,QAAiB6D,MAAM5D,EAAcL,aAAa,WAAaK,EAAcL,aAAa,QAAS,CACvGqD,OAAQA,EACRa,KAAiB,QAAXb,EAAAtG,EAAmByB,KAAnBV,GAAAA,GAAyCuC,EAAeT,EAAczE,GAAkB,KAC9FgJ,QAAS,CACPC,mBAAoB,oBAInBhE,EAASiE,SAGZtH,EAAMyB,KAANR,GAAAA,GAAqCoC,EAAUW,EAAM5F,SAFrD4B,EAAMyB,KAANT,GAAAA,GAAgCqC,EAAUC,GAI5C,MAAOoB,GACP6C,QAAQ7C,MAAMA,GAlBhB,QAoBE1E,EAAAyB,KAAAf,GAAAA,GAAuB8G,qBAAqB3E,GAAgBS,GAC5DtD,EAAAyB,KAAAN,GAAAA,GAAyB0B,8SCxELS,EAAemE,GAAM,IAAAC,EAC3C,QAAAA,EAAApE,EAAc0B,cAAc,6BAAA,IAA5B0C,GAAAA,EAAmDC,UAAUC,OAAO,4BAA6BH,GAAAI,EAAAC,iBAxC9F,MAAuB9B,cAAAzH,OAAA4H,eAAA1E,KAAAsG,EAAA,CAAAzJ,MAAA0J,IAK5BhC,oBAAoB1C,GAClB,IAAKA,EAAc0B,cAAc,sBAAuB,CACtD,MAAMmC,EAAOzH,SAASsF,cAAc,QAE9BiD,EACJ,iHAFiBjJ,KAAKC,MAAMkI,EAAK1E,QAAQyF,UAG/BC,qBACV,iBAEF7E,EAAc8E,mBAAmB,aAAcH,IAQnDjC,qBAAqB1C,GACnB+E,EAAA5G,KAAAsG,GAAAA,GAA6BzE,GAAA,GAO/B0C,qBAAqB1C,GACnB+E,EAAA5G,KAAAsG,GAAAA,GAA6BzE,GAAA,cC/BjC,SAAAgF,EAAArI,EAAAC,GAAA,IAAA3B,OAAA4B,UAAAC,eAAAC,KAAAJ,EAAAC,GAAA,MAAA,IAAAI,UAAA,kDAAA,OAAAL,0EAAA,IAAAsI,EAAA,EAAA,SAAAC,EAAA/H,GAAA,MAAA,aAAA8H,IAAA,IAAA9H,EAAA,IAAAgI,EAAAD,EAAA,YAAAE,EAAAF,EAAA,YAAAG,EAAAH,EAAA,2BAAAI,EAAAJ,EAAA,mCAAAK,EAAAL,EAAA,8BAAAM,EAAAN,EAAA,iCAAAO,EAAAP,EAAA,oCAAAQ,EAAAR,EAAA,0BAAAS,EAAAT,EAAA,uBAAA,SAAAU,EAgD2BtG,GACvBA,EAAYjD,iBAAiB,eAAeC,QAASuJ,IACnDA,EAAiBxB,UAAUyB,OAAO,gBAAA,SAAAC,EAQLC,GAAW,IAAAC,EAAAC,EAC1C,QAAAD,EAAAD,EAAU9G,QAAQ,cAAA,IAAlB+G,GAAA,QAAAC,EAAAD,EAA0BvE,cAAc,4BAAA,IAAxCwE,GAAAA,EAA8DJ,SAAA,SAAAK,EAQpCH,EAAWI,GACrCpB,EAAA7G,KAAAmH,GAAAA,GAAsCU,GAEtCA,EAAU3B,UAAUgC,IAAI,cAExBL,EACG9G,QAAQ,yCACR4F,mBAAmB,YAFtB,iCAAAnD,OAEoEyE,EAFpE,WAAA,SAAAE,EAS6BhH,GAC7B,IAAKA,EAAYoC,cAAc,aAC7B,OAGF,MAAM6E,EAAqBjH,EAAYoC,cAAc,eAErD,IAAK6E,EACH,OAGF,MAAMC,EAAQD,EAAmBrH,QAAQ,aAAaS,aAAa,MAEnEL,EAAYoC,cAAc,sBAAwB8E,EAAQ,MAAMC,QAEhEF,EAAmBG,QAAA,SAAAC,EAoDarH,EAAasH,GAC7C5B,EAAA7G,KAAAkH,GAAAA,GAA8B/F,GAG9BsH,EAASvK,iBAAiB,MAAMC,QAASuK,IACvC,IAAIC,EAAaD,EAAiB1H,QAAQtD,QAE1C,GAAIiL,EAAWrL,OAAS,EAAG,CACzB,IAAIc,EAAOH,SAAS2K,eAAeD,IAAexH,EAAYoC,cAAc,SAAWoF,EAAa,MAEhGvK,IAGFyI,EAAA7G,KAAAoH,GAAAA,GAAiChJ,EAAK,GAAIsK,EAAiBtE,WAC3DsE,EAAiBf,aAMwB,IAA3Cc,EAASvK,iBAAiB,MAAMZ,QAClCmL,EAASd,SAGXd,EAAA7G,KAAAqH,GAAAA,GAAoClG,GACpC0F,EAAA7G,KAAAuH,GAAAA,GAA6BpG,GAAA,SAAA0H,GAMP1H,GAAa,IAAA2H,EACnC,IAAI,QAAAA,EAAA3H,EAAYJ,QAAQ,iBAAA,IAApB+H,OAAA,EAAAA,EAA+BxL,QAAS,EAC1C,OAGF,MAAMyL,EAAa5H,EAAYjD,iBAAiB,eAEhD,IAAK6K,GAAoC,IAAtBA,EAAWzL,OAC5B,OAGF,GAAAuJ,EAAI7G,KAAJwH,GAAAA,GAA8BrG,EAAYoC,cAAc,sBACtD,OAGF,IAAIO,EAAYiF,EAAWC,KAAK,GAAGrF,wBAAwBD,IAE3D,GAAImD,EAAA7G,KAAAiH,GAAAA,GAAegC,oBAAqB,CACtC,MAAMA,EAAsBhL,SAASsF,cAAcsD,EAAA7G,KAAAiH,GAAAA,GAAegC,qBAE9DA,IACFnF,GAAamF,EAAoBC,cAIrC1G,OAAOiB,SAAS,CAAEC,IAAKI,EAAWD,SAAU,WAAA,SAAAsF,GAGzBzL,GACnB,MAAMuL,EAAsBhL,SAASsF,cAAcsD,EAAA7G,KAAAiH,GAAAA,GAAegC,qBAClE,IAAInF,EAAY,EAEZmF,IACFnF,EAAYmF,EAAoBC,cAGlC,MAAME,EAAO1L,EAAQiG,wBAErB,OACEyF,EAAK1F,KAAOI,GACZsF,EAAKC,MAAQ,GACbD,EAAKE,SAAW9G,OAAO+G,aAAetL,SAASuL,gBAAgBN,eAC/DE,EAAKK,QAAUjH,OAAOkH,YAAczL,SAASuL,gBAAgBG,aAAAC,EAAAC,cA3N5D,MAMLtF,YAAYuF,EAAU,IAAIhN,OAAA4H,eAAA1E,KAAAwH,EAAA,CAAA3K,MAAAsM,KAAArM,OAAA4H,eAAA1E,KAAAuH,EAAA,CAAA1K,MAAAgM,KAAA/L,OAAA4H,eAAA1E,KAAAsH,EAAA,CAAAzK,MAAA2L,IAAA1L,OAAA4H,eAAA1E,KAAAqH,EAAA,CAAAxK,MAAAsL,IAAArL,OAAA4H,eAAA1E,KAAAoH,EAAA,CAAAvK,MAAAmL,IAAAlL,OAAA4H,eAAA1E,KAAAmH,EAAA,CAAAtK,MAAA+K,IAAA9K,OAAA4H,eAAA1E,KAAAkH,EAAA,CAAArK,MAAA4K,IAAA3K,OAAA4H,eAAA1E,KAAAgH,EAAA,CAAArC,UAAA,EAAA9H,MALd,CACVoM,oBAAqB,QAIGnM,OAAA4H,eAAA1E,KAAAiH,EAAA,CAAAtC,UAAA,EAAA9H,WAAA,IACxBgK,EAAA7G,KAAAiH,GAAAA,IAAA,EAAiB1K,EAAAuI,eAAA+B,EAAc7G,KAAdgH,GAAAA,GAA8B8C,EAAS,IAQ1DvF,gBAAgBpD,GAKd,OAJAnB,KAAKY,2BAA2BO,GAChC0F,EAAA7G,KAAAqH,GAAAA,GAAoClG,GACpC0F,EAAA7G,KAAAuH,GAAAA,GAA6BpG,GAEtBnB,KAAKU,QAAQS,GAOtBoD,2BAA2BpD,GACzB0F,EAAA7G,KAAAkH,GAAAA,GAA8B/F,GAE9B,IAAK,MAAM4I,KAAS5I,EAAY6I,SACP,UAAnBD,EAAME,UAA2C,aAAnBF,EAAME,UAA8C,WAAnBF,EAAME,UAIpEF,EAAMG,kBACTrD,EAAA7G,KAAAoH,GAAAA,GAAiC2C,EAAOA,EAAMI,mBAE9ChJ,EAAYsD,cAAc/D,SAAA,GAgEhC6D,QAAQpD,GAAa,IAAAiJ,EACnB,QAAQ,QAAAA,EAACjJ,EAAYsD,qBAAA,IAAb2F,IAACA,EAA2B1J,SAOtC6D,eAAepD,GACbA,EAAYsD,cAAgB,CAC1B/D,SAAA,GASJ6D,wBAAwB1C,EAAewI,GAAmB,IAAAC,EACxD,KAAMzI,aAAyBmD,iBAC7B,OAGF,MAAMuF,EAAY1I,EAAc0B,cAAc,eAG9C,QAAA+G,EAAArM,SAAS2K,eAAe,oBAAA,IAAxB0B,GAAAA,EAAsC3C,SAGlC4C,EACFA,EAAU5D,mBAAmB,aAAc0D,GAE3CxI,EAAc8E,mBAAmB,aAAc0D,GAGjDxD,EAAA7G,KAAAsH,GAAAA,GAAuCzF,EAAe5D,SAAS2K,eAAe,gBCvIhF,IAAIvE,EAAAC,SAAS,IAAI8B,EAAAC,iBAAoB,IAAIuD,EAAAC,eNV3C","sourcesContent":["(function(){\n","/*\n * Copyright (c) by the ACP3 Developers.\n * See the LICENSE file at the top-level module directory for licensing details.\n */\n\nexport function mergeSettings(defaultSettings, constructorOptions, dataAttributeOptions) {\n  const mergedSettings = { ...defaultSettings, ...constructorOptions };\n\n  if (!dataAttributeOptions) {\n    return mergedSettings;\n  }\n\n  for (let [key, value] of Object.entries(dataAttributeOptions)) {\n    const keyStripped = lowerCaseFirstLetter(key.replace(\"ajaxForm\", \"\"));\n\n    if (keyStripped.length > 0 && typeof mergedSettings[keyStripped] !== \"undefined\") {\n      try {\n        mergedSettings[keyStripped] = JSON.parse(value);\n      } catch {\n        mergedSettings[keyStripped] = value;\n      }\n    }\n  }\n\n  return mergedSettings;\n}\n\nfunction lowerCaseFirstLetter(string) {\n  return string.charAt(0).toLowerCase() + string.slice(1);\n}\n","/*\n * Copyright (c) by the ACP3 Developers.\n * See the LICENCE file at the top-level module directory for licencing details.\n */\n\n/**\n *\n * @param {HTMLElement|Document} element\n * @param {string} eventName\n * @param {string|HTMLElement} selectorOrTargetElement\n * @param {function} handler\n */\nexport function delegateEvent(element, eventName, selectorOrTargetElement, handler) {\n  element.addEventListener(eventName, (event) => {\n    if (typeof selectorOrTargetElement === \"string\") {\n      const elems = document.querySelectorAll(selectorOrTargetElement);\n\n      if (!elems) {\n        return;\n      }\n\n      elems.forEach((elem) => {\n        if (elem && elem.contains(event.target)) {\n          handler(event, elem);\n        }\n      });\n    } else if (selectorOrTargetElement && selectorOrTargetElement.contains(event.target)) {\n      handler(event, selectorOrTargetElement);\n    }\n  });\n}\n","/*\n * Copyright (c) by the ACP3 Developers.\n * See the LICENSE file at the top-level module directory for licensing details.\n */\n\nimport { mergeSettings } from \"./utils\";\nimport { delegateEvent } from \"./event-handler\";\n\nexport class AjaxForm {\n  #loadingIndicator;\n  #formValidator;\n  #defaults = {\n    completeCallback: null,\n    targetElement: \"#content\",\n    loadingOverlay: true,\n    customFormData: null,\n    method: null,\n  };\n\n  /**\n   *\n   * @param {LoadingIndicator} loadingIndicator\n   * @param {FormValidator} formValidator\n   */\n  constructor(loadingIndicator, formValidator) {\n    this.#loadingIndicator = loadingIndicator;\n    this.#formValidator = formValidator;\n\n    this.#init();\n  }\n\n  #init() {\n    this.#registerClickedSubmitButton();\n\n    delegateEvent(document, \"click\", 'a[data-ajax-form=\"true\"]', async (event, elem) => {\n      event.preventDefault();\n\n      await this.performAjaxRequest(elem);\n    });\n\n    delegateEvent(document, \"submit\", 'form[data-ajax-form=\"true\"]', async (event, elem) => {\n      event.preventDefault();\n\n      this.#formValidator.setFormAsValid(elem);\n\n      document.dispatchEvent(new CustomEvent(\"acp3.ajaxFrom.submit.before\", { detail: this }));\n\n      if (this.#formValidator.isValid(elem) && this.#formValidator.preValidateForm(elem)) {\n        await this.performAjaxRequest(elem);\n      }\n    });\n\n    delegateEvent(document, \"change\", 'form[data-ajax-form=\"true\"]', async (event, elem) => {\n      if (this.#formValidator.isValid(elem) === false) {\n        this.#formValidator.checkFormElementsForErrors(elem);\n      }\n    });\n  }\n\n  #registerClickedSubmitButton() {\n    delegateEvent(document, \"click\", 'form[data-ajax-form=\"true\"] [type=\"submit\"]', (event, submitElem) => {\n      submitElem\n        .closest(\"form\")\n        .querySelectorAll(\"[type=submit]\")\n        .forEach((elem) => {\n          delete elem.dataset[\"clicked\"];\n        });\n      submitElem.dataset.clicked = \"true\";\n    });\n  }\n\n  /**\n   *\n   * @param {HTMLElement} targetElement\n   * @returns {Promise<void>}\n   */\n  async performAjaxRequest(targetElement) {\n    const mergedSettings = mergeSettings(this.#defaults, {}, targetElement.dataset);\n    let hash, submitButton;\n\n    if (targetElement instanceof HTMLFormElement) {\n      submitButton = targetElement.querySelector('[type=\"submit\"][data-clicked=\"true\"]');\n\n      hash = submitButton?.dataset.hashChange;\n    } else {\n      hash = targetElement.dataset.hashChange;\n    }\n\n    if (mergedSettings.loadingOverlay) {\n      this.#loadingIndicator.addLoadingIndicator(submitButton || targetElement);\n      this.#loadingIndicator.showLoadingIndicator(submitButton || targetElement);\n    }\n\n    this.#disableSubmitButton(submitButton);\n\n    try {\n      const method =\n        targetElement.getAttribute(\"method\")?.toUpperCase() ?? mergedSettings.method?.toUpperCase() ?? \"GET\";\n\n      const response = await fetch(targetElement.getAttribute(\"action\") || targetElement.getAttribute(\"href\"), {\n        method: method,\n        body: method !== \"GET\" ? this.#prepareFormData(targetElement, submitButton, mergedSettings) : null,\n        headers: {\n          \"X-Requested-With\": \"XMLHttpRequest\",\n        },\n      });\n\n      if (!response.ok) {\n        await this.#handleResponseError(response, targetElement);\n      } else {\n        await this.#handleSuccessfulResponse(response, hash, mergedSettings);\n      }\n    } catch (error) {\n      console.error(error);\n    } finally {\n      this.#loadingIndicator.hideLoadingIndicator(submitButton || targetElement);\n      this.#enableSubmitButton(submitButton);\n    }\n  }\n\n  /**\n   *\n   * @param {HTMLFormElement} formElement\n   * @param {HTMLElement} submitButton\n   * @param {Record<string, any>} mergedSettings\n   * @returns {FormData}\n   */\n  #prepareFormData(formElement, submitButton, mergedSettings) {\n    const initialData = mergedSettings.customFormData || {};\n    let data;\n\n    if (formElement.getAttribute(\"method\")) {\n      data = new FormData(formElement);\n\n      if (submitButton) {\n        data.append(submitButton.getAttribute(\"name\"), \"1\");\n      }\n    } else {\n      data = new FormData();\n    }\n\n    for (let [key, value] of Object.entries(initialData)) {\n      data.append(key, value);\n    }\n\n    return data;\n  }\n\n  /**\n   *\n   * @param {Response} response\n   * @param {HTMLElement} targetElement\n   * @returns {Promise<void>}\n   */\n  async #handleResponseError(response, targetElement) {\n    const responseData = await response.clone().text();\n\n    if (response.status === 400) {\n      this.#formValidator.handleFormErrorMessages(targetElement, responseData);\n\n      document.dispatchEvent(new CustomEvent(\"acp3.ajaxFrom.submit.fail\", { detail: this }));\n    } else if (responseData.length > 0) {\n      document.open();\n      document.write(responseData);\n      document.close();\n    }\n  }\n\n  /**\n   *\n   * @param {Response} response\n   * @param {string} hash\n   * @param {Record<string, any>} mergedSettings\n   * @returns {Promise<void>}\n   */\n  async #handleSuccessfulResponse(response, hash, mergedSettings) {\n    const responseData = await this.#decodeResponse(response);\n\n    if (typeof window[mergedSettings.completeCallback] === \"function\") {\n      window[mergedSettings.completeCallback](responseData);\n    } else if (responseData.redirect_url) {\n      this.#redirectToNewPage(hash, responseData);\n    } else {\n      this.#replaceContent(hash, responseData, mergedSettings);\n      this.#scrollIntoView(hash, mergedSettings);\n\n      if (hash !== undefined) {\n        window.location.hash = hash;\n      }\n\n      document.dispatchEvent(new CustomEvent(\"acp3.ajaxFrom.complete\"));\n    }\n  }\n\n  /**\n   *\n   * @param {Element} submitButton\n   */\n  #disableSubmitButton(submitButton) {\n    if (submitButton) {\n      submitButton.disabled = true;\n    }\n  }\n\n  /**\n   *\n   * @param {Element} submitButton\n   */\n  #enableSubmitButton(submitButton) {\n    if (submitButton) {\n      submitButton.disabled = false;\n    }\n  }\n\n  /**\n   *\n   * @param {Response} response\n   * @returns {Promise<*>}\n   */\n  async #decodeResponse(response) {\n    try {\n      return await response.clone().json();\n    } catch (error) {\n      return await response.clone().text();\n    }\n  }\n\n  #redirectToNewPage(hash, responseData) {\n    if (hash !== undefined) {\n      window.location.href = responseData.redirect_url + hash;\n      window.location.reload();\n    } else {\n      window.location.href = responseData.redirect_url;\n    }\n  }\n\n  #scrollIntoView(hash, mergedSettings) {\n    setTimeout(() => {\n      if (hash) {\n        const targetElement = document.querySelector(`[data-hash-change=\"${hash}\"]`);\n\n        window.scrollTo({ top: targetElement.getBoundingClientRect().y, behavior: \"smooth\" });\n      } else {\n        const targetElement = document.querySelector(mergedSettings.targetElement);\n        const offsetTop = targetElement.getBoundingClientRect().y;\n\n        if (document.scrollTop > offsetTop) {\n          window.scrollTo({ top: offsetTop, behavior: \"smooth\" });\n        }\n      }\n    });\n  }\n\n  #replaceContent(hash, responseData, mergedSettings) {\n    if (hash && document.querySelector(hash)) {\n      const parser = new DOMParser();\n      const doc = parser.parseFromString(responseData, \"text/html\");\n\n      document.querySelector(hash).innerHTML = doc.querySelector(hash).innerHTML;\n    } else {\n      document.querySelector(mergedSettings.targetElement).innerHTML = responseData;\n    }\n  }\n}\n","/*\n * Copyright (c) by the ACP3 Developers.\n * See the LICENSE file at the top-level module directory for licensing details.\n */\n\nexport class LoadingIndicator {\n  /**\n   *\n   * @param {HTMLElement} targetElement\n   */\n  addLoadingIndicator(targetElement) {\n    if (!targetElement.querySelector(\".loading-indicator\")) {\n      const body = document.querySelector(\"body\");\n      const jsSvgIcons = JSON.parse(body.dataset.svgIcons);\n      const loadingIndicatorHtml =\n        '<svg class=\"svg-icon svg-icon__spinner svg-icon--spin loading-indicator\" fill=\"currentColor\"><use xlink:href=\"' +\n        jsSvgIcons[\"loadingIndicatorIcon\"] +\n        '\"></use></svg>';\n\n      targetElement.insertAdjacentHTML(\"afterbegin\", loadingIndicatorHtml);\n    }\n  }\n\n  /**\n   *\n   * @param {HTMLElement} targetElement\n   */\n  showLoadingIndicator(targetElement) {\n    this.#toggleLoadingIndicator(targetElement, true);\n  }\n\n  /**\n   *\n   * @param {HTMLElement} targetElement\n   */\n  hideLoadingIndicator(targetElement) {\n    this.#toggleLoadingIndicator(targetElement, false);\n  }\n\n  /**\n   *\n   * @param {HTMLElement} targetElement\n   * @param {Boolean} show\n   */\n  #toggleLoadingIndicator(targetElement, show) {\n    targetElement.querySelector(\".loading-indicator\")?.classList.toggle(\"loading-indicator__active\", show);\n  }\n}\n","/*\n * Copyright (c) by the ACP3 Developers.\n * See the LICENSE file at the top-level module directory for licensing details.\n */\n\nimport { mergeSettings } from \"./utils\";\n\nexport class FormValidator {\n  #defaults = {\n    scrollOffsetElement: null,\n  };\n  #settings;\n\n  constructor(options = {}) {\n    this.#settings = mergeSettings(this.#defaults, options, {});\n  }\n\n  /**\n   *\n   * @param {HTMLFormElement} formElement\n   * @returns {boolean}\n   */\n  preValidateForm(formElement) {\n    this.checkFormElementsForErrors(formElement);\n    this.#focusTabWithFirstErrorMessage(formElement);\n    this.#scrollToFirstFormError(formElement);\n\n    return this.isValid(formElement);\n  }\n\n  /**\n   *\n   * @param {HTMLFormElement} formElement\n   */\n  checkFormElementsForErrors(formElement) {\n    this.#removeAllPreviousErrors(formElement);\n\n    for (const field of formElement.elements) {\n      if (field.nodeName !== \"INPUT\" && field.nodeName !== \"TEXTAREA\" && field.nodeName !== \"SELECT\") {\n        continue;\n      }\n\n      if (!field.checkValidity()) {\n        this.#addErrorMessageToFormField(field, field.validationMessage);\n\n        formElement.formValidator.isValid = false;\n      }\n    }\n  }\n\n  /**\n   * @param {HTMLFormElement} formElement\n   */\n  #removeAllPreviousErrors(formElement) {\n    formElement.querySelectorAll(\".is-invalid\").forEach((invalidFormField) => {\n      invalidFormField.classList.remove(\"is-invalid\");\n    });\n  }\n\n  /**\n   *\n   * @param {HTMLElement} formField\n   */\n  #removeErrorMessageFromFormField(formField) {\n    formField.closest(\"div\")?.querySelector(\".invalid-feedback\")?.remove();\n  }\n\n  /**\n   *\n   * @param {HTMLElement} formField\n   * @param {string} errorMessage\n   */\n  #addErrorMessageToFormField(formField, errorMessage) {\n    this.#removeErrorMessageFromFormField(formField);\n\n    formField.classList.add(\"is-invalid\");\n\n    formField\n      .closest(\"div:not(.input-group):not(.btn-group)\")\n      .insertAdjacentHTML(\"beforeend\", `<div class=\"invalid-feedback\">${errorMessage}</div>`);\n  }\n\n  /**\n   *\n   * @param {HTMLFormElement} formElement\n   */\n  #focusTabWithFirstErrorMessage(formElement) {\n    if (!formElement.querySelector(\".nav-tabs\")) {\n      return;\n    }\n\n    const firstElemWithError = formElement.querySelector(\".is-invalid\");\n\n    if (!firstElemWithError) {\n      return;\n    }\n\n    const tabId = firstElemWithError.closest(\".tab-pane\").getAttribute(\"id\");\n\n    formElement.querySelector('.nav-tabs a[href=\"#' + tabId + '\"]').click();\n\n    firstElemWithError.focus();\n  }\n\n  /**\n   *\n   * @param {HTMLFormElement} formElement\n   * @returns {boolean}\n   */\n  isValid(formElement) {\n    return !!formElement.formValidator?.isValid;\n  }\n\n  /**\n   *\n   * @param {HTMLFormElement} formElement\n   */\n  setFormAsValid(formElement) {\n    formElement.formValidator = {\n      isValid: true,\n    };\n  }\n\n  /**\n   *\n   * @param {HTMLElement} targetElement\n   * @param {string} errorMessagesHtml\n   */\n  handleFormErrorMessages(targetElement, errorMessagesHtml) {\n    if (!(targetElement instanceof HTMLFormElement)) {\n      return;\n    }\n\n    const modalBody = targetElement.querySelector(\".modal-body\");\n\n    // Remove the old - possible existing - error-box\n    document.getElementById(\"error-box\")?.remove();\n\n    // Place the error messages inside the modal body for a better styling\n    if (modalBody) {\n      modalBody.insertAdjacentHTML(\"afterbegin\", errorMessagesHtml);\n    } else {\n      targetElement.insertAdjacentHTML(\"afterbegin\", errorMessagesHtml);\n    }\n\n    this.#prettyPrintResponseErrorMessages(targetElement, document.getElementById(\"error-box\"));\n  }\n\n  /**\n   *\n   * @param {HTMLFormElement} formElement\n   * @param {HTMLElement} errorBox\n   */\n  #prettyPrintResponseErrorMessages(formElement, errorBox) {\n    this.#removeAllPreviousErrors(formElement);\n\n    // highlight all input fields where the validation has failed\n    errorBox.querySelectorAll(\"li\").forEach((errorMessageLine) => {\n      let errorClass = errorMessageLine.dataset.element;\n\n      if (errorClass.length > 0) {\n        let elem = document.getElementById(errorClass) || formElement.querySelector('[id|=\"' + errorClass + '\"]');\n\n        if (elem) {\n          // Move the error message to the responsible input field(s)\n          // and remove the list item from the error box container\n          this.#addErrorMessageToFormField(elem[0], errorMessageLine.innerHTML);\n          errorMessageLine.remove();\n        }\n      }\n    });\n\n    // if all list items have been removed, remove the error box container too\n    if (errorBox.querySelectorAll(\"li\").length === 0) {\n      errorBox.remove();\n    }\n\n    this.#focusTabWithFirstErrorMessage(formElement);\n    this.#scrollToFirstFormError(formElement);\n  }\n\n  /**\n   * @param {HTMLFormElement} formElement\n   */\n  #scrollToFirstFormError(formElement) {\n    if (formElement.closest(\".modal\")?.length > 0) {\n      return;\n    }\n\n    const formErrors = formElement.querySelectorAll(\".is-invalid\");\n\n    if (!formErrors || formErrors.length === 0) {\n      return;\n    }\n\n    if (this.#isElementInViewport(formElement.querySelector(\".invalid-feedback\"))) {\n      return;\n    }\n\n    let offsetTop = formErrors.item(0).getBoundingClientRect().top;\n\n    if (this.#settings.scrollOffsetElement) {\n      const scrollOffsetElement = document.querySelector(this.#settings.scrollOffsetElement);\n\n      if (scrollOffsetElement) {\n        offsetTop -= scrollOffsetElement.clientHeight;\n      }\n    }\n\n    window.scrollTo({ top: offsetTop, behavior: \"smooth\" });\n  }\n\n  #isElementInViewport(element) {\n    const scrollOffsetElement = document.querySelector(this.#settings.scrollOffsetElement);\n    let offsetTop = 0;\n\n    if (scrollOffsetElement) {\n      offsetTop = scrollOffsetElement.clientHeight;\n    }\n\n    const rect = element.getBoundingClientRect();\n\n    return (\n      rect.top >= offsetTop &&\n      rect.left >= 0 &&\n      rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n      rect.right <= (window.innerWidth || document.documentElement.clientWidth)\n    );\n  }\n}\n","/*\n * Copyright (c) by the ACP3 Developers.\n * See the LICENSE file at the top-level module directory for licencing details.\n */\n\nimport { AjaxForm } from \"../lib/ajax-form\";\nimport { LoadingIndicator } from \"../lib/loading-indicator\";\nimport { FormValidator } from \"../lib/form-validator\";\n\n(() => {\n  new AjaxForm(new LoadingIndicator(), new FormValidator());\n})();\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2stZmxhdC9fcHJlbHVkZSIsIkFDUDMvTW9kdWxlcy9BQ1AzL1N5c3RlbS9SZXNvdXJjZXMvQXNzZXRzL2pzL2xpYi91dGlscy5qcyIsIkFDUDMvTW9kdWxlcy9BQ1AzL1N5c3RlbS9SZXNvdXJjZXMvQXNzZXRzL2pzL2xpYi9ldmVudC1oYW5kbGVyLmpzIiwiQUNQMy9Nb2R1bGVzL0FDUDMvU3lzdGVtL1Jlc291cmNlcy9Bc3NldHMvanMvbGliL2FqYXgtZm9ybS5qcyIsIkFDUDMvTW9kdWxlcy9BQ1AzL1N5c3RlbS9SZXNvdXJjZXMvQXNzZXRzL2pzL2xpYi9sb2FkaW5nLWluZGljYXRvci5qcyIsIkFDUDMvTW9kdWxlcy9BQ1AzL1N5c3RlbS9SZXNvdXJjZXMvQXNzZXRzL2pzL2xpYi9mb3JtLXZhbGlkYXRvci5qcyIsIkFDUDMvTW9kdWxlcy9BQ1AzL1N5c3RlbS9SZXNvdXJjZXMvQXNzZXRzL2pzL3BhcnRpYWxzL2FqYXgtZm9ybS5qcyJdLCJuYW1lcyI6WyJfJHV0aWxzXzUiLCJkZWZhdWx0U2V0dGluZ3MiLCJjb25zdHJ1Y3Rvck9wdGlvbnMiLCJkYXRhQXR0cmlidXRlT3B0aW9ucyIsIm1lcmdlZFNldHRpbmdzIiwia2V5IiwidmFsdWUiLCJPYmplY3QiLCJlbnRyaWVzIiwia2V5U3RyaXBwZWQiLCJzdHJpbmciLCJyZXBsYWNlIiwiY2hhckF0IiwidG9Mb3dlckNhc2UiLCJzbGljZSIsImxlbmd0aCIsIkpTT04iLCJwYXJzZSIsIl91bnVzZWQiLCJlbGVtZW50IiwiZXZlbnROYW1lIiwic2VsZWN0b3JPclRhcmdldEVsZW1lbnQiLCJoYW5kbGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwiZWxlbXMiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZWxlbSIsImNvbnRhaW5zIiwidGFyZ2V0IiwiX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VCYXNlIiwicmVjZWl2ZXIiLCJwcml2YXRlS2V5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiVHlwZUVycm9yIiwiaWQiLCJfY2xhc3NQcml2YXRlRmllbGRMb29zZUtleSIsIm5hbWUiLCJfbG9hZGluZ0luZGljYXRvciIsIl9mb3JtVmFsaWRhdG9yIiwiX2RlZmF1bHRzIiwiX2luaXQiLCJfcmVnaXN0ZXJDbGlja2VkU3VibWl0QnV0dG9uIiwiX3ByZXBhcmVGb3JtRGF0YSIsIl9oYW5kbGVSZXNwb25zZUVycm9yIiwiX2hhbmRsZVN1Y2Nlc3NmdWxSZXNwb25zZSIsIl9kaXNhYmxlU3VibWl0QnV0dG9uIiwiX2VuYWJsZVN1Ym1pdEJ1dHRvbiIsIl9kZWNvZGVSZXNwb25zZSIsIl9yZWRpcmVjdFRvTmV3UGFnZSIsIl9zY3JvbGxJbnRvVmlldyIsIl9yZXBsYWNlQ29udGVudCIsIl9pbml0MiIsInRoaXMiLCJfJGV2ZW50SGFuZGxlcl8yIiwiZGVsZWdhdGVFdmVudCIsImFzeW5jIiwicHJldmVudERlZmF1bHQiLCJwZXJmb3JtQWpheFJlcXVlc3QiLCJzZXRGb3JtQXNWYWxpZCIsImRpc3BhdGNoRXZlbnQiLCJDdXN0b21FdmVudCIsImRldGFpbCIsImlzVmFsaWQiLCJwcmVWYWxpZGF0ZUZvcm0iLCJjaGVja0Zvcm1FbGVtZW50c0ZvckVycm9ycyIsIl9yZWdpc3RlckNsaWNrZWRTdWJtaXRCdXR0b24yIiwic3VibWl0RWxlbSIsImNsb3Nlc3QiLCJkYXRhc2V0IiwiY2xpY2tlZCIsIl9wcmVwYXJlRm9ybURhdGEyIiwiZm9ybUVsZW1lbnQiLCJzdWJtaXRCdXR0b24iLCJpbml0aWFsRGF0YSIsImN1c3RvbUZvcm1EYXRhIiwiZGF0YSIsImdldEF0dHJpYnV0ZSIsIkZvcm1EYXRhIiwiYXBwZW5kIiwiX2hhbmRsZVJlc3BvbnNlRXJyb3IyIiwicmVzcG9uc2UiLCJ0YXJnZXRFbGVtZW50IiwicmVzcG9uc2VEYXRhIiwiY2xvbmUiLCJ0ZXh0Iiwic3RhdHVzIiwiaGFuZGxlRm9ybUVycm9yTWVzc2FnZXMiLCJvcGVuIiwid3JpdGUiLCJjbG9zZSIsIl9oYW5kbGVTdWNjZXNzZnVsUmVzcG9uc2UyIiwiaGFzaCIsIndpbmRvdyIsImNvbXBsZXRlQ2FsbGJhY2siLCJyZWRpcmVjdF91cmwiLCJsb2NhdGlvbiIsIl9kaXNhYmxlU3VibWl0QnV0dG9uMiIsImRpc2FibGVkIiwiX2VuYWJsZVN1Ym1pdEJ1dHRvbjIiLCJfZGVjb2RlUmVzcG9uc2UyIiwianNvbiIsImVycm9yIiwiX3JlZGlyZWN0VG9OZXdQYWdlMiIsImhyZWYiLCJyZWxvYWQiLCJfc2Nyb2xsSW50b1ZpZXcyIiwic2V0VGltZW91dCIsInF1ZXJ5U2VsZWN0b3IiLCJjb25jYXQiLCJzY3JvbGxUbyIsInRvcCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInkiLCJiZWhhdmlvciIsIm9mZnNldFRvcCIsInNjcm9sbFRvcCIsIl9yZXBsYWNlQ29udGVudDIiLCJkb2MiLCJET01QYXJzZXIiLCJwYXJzZUZyb21TdHJpbmciLCJpbm5lckhUTUwiLCJfJGFqYXhGb3JtXzEiLCJBamF4Rm9ybSIsIltvYmplY3QgT2JqZWN0XSIsImxvYWRpbmdJbmRpY2F0b3IiLCJmb3JtVmFsaWRhdG9yIiwiZGVmaW5lUHJvcGVydHkiLCJ3cml0YWJsZSIsImxvYWRpbmdPdmVybGF5IiwibWV0aG9kIiwibWVyZ2VTZXR0aW5ncyIsIl9zdWJtaXRCdXR0b24iLCJIVE1MRm9ybUVsZW1lbnQiLCJoYXNoQ2hhbmdlIiwiYWRkTG9hZGluZ0luZGljYXRvciIsInNob3dMb2FkaW5nSW5kaWNhdG9yIiwiX3JlZiIsIl90YXJnZXRFbGVtZW50JGdldEF0dCIsIl90YXJnZXRFbGVtZW50JGdldEF0dDIiLCJfbWVyZ2VkU2V0dGluZ3MkbWV0aG8iLCJ0b1VwcGVyQ2FzZSIsImZldGNoIiwiYm9keSIsImhlYWRlcnMiLCJYLVJlcXVlc3RlZC1XaXRoIiwib2siLCJjb25zb2xlIiwiaGlkZUxvYWRpbmdJbmRpY2F0b3IiLCJzaG93IiwiX3RhcmdldEVsZW1lbnQkcXVlcnlTIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiXyRsb2FkaW5nSW5kaWNhdG9yXzQiLCJMb2FkaW5nSW5kaWNhdG9yIiwiX3RvZ2dsZUxvYWRpbmdJbmRpY2F0b3IiLCJfdG9nZ2xlTG9hZGluZ0luZGljYXRvcjIiLCJsb2FkaW5nSW5kaWNhdG9ySHRtbCIsInN2Z0ljb25zIiwibG9hZGluZ0luZGljYXRvckljb24iLCJpbnNlcnRBZGphY2VudEhUTUwiLCJfX19jbGFzc1ByaXZhdGVGaWVsZExvb3NlQmFzZV80IiwiX19fY2xhc3NQcml2YXRlRmllbGRMb29zZUJhc2VfMyIsIl9faWRfMyIsIl9fX2NsYXNzUHJpdmF0ZUZpZWxkTG9vc2VLZXlfMyIsIl9fX2RlZmF1bHRzXzMiLCJfc2V0dGluZ3MiLCJfcmVtb3ZlQWxsUHJldmlvdXNFcnJvcnMiLCJfcmVtb3ZlRXJyb3JNZXNzYWdlRnJvbUZvcm1GaWVsZCIsIl9hZGRFcnJvck1lc3NhZ2VUb0Zvcm1GaWVsZCIsIl9mb2N1c1RhYldpdGhGaXJzdEVycm9yTWVzc2FnZSIsIl9wcmV0dHlQcmludFJlc3BvbnNlRXJyb3JNZXNzYWdlcyIsIl9zY3JvbGxUb0ZpcnN0Rm9ybUVycm9yIiwiX2lzRWxlbWVudEluVmlld3BvcnQiLCJfcmVtb3ZlQWxsUHJldmlvdXNFcnJvcnMyIiwiaW52YWxpZEZvcm1GaWVsZCIsInJlbW92ZSIsIl9yZW1vdmVFcnJvck1lc3NhZ2VGcm9tRm9ybUZpZWxkMiIsImZvcm1GaWVsZCIsIl9mb3JtRmllbGQkY2xvc2VzdCIsIl9mb3JtRmllbGQkY2xvc2VzdCRxdSIsIl9hZGRFcnJvck1lc3NhZ2VUb0Zvcm1GaWVsZDIiLCJlcnJvck1lc3NhZ2UiLCJhZGQiLCJfZm9jdXNUYWJXaXRoRmlyc3RFcnJvck1lc3NhZ2UyIiwiZmlyc3RFbGVtV2l0aEVycm9yIiwidGFiSWQiLCJjbGljayIsImZvY3VzIiwiX3ByZXR0eVByaW50UmVzcG9uc2VFcnJvck1lc3NhZ2VzMiIsImVycm9yQm94IiwiZXJyb3JNZXNzYWdlTGluZSIsImVycm9yQ2xhc3MiLCJnZXRFbGVtZW50QnlJZCIsIl9zY3JvbGxUb0ZpcnN0Rm9ybUVycm9yMiIsIl9mb3JtRWxlbWVudCRjbG9zZXN0IiwiZm9ybUVycm9ycyIsIml0ZW0iLCJzY3JvbGxPZmZzZXRFbGVtZW50IiwiY2xpZW50SGVpZ2h0IiwiX2lzRWxlbWVudEluVmlld3BvcnQyIiwicmVjdCIsImxlZnQiLCJib3R0b20iLCJpbm5lckhlaWdodCIsImRvY3VtZW50RWxlbWVudCIsInJpZ2h0IiwiaW5uZXJXaWR0aCIsImNsaWVudFdpZHRoIiwiXyRmb3JtVmFsaWRhdG9yXzMiLCJGb3JtVmFsaWRhdG9yIiwib3B0aW9ucyIsImZpZWxkIiwiZWxlbWVudHMiLCJub2RlTmFtZSIsImNoZWNrVmFsaWRpdHkiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9mb3JtRWxlbWVudCRmb3JtVmFsaSIsImVycm9yTWVzc2FnZXNIdG1sIiwiX2RvY3VtZW50JGdldEVsZW1lbnRCIiwibW9kYWxCb2R5Il0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBLElBQUFBLEVBQUEsb0VDSU8sU0FBdUJDLEVBQWlCQyxFQUFvQkMsR0FDakUsTUFBTUMsRUFBaUIsSUFBS0gsS0FBb0JDLEdBRWhELElBQUtDLEVBQ0gsT0FBT0MsRUFHVCxJQUFLLElBQUtDLEVBQUtDLEtBQVVDLE9BQU9DLFFBQVFMLEdBQXVCLENBQzdELE1BQU1NLEdBY29CQyxFQWRlTCxFQUFJTSxRQUFRLFdBQVksS0FlckRDLE9BQU8sR0FBR0MsY0FBZ0JILEVBQU9JLE1BQU0sR0FibkQsR0FBSUwsRUFBWU0sT0FBUyxRQUFBLElBQVlYLEVBQWVLLEdBQ2xELElBQ0VMLEVBQWVLLEdBQWVPLEtBQUtDLE1BQU1YLEdBQ3pDLE1BQUFZLEdBQ0FkLEVBQWVLLEdBQWVILEdBUXRDLElBQThCSSxFQUg1QixPQUFPTiw2RUNaRixTQUF1QmUsRUFBU0MsRUFBV0MsRUFBeUJDLEdBQ3pFSCxFQUFRSSxpQkFBaUJILEVBQVlJLElBQ25DLEdBQXVDLGlCQUE1QkgsRUFBc0MsQ0FDL0MsTUFBTUksRUFB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ekIwRixFQUFBN0csS0FBQWtILEdBQUFBLEdBQThCL0YsR0FFOUIsSUFBSyxNQUFNNEksS0FBUzVJLEVBQVk2SSxTQUNQLFVBQW5CRCxFQUFNRSxVQUEyQyxhQUFuQkYsRUFBTUUsVUFBOEMsV0FBbkJGLEVBQU1FLFVBSXBFRixFQUFNRyxrQkFDVHJELEVBQUE3RyxLQUFBb0gsR0FBQUEsR0FBaUMyQyxFQUFPQSxFQUFNSSxtQkFFOUNoSixFQUFZc0QsY0FBYy9ELFNBQUEsR0FnRWhDNkQsUUFBUXBELEdBQWEsSUFBQWlKLEVBQ25CLFFBQVEsUUFBQUEsRUFBQ2pKLEVBQVlzRCxxQkFBQSxJQUFiMkYsSUFBQ0EsRUFBMkIxSixTQU90QzZELGVBQWVwRCxHQUNiQSxFQUFZc0QsY0FBZ0IsQ0FDMUIvRCxTQUFBLEdBU0o2RCx3QkFBd0IxQyxFQUFld0ksR0FBbUIsSUFBQUMsRUFDeEQsS0FBTXpJLGFBQXlCbUQsaUJBQzdCLE9BR0YsTUFBTXVGLEVBQVkxSSxFQUFjMEIsY0FBYyxlQUc5QyxRQUFBK0csRUFBQXJNLFNBQVMySyxlQUFlLG9CQUFBLElBQXhCMEIsR0FBQUEsRUFBc0MzQyxTQUdsQzRDLEVBQ0ZBLEVBQVU1RCxtQkFBbUIsYUFBYzBELEdBRTNDeEksRUFBYzhFLG1CQUFtQixhQUFjMEQsR0FHakR4RCxFQUFBN0csS0FBQXNILEdBQUFBLEdBQXVDekYsRUFBZTVELFNBQVMySyxlQUFlLGdCQ3ZJaEYsSUFBSXZFLEVBQUFDLFNBQVMsSUFBSThCLEVBQUFDLGlCQUFvQixJQUFJdUQsRUFBQUMsZU5WM0MiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtcbiIsIi8qXG4gKiBDb3B5cmlnaHQgKGMpIGJ5IHRoZSBBQ1AzIERldmVsb3BlcnMuXG4gKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBhdCB0aGUgdG9wLWxldmVsIG1vZHVsZSBkaXJlY3RvcnkgZm9yIGxpY2Vuc2luZyBkZXRhaWxzLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZVNldHRpbmdzKGRlZmF1bHRTZXR0aW5ncywgY29uc3RydWN0b3JPcHRpb25zLCBkYXRhQXR0cmlidXRlT3B0aW9ucykge1xuICBjb25zdCBtZXJnZWRTZXR0aW5ncyA9IHsgLi4uZGVmYXVsdFNldHRpbmdzLCAuLi5jb25zdHJ1Y3Rvck9wdGlvbnMgfTtcblxuICBpZiAoIWRhdGFBdHRyaWJ1dGVPcHRpb25zKSB7XG4gICAgcmV0dXJuIG1lcmdlZFNldHRpbmdzO1xuICB9XG5cbiAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGFBdHRyaWJ1dGVPcHRpb25zKSkge1xuICAgIGNvbnN0IGtleVN0cmlwcGVkID0gbG93ZXJDYXNlRmlyc3RMZXR0ZXIoa2V5LnJlcGxhY2UoXCJhamF4Rm9ybVwiLCBcIlwiKSk7XG5cbiAgICBpZiAoa2V5U3RyaXBwZWQubGVuZ3RoID4gMCAmJiB0eXBlb2YgbWVyZ2VkU2V0dGluZ3Nba2V5U3RyaXBwZWRdICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICB0cnkge1xuICAgICAgICBtZXJnZWRTZXR0aW5nc1trZXlTdHJpcHBlZF0gPSBKU09OLnBhcnNlKHZhbHVlKTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICBtZXJnZWRTZXR0aW5nc1trZXlTdHJpcHBlZF0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gbWVyZ2VkU2V0dGluZ3M7XG59XG5cbmZ1bmN0aW9uIGxvd2VyQ2FzZUZpcnN0TGV0dGVyKHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgc3RyaW5nLnNsaWNlKDEpO1xufVxuIiwiLypcbiAqIENvcHlyaWdodCAoYykgYnkgdGhlIEFDUDMgRGV2ZWxvcGVycy5cbiAqIFNlZSB0aGUgTElDRU5DRSBmaWxlIGF0IHRoZSB0b3AtbGV2ZWwgbW9kdWxlIGRpcmVjdG9yeSBmb3IgbGljZW5jaW5nIGRldGFpbHMuXG4gKi9cblxuLyoqXG4gKlxuICogQHBhcmFtIHtIVE1MRWxlbWVudHxEb2N1bWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZVxuICogQHBhcmFtIHtzdHJpbmd8SFRNTEVsZW1lbnR9IHNlbGVjdG9yT3JUYXJnZXRFbGVtZW50XG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBoYW5kbGVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWxlZ2F0ZUV2ZW50KGVsZW1lbnQsIGV2ZW50TmFtZSwgc2VsZWN0b3JPclRhcmdldEVsZW1lbnQsIGhhbmRsZXIpIHtcbiAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgKGV2ZW50KSA9PiB7XG4gICAgaWYgKHR5cGVvZiBzZWxlY3Rvck9yVGFyZ2V0RWxlbWVudCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgY29uc3QgZWxlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yT3JUYXJnZXRFbGVtZW50KTtcblxuICAgICAgaWYgKCFlbGVtcykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGVsZW1zLmZvckVhY2goKGVsZW0pID0+IHtcbiAgICAgICAgaWYgKGVsZW0gJiYgZWxlbS5jb250YWlucyhldmVudC50YXJnZXQpKSB7XG4gICAgICAgICAgaGFuZGxlcihldmVudCwgZWxlbSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAoc2VsZWN0b3JPclRhcmdldEVsZW1lbnQgJiYgc2VsZWN0b3JPclRhcmdldEVsZW1lbnQuY29udGFpbnMoZXZlbnQudGFyZ2V0KSkge1xuICAgICAgaGFuZGxlcihldmVudCwgc2VsZWN0b3JPclRhcmdldEVsZW1lbnQpO1xuICAgIH1cbiAgfSk7XG59XG4iLCIvKlxuICogQ29weXJpZ2h0IChjKSBieSB0aGUgQUNQMyBEZXZlbG9wZXJzLlxuICogU2VlIHRoZSBMSUNFTlNFIGZpbGUgYXQgdGhlIHRvcC1sZXZlbCBtb2R1bGUgZGlyZWN0b3J5IGZvciBsaWNlbnNpbmcgZGV0YWlscy5cbiAqL1xuXG5pbXBvcnQgeyBtZXJnZVNldHRpbmdzIH0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCB7IGRlbGVnYXRlRXZlbnQgfSBmcm9tIFwiLi9ldmVudC1oYW5kbGVyXCI7XG5cbmV4cG9ydCBjbGFzcyBBamF4Rm9ybSB7XG4gICNsb2FkaW5nSW5kaWNhdG9yO1xuICAjZm9ybVZhbGlkYXRvcjtcbiAgI2RlZmF1bHRzID0ge1xuICAgIGNvbXBsZXRlQ2FsbGJhY2s6IG51bGwsXG4gICAgdGFyZ2V0RWxlbWVudDogXCIjY29udGVudFwiLFxuICAgIGxvYWRpbmdPdmVybGF5OiB0cnVlLFxuICAgIGN1c3RvbUZvcm1EYXRhOiBudWxsLFxuICAgIG1ldGhvZDogbnVsbCxcbiAgfTtcblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtMb2FkaW5nSW5kaWNhdG9yfSBsb2FkaW5nSW5kaWNhdG9yXG4gICAqIEBwYXJhbSB7Rm9ybVZhbGlkYXRvcn0gZm9ybVZhbGlkYXRvclxuICAgKi9cbiAgY29uc3RydWN0b3IobG9hZGluZ0luZGljYXRvciwgZm9ybVZhbGlkYXRvcikge1xuICAgIHRoaXMuI2xvYWRpbmdJbmRpY2F0b3IgPSBsb2FkaW5nSW5kaWNhdG9yO1xuICAgIHRoaXMuI2Zvcm1WYWxpZGF0b3IgPSBmb3JtVmFsaWRhdG9yO1xuXG4gICAgdGhpcy4jaW5pdCgpO1xuICB9XG5cbiAgI2luaXQoKSB7XG4gICAgdGhpcy4jcmVnaXN0ZXJDbGlja2VkU3VibWl0QnV0dG9uKCk7XG5cbiAgICBkZWxlZ2F0ZUV2ZW50KGRvY3VtZW50LCBcImNsaWNrXCIsICdhW2RhdGEtYWpheC1mb3JtPVwidHJ1ZVwiXScsIGFzeW5jIChldmVudCwgZWxlbSkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgYXdhaXQgdGhpcy5wZXJmb3JtQWpheFJlcXVlc3QoZWxlbSk7XG4gICAgfSk7XG5cbiAgICBkZWxlZ2F0ZUV2ZW50KGRvY3VtZW50LCBcInN1Ym1pdFwiLCAnZm9ybVtkYXRhLWFqYXgtZm9ybT1cInRydWVcIl0nLCBhc3luYyAoZXZlbnQsIGVsZW0pID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgIHRoaXMuI2Zvcm1WYWxpZGF0b3Iuc2V0Rm9ybUFzVmFsaWQoZWxlbSk7XG5cbiAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwiYWNwMy5hamF4RnJvbS5zdWJtaXQuYmVmb3JlXCIsIHsgZGV0YWlsOiB0aGlzIH0pKTtcblxuICAgICAgaWYgKHRoaXMuI2Zvcm1WYWxpZGF0b3IuaXNWYWxpZChlbGVtKSAmJiB0aGlzLiNmb3JtVmFsaWRhdG9yLnByZVZhbGlkYXRlRm9ybShlbGVtKSkge1xuICAgICAgICBhd2FpdCB0aGlzLnBlcmZvcm1BamF4UmVxdWVzdChlbGVtKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGRlbGVnYXRlRXZlbnQoZG9jdW1lbnQsIFwiY2hhbmdlXCIsICdmb3JtW2RhdGEtYWpheC1mb3JtPVwidHJ1ZVwiXScsIGFzeW5jIChldmVudCwgZWxlbSkgPT4ge1xuICAgICAgaWYgKHRoaXMuI2Zvcm1WYWxpZGF0b3IuaXNWYWxpZChlbGVtKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgdGhpcy4jZm9ybVZhbGlkYXRvci5jaGVja0Zvcm1FbGVtZW50c0ZvckVycm9ycyhlbGVtKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gICNyZWdpc3RlckNsaWNrZWRTdWJtaXRCdXR0b24oKSB7XG4gICAgZGVsZWdhdGVFdmVudChkb2N1bWVudCwgXCJjbGlja1wiLCAnZm9ybVtkYXRhLWFqYXgtZm9ybT1cInRydWVcIl0gW3R5cGU9XCJzdWJtaXRcIl0nLCAoZXZlbnQsIHN1Ym1pdEVsZW0pID0+IHtcbiAgICAgIHN1Ym1pdEVsZW1cbiAgICAgICAgLmNsb3Nlc3QoXCJmb3JtXCIpXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKFwiW3R5cGU9c3VibWl0XVwiKVxuICAgICAgICAuZm9yRWFjaCgoZWxlbSkgPT4ge1xuICAgICAgICAgIGRlbGV0ZSBlbGVtLmRhdGFzZXRbXCJjbGlja2VkXCJdO1xuICAgICAgICB9KTtcbiAgICAgIHN1Ym1pdEVsZW0uZGF0YXNldC5jbGlja2VkID0gXCJ0cnVlXCI7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFyZ2V0RWxlbWVudFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cbiAgICovXG4gIGFzeW5jIHBlcmZvcm1BamF4UmVxdWVzdCh0YXJnZXRFbGVtZW50KSB7XG4gICAgY29uc3QgbWVyZ2VkU2V0dGluZ3MgPSBtZXJnZVNldHRpbmdzKHRoaXMuI2RlZmF1bHRzLCB7fSwgdGFyZ2V0RWxlbWVudC5kYXRhc2V0KTtcbiAgICBsZXQgaGFzaCwgc3VibWl0QnV0dG9uO1xuXG4gICAgaWYgKHRhcmdldEVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MRm9ybUVsZW1lbnQpIHtcbiAgICAgIHN1Ym1pdEJ1dHRvbiA9IHRhcmdldEVsZW1lbnQucXVlcnlTZWxlY3RvcignW3R5cGU9XCJzdWJtaXRcIl1bZGF0YS1jbGlja2VkPVwidHJ1ZVwiXScpO1xuXG4gICAgICBoYXNoID0gc3VibWl0QnV0dG9uPy5kYXRhc2V0Lmhhc2hDaGFuZ2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhhc2ggPSB0YXJnZXRFbGVtZW50LmRhdGFzZXQuaGFzaENoYW5nZTtcbiAgICB9XG5cbiAgICBpZiAobWVyZ2VkU2V0dGluZ3MubG9hZGluZ092ZXJsYXkpIHtcbiAgICAgIHRoaXMuI2xvYWRpbmdJbmRpY2F0b3IuYWRkTG9hZGluZ0luZGljYXRvcihzdWJtaXRCdXR0b24gfHwgdGFyZ2V0RWxlbWVudCk7XG4gICAgICB0aGlzLiNsb2FkaW5nSW5kaWNhdG9yLnNob3dMb2FkaW5nSW5kaWNhdG9yKHN1Ym1pdEJ1dHRvbiB8fCB0YXJnZXRFbGVtZW50KTtcbiAgICB9XG5cbiAgICB0aGlzLiNkaXNhYmxlU3VibWl0QnV0dG9uKHN1Ym1pdEJ1dHRvbik7XG5cbiAgICB0cnkge1xuICAgICAgY29uc3QgbWV0aG9kID1cbiAgICAgICAgdGFyZ2V0RWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJtZXRob2RcIik/LnRvVXBwZXJDYXNlKCkgPz8gbWVyZ2VkU2V0dGluZ3MubWV0aG9kPy50b1VwcGVyQ2FzZSgpID8/IFwiR0VUXCI7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godGFyZ2V0RWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJhY3Rpb25cIikgfHwgdGFyZ2V0RWxlbWVudC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpLCB7XG4gICAgICAgIG1ldGhvZDogbWV0aG9kLFxuICAgICAgICBib2R5OiBtZXRob2QgIT09IFwiR0VUXCIgPyB0aGlzLiNwcmVwYXJlRm9ybURhdGEodGFyZ2V0RWxlbWVudCwgc3VibWl0QnV0dG9uLCBtZXJnZWRTZXR0aW5ncykgOiBudWxsLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJYLVJlcXVlc3RlZC1XaXRoXCI6IFwiWE1MSHR0cFJlcXVlc3RcIixcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuI2hhbmRsZVJlc3BvbnNlRXJyb3IocmVzcG9uc2UsIHRhcmdldEVsZW1lbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgdGhpcy4jaGFuZGxlU3VjY2Vzc2Z1bFJlc3BvbnNlKHJlc3BvbnNlLCBoYXNoLCBtZXJnZWRTZXR0aW5ncyk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLiNsb2FkaW5nSW5kaWNhdG9yLmhpZGVMb2FkaW5nSW5kaWNhdG9yKHN1Ym1pdEJ1dHRvbiB8fCB0YXJnZXRFbGVtZW50KTtcbiAgICAgIHRoaXMuI2VuYWJsZVN1Ym1pdEJ1dHRvbihzdWJtaXRCdXR0b24pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge0hUTUxGb3JtRWxlbWVudH0gZm9ybUVsZW1lbnRcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gc3VibWl0QnV0dG9uXG4gICAqIEBwYXJhbSB7UmVjb3JkPHN0cmluZywgYW55Pn0gbWVyZ2VkU2V0dGluZ3NcbiAgICogQHJldHVybnMge0Zvcm1EYXRhfVxuICAgKi9cbiAgI3ByZXBhcmVGb3JtRGF0YShmb3JtRWxlbWVudCwgc3VibWl0QnV0dG9uLCBtZXJnZWRTZXR0aW5ncykge1xuICAgIGNvbnN0IGluaXRpYWxEYXRhID0gbWVyZ2VkU2V0dGluZ3MuY3VzdG9tRm9ybURhdGEgfHwge307XG4gICAgbGV0IGRhdGE7XG5cbiAgICBpZiAoZm9ybUVsZW1lbnQuZ2V0QXR0cmlidXRlKFwibWV0aG9kXCIpKSB7XG4gICAgICBkYXRhID0gbmV3IEZvcm1EYXRhKGZvcm1FbGVtZW50KTtcblxuICAgICAgaWYgKHN1Ym1pdEJ1dHRvbikge1xuICAgICAgICBkYXRhLmFwcGVuZChzdWJtaXRCdXR0b24uZ2V0QXR0cmlidXRlKFwibmFtZVwiKSwgXCIxXCIpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBkYXRhID0gbmV3IEZvcm1EYXRhKCk7XG4gICAgfVxuXG4gICAgZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGluaXRpYWxEYXRhKSkge1xuICAgICAgZGF0YS5hcHBlbmQoa2V5LCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtSZXNwb25zZX0gcmVzcG9uc2VcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFyZ2V0RWxlbWVudFxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cbiAgICovXG4gIGFzeW5jICNoYW5kbGVSZXNwb25zZUVycm9yKHJlc3BvbnNlLCB0YXJnZXRFbGVtZW50KSB7XG4gICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgcmVzcG9uc2UuY2xvbmUoKS50ZXh0KCk7XG5cbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDApIHtcbiAgICAgIHRoaXMuI2Zvcm1WYWxpZGF0b3IuaGFuZGxlRm9ybUVycm9yTWVzc2FnZXModGFyZ2V0RWxlbWVudCwgcmVzcG9uc2VEYXRhKTtcblxuICAgICAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJhY3AzLmFqYXhGcm9tLnN1Ym1pdC5mYWlsXCIsIHsgZGV0YWlsOiB0aGlzIH0pKTtcbiAgICB9IGVsc2UgaWYgKHJlc3BvbnNlRGF0YS5sZW5ndGggPiAwKSB7XG4gICAgICBkb2N1bWVudC5vcGVuKCk7XG4gICAgICBkb2N1bWVudC53cml0ZShyZXNwb25zZURhdGEpO1xuICAgICAgZG9jdW1lbnQuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtSZXNwb25zZX0gcmVzcG9uc2VcbiAgICogQHBhcmFtIHtzdHJpbmd9IGhhc2hcbiAgICogQHBhcmFtIHtSZWNvcmQ8c3RyaW5nLCBhbnk+fSBtZXJnZWRTZXR0aW5nc1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn1cbiAgICovXG4gIGFzeW5jICNoYW5kbGVTdWNjZXNzZnVsUmVzcG9uc2UocmVzcG9uc2UsIGhhc2gsIG1lcmdlZFNldHRpbmdzKSB7XG4gICAgY29uc3QgcmVzcG9uc2VEYXRhID0gYXdhaXQgdGhpcy4jZGVjb2RlUmVzcG9uc2UocmVzcG9uc2UpO1xuXG4gICAgaWYgKHR5cGVvZiB3aW5kb3dbbWVyZ2VkU2V0dGluZ3MuY29tcGxldGVDYWxsYmFja10gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgd2luZG93W21lcmdlZFNldHRpbmdzLmNvbXBsZXRlQ2FsbGJhY2tdKHJlc3BvbnNlRGF0YSk7XG4gICAgfSBlbHNlIGlmIChyZXNwb25zZURhdGEucmVkaXJlY3RfdXJsKSB7XG4gICAgICB0aGlzLiNyZWRpcmVjdFRvTmV3UGFnZShoYXNoLCByZXNwb25zZURhdGEpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiNyZXBsYWNlQ29udGVudChoYXNoLCByZXNwb25zZURhdGEsIG1lcmdlZFNldHRpbmdzKTtcbiAgICAgIHRoaXMuI3Njcm9sbEludG9WaWV3KGhhc2gsIG1lcmdlZFNldHRpbmdzKTtcblxuICAgICAgaWYgKGhhc2ggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICB3aW5kb3cubG9jYXRpb24uaGFzaCA9IGhhc2g7XG4gICAgICB9XG5cbiAgICAgIGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwiYWNwMy5hamF4RnJvbS5jb21wbGV0ZVwiKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gc3VibWl0QnV0dG9uXG4gICAqL1xuICAjZGlzYWJsZVN1Ym1pdEJ1dHRvbihzdWJtaXRCdXR0b24pIHtcbiAgICBpZiAoc3VibWl0QnV0dG9uKSB7XG4gICAgICBzdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IHN1Ym1pdEJ1dHRvblxuICAgKi9cbiAgI2VuYWJsZVN1Ym1pdEJ1dHRvbihzdWJtaXRCdXR0b24pIHtcbiAgICBpZiAoc3VibWl0QnV0dG9uKSB7XG4gICAgICBzdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtSZXNwb25zZX0gcmVzcG9uc2VcbiAgICogQHJldHVybnMge1Byb21pc2U8Kj59XG4gICAqL1xuICBhc3luYyAjZGVjb2RlUmVzcG9uc2UocmVzcG9uc2UpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGF3YWl0IHJlc3BvbnNlLmNsb25lKCkuanNvbigpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gYXdhaXQgcmVzcG9uc2UuY2xvbmUoKS50ZXh0KCk7XG4gICAgfVxuICB9XG5cbiAgI3JlZGlyZWN0VG9OZXdQYWdlKGhhc2gsIHJlc3BvbnNlRGF0YSkge1xuICAgIGlmIChoYXNoICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gcmVzcG9uc2VEYXRhLnJlZGlyZWN0X3VybCArIGhhc2g7XG4gICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gcmVzcG9uc2VEYXRhLnJlZGlyZWN0X3VybDtcbiAgICB9XG4gIH1cblxuICAjc2Nyb2xsSW50b1ZpZXcoaGFzaCwgbWVyZ2VkU2V0dGluZ3MpIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIGlmIChoYXNoKSB7XG4gICAgICAgIGNvbnN0IHRhcmdldEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbZGF0YS1oYXNoLWNoYW5nZT1cIiR7aGFzaH1cIl1gKTtcblxuICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oeyB0b3A6IHRhcmdldEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkueSwgYmVoYXZpb3I6IFwic21vb3RoXCIgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB0YXJnZXRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihtZXJnZWRTZXR0aW5ncy50YXJnZXRFbGVtZW50KTtcbiAgICAgICAgY29uc3Qgb2Zmc2V0VG9wID0gdGFyZ2V0RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS55O1xuXG4gICAgICAgIGlmIChkb2N1bWVudC5zY3JvbGxUb3AgPiBvZmZzZXRUb3ApIHtcbiAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oeyB0b3A6IG9mZnNldFRvcCwgYmVoYXZpb3I6IFwic21vb3RoXCIgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gICNyZXBsYWNlQ29udGVudChoYXNoLCByZXNwb25zZURhdGEsIG1lcmdlZFNldHRpbmdzKSB7XG4gICAgaWYgKGhhc2ggJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihoYXNoKSkge1xuICAgICAgY29uc3QgcGFyc2VyID0gbmV3IERPTVBhcnNlcigpO1xuICAgICAgY29uc3QgZG9jID0gcGFyc2VyLnBhcnNlRnJvbVN0cmluZyhyZXNwb25zZURhdGEsIFwidGV4dC9odG1sXCIpO1xuXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGhhc2gpLmlubmVySFRNTCA9IGRvYy5xdWVyeVNlbGVjdG9yKGhhc2gpLmlubmVySFRNTDtcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihtZXJnZWRTZXR0aW5ncy50YXJnZXRFbGVtZW50KS5pbm5lckhUTUwgPSByZXNwb25zZURhdGE7XG4gICAgfVxuICB9XG59XG4iLCIvKlxuICogQ29weXJpZ2h0IChjKSBieSB0aGUgQUNQMyBEZXZlbG9wZXJzLlxuICogU2VlIHRoZSBMSUNFTlNFIGZpbGUgYXQgdGhlIHRvcC1sZXZlbCBtb2R1bGUgZGlyZWN0b3J5IGZvciBsaWNlbnNpbmcgZGV0YWlscy5cbiAqL1xuXG5leHBvcnQgY2xhc3MgTG9hZGluZ0luZGljYXRvciB7XG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0YXJnZXRFbGVtZW50XG4gICAqL1xuICBhZGRMb2FkaW5nSW5kaWNhdG9yKHRhcmdldEVsZW1lbnQpIHtcbiAgICBpZiAoIXRhcmdldEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5sb2FkaW5nLWluZGljYXRvclwiKSkge1xuICAgICAgY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpO1xuICAgICAgY29uc3QganNTdmdJY29ucyA9IEpTT04ucGFyc2UoYm9keS5kYXRhc2V0LnN2Z0ljb25zKTtcbiAgICAgIGNvbnN0IGxvYWRpbmdJbmRpY2F0b3JIdG1sID1cbiAgICAgICAgJzxzdmcgY2xhc3M9XCJzdmctaWNvbiBzdmctaWNvbl9fc3Bpbm5lciBzdmctaWNvbi0tc3BpbiBsb2FkaW5nLWluZGljYXRvclwiIGZpbGw9XCJjdXJyZW50Q29sb3JcIj48dXNlIHhsaW5rOmhyZWY9XCInICtcbiAgICAgICAganNTdmdJY29uc1tcImxvYWRpbmdJbmRpY2F0b3JJY29uXCJdICtcbiAgICAgICAgJ1wiPjwvdXNlPjwvc3ZnPic7XG5cbiAgICAgIHRhcmdldEVsZW1lbnQuaW5zZXJ0QWRqYWNlbnRIVE1MKFwiYWZ0ZXJiZWdpblwiLCBsb2FkaW5nSW5kaWNhdG9ySHRtbCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldEVsZW1lbnRcbiAgICovXG4gIHNob3dMb2FkaW5nSW5kaWNhdG9yKHRhcmdldEVsZW1lbnQpIHtcbiAgICB0aGlzLiN0b2dnbGVMb2FkaW5nSW5kaWNhdG9yKHRhcmdldEVsZW1lbnQsIHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IHRhcmdldEVsZW1lbnRcbiAgICovXG4gIGhpZGVMb2FkaW5nSW5kaWNhdG9yKHRhcmdldEVsZW1lbnQpIHtcbiAgICB0aGlzLiN0b2dnbGVMb2FkaW5nSW5kaWNhdG9yKHRhcmdldEVsZW1lbnQsIGZhbHNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0YXJnZXRFbGVtZW50XG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gc2hvd1xuICAgKi9cbiAgI3RvZ2dsZUxvYWRpbmdJbmRpY2F0b3IodGFyZ2V0RWxlbWVudCwgc2hvdykge1xuICAgIHRhcmdldEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5sb2FkaW5nLWluZGljYXRvclwiKT8uY2xhc3NMaXN0LnRvZ2dsZShcImxvYWRpbmctaW5kaWNhdG9yX19hY3RpdmVcIiwgc2hvdyk7XG4gIH1cbn1cbiIsIi8qXG4gKiBDb3B5cmlnaHQgKGMpIGJ5IHRoZSBBQ1AzIERldmVsb3BlcnMuXG4gKiBTZWUgdGhlIExJQ0VOU0UgZmlsZSBhdCB0aGUgdG9wLWxldmVsIG1vZHVsZSBkaXJlY3RvcnkgZm9yIGxpY2Vuc2luZyBkZXRhaWxzLlxuICovXG5cbmltcG9ydCB7IG1lcmdlU2V0dGluZ3MgfSBmcm9tIFwiLi91dGlsc1wiO1xuXG5leHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gICNkZWZhdWx0cyA9IHtcbiAgICBzY3JvbGxPZmZzZXRFbGVtZW50OiBudWxsLFxuICB9O1xuICAjc2V0dGluZ3M7XG5cbiAgY29uc3RydWN0b3Iob3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy4jc2V0dGluZ3MgPSBtZXJnZVNldHRpbmdzKHRoaXMuI2RlZmF1bHRzLCBvcHRpb25zLCB7fSk7XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtIVE1MRm9ybUVsZW1lbnR9IGZvcm1FbGVtZW50XG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgcHJlVmFsaWRhdGVGb3JtKGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5jaGVja0Zvcm1FbGVtZW50c0ZvckVycm9ycyhmb3JtRWxlbWVudCk7XG4gICAgdGhpcy4jZm9jdXNUYWJXaXRoRmlyc3RFcnJvck1lc3NhZ2UoZm9ybUVsZW1lbnQpO1xuICAgIHRoaXMuI3Njcm9sbFRvRmlyc3RGb3JtRXJyb3IoZm9ybUVsZW1lbnQpO1xuXG4gICAgcmV0dXJuIHRoaXMuaXNWYWxpZChmb3JtRWxlbWVudCk7XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtIVE1MRm9ybUVsZW1lbnR9IGZvcm1FbGVtZW50XG4gICAqL1xuICBjaGVja0Zvcm1FbGVtZW50c0ZvckVycm9ycyhmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuI3JlbW92ZUFsbFByZXZpb3VzRXJyb3JzKGZvcm1FbGVtZW50KTtcblxuICAgIGZvciAoY29uc3QgZmllbGQgb2YgZm9ybUVsZW1lbnQuZWxlbWVudHMpIHtcbiAgICAgIGlmIChmaWVsZC5ub2RlTmFtZSAhPT0gXCJJTlBVVFwiICYmIGZpZWxkLm5vZGVOYW1lICE9PSBcIlRFWFRBUkVBXCIgJiYgZmllbGQubm9kZU5hbWUgIT09IFwiU0VMRUNUXCIpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmICghZmllbGQuY2hlY2tWYWxpZGl0eSgpKSB7XG4gICAgICAgIHRoaXMuI2FkZEVycm9yTWVzc2FnZVRvRm9ybUZpZWxkKGZpZWxkLCBmaWVsZC52YWxpZGF0aW9uTWVzc2FnZSk7XG5cbiAgICAgICAgZm9ybUVsZW1lbnQuZm9ybVZhbGlkYXRvci5pc1ZhbGlkID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7SFRNTEZvcm1FbGVtZW50fSBmb3JtRWxlbWVudFxuICAgKi9cbiAgI3JlbW92ZUFsbFByZXZpb3VzRXJyb3JzKGZvcm1FbGVtZW50KSB7XG4gICAgZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5pcy1pbnZhbGlkXCIpLmZvckVhY2goKGludmFsaWRGb3JtRmllbGQpID0+IHtcbiAgICAgIGludmFsaWRGb3JtRmllbGQuY2xhc3NMaXN0LnJlbW92ZShcImlzLWludmFsaWRcIik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZm9ybUZpZWxkXG4gICAqL1xuICAjcmVtb3ZlRXJyb3JNZXNzYWdlRnJvbUZvcm1GaWVsZChmb3JtRmllbGQpIHtcbiAgICBmb3JtRmllbGQuY2xvc2VzdChcImRpdlwiKT8ucXVlcnlTZWxlY3RvcihcIi5pbnZhbGlkLWZlZWRiYWNrXCIpPy5yZW1vdmUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBmb3JtRmllbGRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGVycm9yTWVzc2FnZVxuICAgKi9cbiAgI2FkZEVycm9yTWVzc2FnZVRvRm9ybUZpZWxkKGZvcm1GaWVsZCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgdGhpcy4jcmVtb3ZlRXJyb3JNZXNzYWdlRnJvbUZvcm1GaWVsZChmb3JtRmllbGQpO1xuXG4gICAgZm9ybUZpZWxkLmNsYXNzTGlzdC5hZGQoXCJpcy1pbnZhbGlkXCIpO1xuXG4gICAgZm9ybUZpZWxkXG4gICAgICAuY2xvc2VzdChcImRpdjpub3QoLmlucHV0LWdyb3VwKTpub3QoLmJ0bi1ncm91cClcIilcbiAgICAgIC5pbnNlcnRBZGphY2VudEhUTUwoXCJiZWZvcmVlbmRcIiwgYDxkaXYgY2xhc3M9XCJpbnZhbGlkLWZlZWRiYWNrXCI+JHtlcnJvck1lc3NhZ2V9PC9kaXY+YCk7XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtIVE1MRm9ybUVsZW1lbnR9IGZvcm1FbGVtZW50XG4gICAqL1xuICAjZm9jdXNUYWJXaXRoRmlyc3RFcnJvck1lc3NhZ2UoZm9ybUVsZW1lbnQpIHtcbiAgICBpZiAoIWZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubmF2LXRhYnNcIikpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBmaXJzdEVsZW1XaXRoRXJyb3IgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmlzLWludmFsaWRcIik7XG5cbiAgICBpZiAoIWZpcnN0RWxlbVdpdGhFcnJvcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHRhYklkID0gZmlyc3RFbGVtV2l0aEVycm9yLmNsb3Nlc3QoXCIudGFiLXBhbmVcIikuZ2V0QXR0cmlidXRlKFwiaWRcIik7XG5cbiAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcubmF2LXRhYnMgYVtocmVmPVwiIycgKyB0YWJJZCArICdcIl0nKS5jbGljaygpO1xuXG4gICAgZmlyc3RFbGVtV2l0aEVycm9yLmZvY3VzKCk7XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtIVE1MRm9ybUVsZW1lbnR9IGZvcm1FbGVtZW50XG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgaXNWYWxpZChmb3JtRWxlbWVudCkge1xuICAgIHJldHVybiAhIWZvcm1FbGVtZW50LmZvcm1WYWxpZGF0b3I/LmlzVmFsaWQ7XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtIVE1MRm9ybUVsZW1lbnR9IGZvcm1FbGVtZW50XG4gICAqL1xuICBzZXRGb3JtQXNWYWxpZChmb3JtRWxlbWVudCkge1xuICAgIGZvcm1FbGVtZW50LmZvcm1WYWxpZGF0b3IgPSB7XG4gICAgICBpc1ZhbGlkOiB0cnVlLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gdGFyZ2V0RWxlbWVudFxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXJyb3JNZXNzYWdlc0h0bWxcbiAgICovXG4gIGhhbmRsZUZvcm1FcnJvck1lc3NhZ2VzKHRhcmdldEVsZW1lbnQsIGVycm9yTWVzc2FnZXNIdG1sKSB7XG4gICAgaWYgKCEodGFyZ2V0RWxlbWVudCBpbnN0YW5jZW9mIEhUTUxGb3JtRWxlbWVudCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBtb2RhbEJvZHkgPSB0YXJnZXRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWwtYm9keVwiKTtcblxuICAgIC8vIFJlbW92ZSB0aGUgb2xkIC0gcG9zc2libGUgZXhpc3RpbmcgLSBlcnJvci1ib3hcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVycm9yLWJveFwiKT8ucmVtb3ZlKCk7XG5cbiAgICAvLyBQbGFjZSB0aGUgZXJyb3IgbWVzc2FnZXMgaW5zaWRlIHRoZSBtb2RhbCBib2R5IGZvciBhIGJldHRlciBzdHlsaW5nXG4gICAgaWYgKG1vZGFsQm9keSkge1xuICAgICAgbW9kYWxCb2R5Lmluc2VydEFkamFjZW50SFRNTChcImFmdGVyYmVnaW5cIiwgZXJyb3JNZXNzYWdlc0h0bWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXRFbGVtZW50Lmluc2VydEFkamFjZW50SFRNTChcImFmdGVyYmVnaW5cIiwgZXJyb3JNZXNzYWdlc0h0bWwpO1xuICAgIH1cblxuICAgIHRoaXMuI3ByZXR0eVByaW50UmVzcG9uc2VFcnJvck1lc3NhZ2VzKHRhcmdldEVsZW1lbnQsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZXJyb3ItYm94XCIpKTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0ge0hUTUxGb3JtRWxlbWVudH0gZm9ybUVsZW1lbnRcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZXJyb3JCb3hcbiAgICovXG4gICNwcmV0dHlQcmludFJlc3BvbnNlRXJyb3JNZXNzYWdlcyhmb3JtRWxlbWVudCwgZXJyb3JCb3gpIHtcbiAgICB0aGlzLiNyZW1vdmVBbGxQcmV2aW91c0Vycm9ycyhmb3JtRWxlbWVudCk7XG5cbiAgICAvLyBoaWdobGlnaHQgYWxsIGlucHV0IGZpZWxkcyB3aGVyZSB0aGUgdmFsaWRhdGlvbiBoYXMgZmFpbGVkXG4gICAgZXJyb3JCb3gucXVlcnlTZWxlY3RvckFsbChcImxpXCIpLmZvckVhY2goKGVycm9yTWVzc2FnZUxpbmUpID0+IHtcbiAgICAgIGxldCBlcnJvckNsYXNzID0gZXJyb3JNZXNzYWdlTGluZS5kYXRhc2V0LmVsZW1lbnQ7XG5cbiAgICAgIGlmIChlcnJvckNsYXNzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgbGV0IGVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlcnJvckNsYXNzKSB8fCBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbaWR8PVwiJyArIGVycm9yQ2xhc3MgKyAnXCJdJyk7XG5cbiAgICAgICAgaWYgKGVsZW0pIHtcbiAgICAgICAgICAvLyBNb3ZlIHRoZSBlcnJvciBtZXNzYWdlIHRvIHRoZSByZXNwb25zaWJsZSBpbnB1dCBmaWVsZChzKVxuICAgICAgICAgIC8vIGFuZCByZW1vdmUgdGhlIGxpc3QgaXRlbSBmcm9tIHRoZSBlcnJvciBib3ggY29udGFpbmVyXG4gICAgICAgICAgdGhpcy4jYWRkRXJyb3JNZXNzYWdlVG9Gb3JtRmllbGQoZWxlbVswXSwgZXJyb3JNZXNzYWdlTGluZS5pbm5lckhUTUwpO1xuICAgICAgICAgIGVycm9yTWVzc2FnZUxpbmUucmVtb3ZlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIGlmIGFsbCBsaXN0IGl0ZW1zIGhhdmUgYmVlbiByZW1vdmVkLCByZW1vdmUgdGhlIGVycm9yIGJveCBjb250YWluZXIgdG9vXG4gICAgaWYgKGVycm9yQm94LnF1ZXJ5U2VsZWN0b3JBbGwoXCJsaVwiKS5sZW5ndGggPT09IDApIHtcbiAgICAgIGVycm9yQm94LnJlbW92ZSgpO1xuICAgIH1cblxuICAgIHRoaXMuI2ZvY3VzVGFiV2l0aEZpcnN0RXJyb3JNZXNzYWdlKGZvcm1FbGVtZW50KTtcbiAgICB0aGlzLiNzY3JvbGxUb0ZpcnN0Rm9ybUVycm9yKGZvcm1FbGVtZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0hUTUxGb3JtRWxlbWVudH0gZm9ybUVsZW1lbnRcbiAgICovXG4gICNzY3JvbGxUb0ZpcnN0Rm9ybUVycm9yKGZvcm1FbGVtZW50KSB7XG4gICAgaWYgKGZvcm1FbGVtZW50LmNsb3Nlc3QoXCIubW9kYWxcIik/Lmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBmb3JtRXJyb3JzID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5pcy1pbnZhbGlkXCIpO1xuXG4gICAgaWYgKCFmb3JtRXJyb3JzIHx8IGZvcm1FcnJvcnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuI2lzRWxlbWVudEluVmlld3BvcnQoZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbnZhbGlkLWZlZWRiYWNrXCIpKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxldCBvZmZzZXRUb3AgPSBmb3JtRXJyb3JzLml0ZW0oMCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuXG4gICAgaWYgKHRoaXMuI3NldHRpbmdzLnNjcm9sbE9mZnNldEVsZW1lbnQpIHtcbiAgICAgIGNvbnN0IHNjcm9sbE9mZnNldEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuI3NldHRpbmdzLnNjcm9sbE9mZnNldEVsZW1lbnQpO1xuXG4gICAgICBpZiAoc2Nyb2xsT2Zmc2V0RWxlbWVudCkge1xuICAgICAgICBvZmZzZXRUb3AgLT0gc2Nyb2xsT2Zmc2V0RWxlbWVudC5jbGllbnRIZWlnaHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgd2luZG93LnNjcm9sbFRvKHsgdG9wOiBvZmZzZXRUb3AsIGJlaGF2aW9yOiBcInNtb290aFwiIH0pO1xuICB9XG5cbiAgI2lzRWxlbWVudEluVmlld3BvcnQoZWxlbWVudCkge1xuICAgIGNvbnN0IHNjcm9sbE9mZnNldEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuI3NldHRpbmdzLnNjcm9sbE9mZnNldEVsZW1lbnQpO1xuICAgIGxldCBvZmZzZXRUb3AgPSAwO1xuXG4gICAgaWYgKHNjcm9sbE9mZnNldEVsZW1lbnQpIHtcbiAgICAgIG9mZnNldFRvcCA9IHNjcm9sbE9mZnNldEVsZW1lbnQuY2xpZW50SGVpZ2h0O1xuICAgIH1cblxuICAgIGNvbnN0IHJlY3QgPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIHJlY3QudG9wID49IG9mZnNldFRvcCAmJlxuICAgICAgcmVjdC5sZWZ0ID49IDAgJiZcbiAgICAgIHJlY3QuYm90dG9tIDw9ICh3aW5kb3cuaW5uZXJIZWlnaHQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCkgJiZcbiAgICAgIHJlY3QucmlnaHQgPD0gKHdpbmRvdy5pbm5lcldpZHRoIHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aClcbiAgICApO1xuICB9XG59XG4iLCIvKlxuICogQ29weXJpZ2h0IChjKSBieSB0aGUgQUNQMyBEZXZlbG9wZXJzLlxuICogU2VlIHRoZSBMSUNFTlNFIGZpbGUgYXQgdGhlIHRvcC1sZXZlbCBtb2R1bGUgZGlyZWN0b3J5IGZvciBsaWNlbmNpbmcgZGV0YWlscy5cbiAqL1xuXG5pbXBvcnQgeyBBamF4Rm9ybSB9IGZyb20gXCIuLi9saWIvYWpheC1mb3JtXCI7XG5pbXBvcnQgeyBMb2FkaW5nSW5kaWNhdG9yIH0gZnJvbSBcIi4uL2xpYi9sb2FkaW5nLWluZGljYXRvclwiO1xuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gXCIuLi9saWIvZm9ybS12YWxpZGF0b3JcIjtcblxuKCgpID0+IHtcbiAgbmV3IEFqYXhGb3JtKG5ldyBMb2FkaW5nSW5kaWNhdG9yKCksIG5ldyBGb3JtVmFsaWRhdG9yKCkpO1xufSkoKTtcbiJdfQ==","file":"ajax-form.min.js"}
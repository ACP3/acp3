!function(){var e={};function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(e,"__esModule",{value:!0}),e.mergeSettings=function(e,r,a){for(var o=n(n({},e),r),i=0,l=Object.entries(a);i<l.length;i++){var s=(2,function(e){if(Array.isArray(e))return e}(h=l[i])||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),2!==r.length);n=!0);}catch(s){a=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}}(h)||function(e,r){if(e){if("string"==typeof e)return t(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,2):void 0}}(h)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=s[0],c=s[1],f=(d=u.replace("ajaxForm","")).charAt(0).toLowerCase()+d.slice(1);f.length>0&&void 0!==o[f]&&(o[f]=c)}var d,h;return o};var o={};function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r,n,a,o,i){try{var l=e[o](i),s=l.value}catch(u){return void r(u)}l.done?t(s):Promise.resolve(s).then(n,a)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){l(o,n,a,i,s,"next",e)}function s(e){l(o,n,a,i,s,"throw",e)}i(void 0)}))}}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){var r=t.get(e);if(!r)throw new TypeError("attempted to get private field on non-instance");return r.get?r.get.call(e):r.value}function f(e,t,r){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,r);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=r}return r}Object.defineProperty(o,"__esModule",{value:!0}),o.AjaxForm=void 0;var d=new WeakMap,h=new WeakMap,m=new WeakSet,p=function(){function t(r,n,a,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),m.add(this),d.set(this,{writable:!0,value:void 0}),h.set(this,{writable:!0,value:void 0}),this.element=r,this.isFormValid=!0,f(this,d,n),f(this,h,a),this._defaults={targetElement:"#content",loadingOverlay:!0,customFormData:null,scrollOffsetElement:null,method:null},this.settings=(0,e.mergeSettings)(this._defaults,o,jQuery(r).data()),function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}(this,m,v).call(this)}var r,n,a,o,l,p;return r=t,(n=[{key:"findSubmitButton",value:function(){jQuery(this.element).find(":submit").click((function(){jQuery(":submit",jQuery(this).closest("form")).removeAttr("data-clicked"),jQuery(this).attr("data-clicked","true")}))}},{key:"performAjaxRequest",value:(p=s(regeneratorRuntime.mark((function e(){var t,r,n,a,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=jQuery(this.element)).attr("method")?(n=jQuery(':submit[data-clicked="true"]',t),r=n.data("hashChange")):r=t.data("hashChange"),c(this,d).showLoadingLayer(),this.disableSubmitButton(n),e.prev=4,e.next=7,fetch(t.attr("action")||t.attr("href"),{method:t.attr("method")?t.attr("method").toUpperCase():null!==(a=null===(o=this.settings.method)||void 0===o?void 0:o.toUpperCase())&&void 0!==a?a:"GET",body:this.prepareFormData(t),headers:{"X-Requested-With":"XMLHttpRequest"}});case 7:if((i=e.sent).ok){e.next=13;break}return e.next=11,this.handleResponseError(i,t);case 11:e.next=15;break;case 13:return e.next=15,this.handleSuccessfulResponse(i,t,r);case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),console.error(e.t0);case 20:return e.prev=20,c(this,d).hideLoadingLayer(),this.enableSubmitButton(n),e.finish(20);case 24:case"end":return e.stop()}}),e,this,[[4,17,20,24]])}))),function(){return p.apply(this,arguments)})},{key:"prepareFormData",value:function(e){var t,r,n,a=this.settings.customFormData||{};if(e.attr("method")){var o=jQuery(':submit[data-clicked="true"]',e);t=new FormData(e[0]),o.length&&t.append(o.attr("name"),"1")}else t=new FormData;for(var l=0,s=Object.entries(a);l<s.length;l++){var u=(r=s[l],n=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(s){a=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(a)throw o}}return r}}(r,n)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=u[0],f=u[1];t.append(c,f)}return t}},{key:"handleResponseError",value:(l=s(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.clone().text();case 2:n=e.sent,400===t.status?(c(this,h).handleFormErrorMessages(r,n),jQuery(document).trigger("acp3.ajaxFrom.submit.fail",[this])):n.length>0&&(document.open(),document.write(n),document.close());case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return l.apply(this,arguments)})},{key:"handleSuccessfulResponse",value:(o=s(regeneratorRuntime.mark((function e(t,r,n){var a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.decodeResponse(t);case 2:a=e.sent,o=r.data("ajax-form-complete-callback"),"function"==typeof window[o]?window[o](a):a.redirect_url?this.redirectToNewPage(n,a):(this.scrollIntoView(),this.replaceContent(n,a),this.rebindHandlers(n),jQuery(document).trigger("acp3.ajaxFrom.complete"),void 0!==n&&(window.location.hash=n));case 5:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return o.apply(this,arguments)})},{key:"addLoadingLayer",value:function(){!1!==this.settings.loadingOverlay&&c(this,d).addLoadingLayer()}},{key:"disableSubmitButton",value:function(e){void 0!==e&&e.prop("disabled",!0)}},{key:"enableSubmitButton",value:function(e){void 0!==e&&e.prop("disabled",!1)}},{key:"decodeResponse",value:(a=s(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.clone().json();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.next=10,t.clone().text();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,null,[[0,6]])}))),function(e){return a.apply(this,arguments)})},{key:"redirectToNewPage",value:function(e,t){void 0!==e?(window.location.href=t.redirect_url+e,window.location.reload()):window.location.href=t.redirect_url}},{key:"scrollIntoView",value:function(){var e=jQuery(this.settings.targetElement).offset().top;jQuery(document).scrollTop()>e&&jQuery("html, body").animate({scrollTop:e},"fast")}},{key:"replaceContent",value:function(e,t){e&&jQuery(e).length?jQuery(e).html(jQuery(t).find(e).html()):jQuery(this.settings.targetElement).html(t)}},{key:"rebindHandlers",value:function(e){(e&&jQuery(e).length?jQuery(e):jQuery(this.settings.targetElement)).find('[data-ajax-form="true"]').formSubmit(),this.findSubmitButton()}}])&&u(r.prototype,n),t}();o.AjaxForm=p;var v=function(){var e=this,t=this;this.findSubmitButton(),c(this,d).addLoadingLayer(),this.element.noValidate=!0,jQuery(this.element).on("submit",(function(t){t.preventDefault(),c(e,h).setFormAsValid(),jQuery(document).trigger("acp3.ajaxFrom.submit.before",[e]),c(e,h).isFormValid&&c(e,h).preValidateForm(e.element)&&e.performAjaxRequest()})).on("click",(function(e){"A"===jQuery(this).prop("tagName")&&(e.preventDefault(),t.performAjaxRequest())})).on("change",(function(){!1===c(e,h).isFormValid&&(c(e,h).removeAllPreviousErrors(),c(e,h).checkFormElementsForErrors(e.element))}))},y={};function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}function w(e,t){var r=t.get(e);if(!r)throw new TypeError("attempted to get private field on non-instance");return r.get?r.get.call(e):r.value}Object.defineProperty(y,"__esModule",{value:!0}),y.LoadingLayer=void 0;var j=new WeakMap,k=new WeakSet,E=function(){function t(r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),k.add(this),j.set(this,{writable:!0,value:{loadingText:""}}),function(e,t,r){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,r);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=r}}(this,j,(0,e.mergeSettings)(w(this,j),n,jQuery(r).data()||{}))}var r,n;return r=t,(n=[{key:"addLoadingLayer",value:function(){var e;if(0===(null===(e=document.getElementById("loading-layer"))||void 0===e?void 0:e.length)){var t=jQuery("body"),r='<div id="loading-layer" class="loading-layer"><h1><span class="fas fa-spinner fa-spin"></span> '+w(this,j).loadingText+"</h1></div>";jQuery(r).appendTo(t)}}},{key:"showLoadingLayer",value:function(){b(this,k,S).call(this,!0)}},{key:"hideLoadingLayer",value:function(){b(this,k,S).call(this,!1)}}])&&g(r.prototype,n),t}();y.LoadingLayer=E;var S=function(e){var t;null===(t=document.getElementById("loading-layer"))||void 0===t||t.classList.toggle("loading-layer__active",e)},Q={};function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function A(e,t,r){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,r);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=r}return r}function F(e,t){var r=t.get(e);if(!r)throw new TypeError("attempted to get private field on non-instance");return r.get?r.get.call(e):r.value}function T(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return r}Object.defineProperty(Q,"__esModule",{value:!0}),Q.FormValidator=void 0;var L=new WeakMap,P=new WeakSet,R=new WeakSet,C=new WeakSet,_=new WeakSet,W=new WeakSet,I=new WeakSet,M=new WeakSet,V=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),M.add(this),I.add(this),W.add(this),_.add(this),C.add(this),R.add(this),P.add(this),L.set(this,{writable:!0,value:!0})}var t,r;return t=e,(r=[{key:"preValidateForm",value:function(e){return this.removeAllPreviousErrors(),this.checkFormElementsForErrors(e),T(this,_,q).call(this),T(this,I,$).call(this),F(this,L)}},{key:"removeAllPreviousErrors",value:function(){jQuery("form .form-group.has-error").removeClass("has-error").find(".validation-failed").remove()}},{key:"checkFormElementsForErrors",value:function(e){var t,r=function(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return O(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw o}}}}(e.elements);try{for(r.s();!(t=r.n()).done;){var n=t.value;"INPUT"!==n.nodeName&&"TEXTAREA"!==n.nodeName&&"SELECT"!==n.nodeName||n.checkValidity()||(T(this,P,B).call(this,jQuery(n)),T(this,C,U).call(this,jQuery(n),n.validationMessage),A(this,L,!1))}}catch(a){r.e(a)}finally{r.f()}}},{key:"setFormAsValid",value:function(){A(this,L,!0)}},{key:"handleFormErrorMessages",value:function(e,t){var r=jQuery("#error-box"),n=e.find(".modal-body");r.remove(),(r=jQuery(t)).hide().prependTo(n.length>0&&n.is(":visible")?n:e).fadeIn(),T(this,W,H).call(this,e,r)}},{key:"isFormValid",get:function(){return F(this,L)}}])&&x(t.prototype,r),e}();Q.FormValidator=V;var D,B=function(e){e.closest(".form-group").addClass("has-error")},N=function(e){e.closest("div").find(".validation-failed").remove()},U=function(e,t){T(this,R,N).call(this,e),e.closest("div:not(.input-group):not(.btn-group)").append('<small class="help-block validation-failed"><i class="fas fa-exclamation-circle"></i> '+t+"</small>")},q=function(){if(jQuery(".tabbable").length>0){var e=jQuery(".tabbable .form-group.has-error:first"),t=e.closest(".tab-pane").prop("id");jQuery('.tabbable .nav-tabs a[href="#'+t+'"]').tab("show"),e.find(":input").focus()}},H=function(e,t){var r=this;this.removeAllPreviousErrors(),t.find("li").each((function(t,n){var a=jQuery(n),o=a.data("error");if(o.length>0){var i=e.find("#"+o)||e.find('[id|="'+o+'"]').filter(':not([id$="container"])');i.length>0&&(T(r,P,B).call(r,i),1===i.length&&(T(r,C,U).call(r,i,a.html()),a.remove()))}})),0===t.find("li").length&&t.remove(),T(this,_,q).call(this),T(this,I,$).call(this)},$=function(){var e=jQuery(this.element),t=e.find(".form-group.has-error");if(!(e.closest(".modal").length>0)&&t&&0!==t.length&&!T(this,M,X).call(this,e.find(".help-block.validation-failed"))){var r=t.offset().top;if(this.settings.scrollOffsetElement){var n=jQuery(this.settings.scrollOffsetElement);n&&n.length>0&&(r-=n.height())}jQuery("html, body").animate({scrollTop:r},"fast")}},X=function(e){"function"==typeof jQuery&&e instanceof jQuery&&(e=e[0]);var t=jQuery(this.settings.scrollOffsetElement),r=0;t&&(r=t.height());var n=e.getBoundingClientRect();return n.top>=r&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth)};(D=jQuery).fn.formSubmit=function(e){return this.each((function(){D.data(this,"plugin_formSubmit")||D.data(this,"plugin_formSubmit",new o.AjaxForm(this,new y.LoadingLayer(this,e),new Q.FormValidator,e))}))},D('[data-ajax-form="true"]').formSubmit(),D(document).on("draw.dt",(function(e){D(e.target).find('[data-ajax-form="true"]').formSubmit()}))}();
//# sourceMappingURL=ajax-form.min.js.map

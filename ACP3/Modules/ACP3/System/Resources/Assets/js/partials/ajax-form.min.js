!function(){var e={};Object.defineProperty(e,"__esModule",{value:!0}),e.mergeSettings=function(e,t,i){const r={...e,...t};if(!i)return r;for(let[a,s]of Object.entries(i)){const e=(o=a.replace("ajaxForm","")).charAt(0).toLowerCase()+o.slice(1);if(e.length>0&&void 0!==r[e])try{r[e]=JSON.parse(s)}catch(n){r[e]=s}}var o;return r};var t={};function i(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}Object.defineProperty(t,"__esModule",{value:!0}),t.AjaxForm=void 0;var r=0;function o(e){return"__private_"+r+++"_"+e}var n=o("element"),a=o("loadingLayer"),s=o("formValidator"),l=o("defaults"),c=o("settings"),d=o("init"),u=o("findSubmitButton"),h=o("prepareFormData"),m=o("handleResponseError"),f=o("handleSuccessfulResponse"),v=o("addLoadingLayer"),p=o("disableSubmitButton"),y=o("enableSubmitButton"),b=o("decodeResponse"),g=o("redirectToNewPage"),w=o("scrollIntoView"),j=o("replaceContent");function E(){i(this,u)[u](),i(this,v)[v](),"A"===i(this,n)[n].nodeName?i(this,n)[n].addEventListener("click",async()=>{await this.performAjaxRequest()}):(i(this,n)[n].noValidate=!0,i(this,n)[n].addEventListener("submit",async e=>{e.preventDefault(),i(this,s)[s].setFormAsValid(),document.dispatchEvent(new CustomEvent("acp3.ajaxFrom.submit.before",{detail:this})),i(this,s)[s].isFormValid&&i(this,s)[s].preValidateForm()&&await this.performAjaxRequest()}),i(this,n)[n].addEventListener("change",()=>{!1===i(this,s)[s].isFormValid&&i(this,s)[s].checkFormElementsForErrors()}))}function O(){i(this,n)[n].querySelectorAll("[type=submit]").forEach(e=>{e.addEventListener("click",()=>{i(this,n)[n].querySelectorAll("[type=submit]").forEach(e=>{delete e.dataset.clicked}),e.dataset.clicked="true"})})}function L(e){const t=i(this,n)[n],r=i(this,c)[c].customFormData||{};let o;t.getAttribute("method")?(o=new FormData(t),e&&o.append(e.getAttribute("name"),"1")):o=new FormData;for(let[i,n]of Object.entries(r))o.append(i,n);return o}async function P(e){const t=await e.clone().text();400===e.status?(i(this,s)[s].handleFormErrorMessages(i(this,n)[n],t),document.dispatchEvent(new CustomEvent("acp3.ajaxFrom.submit.fail",{detail:this}))):t.length>0&&(document.open(),document.write(t),document.close())}async function F(e,t){const r=await i(this,b)[b](e);"function"==typeof window[i(this,c)[c].completeCallback]?window[i(this,c)[c].completeCallback](r):r.redirect_url?i(this,g)[g](t,r):(i(this,j)[j](t,r),i(this,w)[w](t),void 0!==t&&(window.location.hash=t),document.dispatchEvent(new CustomEvent("acp3.ajaxFrom.complete")))}function S(){!1!==i(this,c)[c].loadingOverlay&&i(this,a)[a].addLoadingLayer()}function A(e){e&&(e.disabled=!0)}function _(e){e&&(e.disabled=!1)}async function q(e){try{return await e.clone().json()}catch(t){return await e.clone().text()}}function T(e,t){void 0!==e?(window.location.href=t.redirect_url+e,window.location.reload()):window.location.href=t.redirect_url}function M(e){setTimeout(()=>{if(e){const t=document.querySelector('[data-hash-change="'.concat(e,'"]'));window.scrollTo({top:t.getBoundingClientRect().y,behavior:"smooth"})}else{const e=document.querySelector(i(this,c)[c].targetElement).getBoundingClientRect().y;document.scrollTop>e&&window.scrollTo({top:e,behavior:"smooth"})}})}function x(e,t){if(e&&document.querySelector(e)){const i=(new DOMParser).parseFromString(t,"text/html");document.querySelector(e).innerHTML=i.querySelector(e).innerHTML}else document.querySelector(i(this,c)[c].targetElement).innerHTML=t}t.AjaxForm=class{constructor(t,r,o,k={}){Object.defineProperty(this,j,{value:x}),Object.defineProperty(this,w,{value:M}),Object.defineProperty(this,g,{value:T}),Object.defineProperty(this,b,{value:q}),Object.defineProperty(this,y,{value:_}),Object.defineProperty(this,p,{value:A}),Object.defineProperty(this,v,{value:S}),Object.defineProperty(this,f,{value:F}),Object.defineProperty(this,m,{value:P}),Object.defineProperty(this,h,{value:L}),Object.defineProperty(this,u,{value:O}),Object.defineProperty(this,d,{value:E}),Object.defineProperty(this,n,{writable:!0,value:void 0}),Object.defineProperty(this,a,{writable:!0,value:void 0}),Object.defineProperty(this,s,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:{completeCallback:null,targetElement:"#content",loadingOverlay:!0,customFormData:null,method:null}}),Object.defineProperty(this,c,{writable:!0,value:void 0}),i(this,n)[n]=t,this.isFormValid=!0,i(this,a)[a]=r,i(this,s)[s]=o,i(this,c)[c]=(0,e.mergeSettings)(i(this,l)[l],k,t.dataset),i(this,d)[d]()}async performAjaxRequest(){const e=i(this,n)[n];let t,r;var o;t=i(this,n)[n].getAttribute("method")?null===(o=r=i(this,n)[n].querySelector('[type="submit"][data-clicked="true"]'))||void 0===o?void 0:o.dataset.hashChange:e.dataset.hashChange,i(this,a)[a].showLoadingLayer(),i(this,p)[p](r);try{var s,l,d,u;const o=null!==(s=null!==(l=null===(d=e.getAttribute("method"))||void 0===d?void 0:d.toUpperCase())&&void 0!==l?l:null===(u=i(this,c)[c].method)||void 0===u?void 0:u.toUpperCase())&&void 0!==s?s:"GET",n=await fetch(e.getAttribute("action")||e.getAttribute("href"),{method:o,body:"GET"!==o?i(this,h)[h](r):null,headers:{"X-Requested-With":"XMLHttpRequest"}});n.ok?await i(this,f)[f](n,t):await i(this,m)[m](n)}catch(v){console.error(v)}finally{i(this,a)[a].hideLoadingLayer(),i(this,y)[y](r)}}};var k={};function C(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}Object.defineProperty(k,"__esModule",{value:!0}),k.LoadingLayer=void 0;var V=0;function R(e){return"__private_"+V+++"_"+e}var H=R("options"),B=R("toggleLoadingLayer");function I(e){var t;null===(t=document.getElementById("loading-layer"))||void 0===t||t.classList.toggle("loading-layer__active",e)}k.LoadingLayer=class{constructor(t,i={}){Object.defineProperty(this,B,{value:I}),Object.defineProperty(this,H,{writable:!0,value:{loadingText:""}}),C(this,H)[H]=(0,e.mergeSettings)(C(this,H)[H],i,t.dataset||{})}addLoadingLayer(){if(!document.getElementById("loading-layer")){const e=document.querySelector("body"),t='<div id="loading-layer" class="loading-layer"><h1><svg class="svg-icon svg-icon__spinner svg-icon--spin" fill="currentColor"><use xlink:href="'+JSON.parse(e.dataset.svgIcons).loadingLayerIcon+'"></use></svg> '+C(this,H)[H].loadingText+"</h1></div>";e.insertAdjacentHTML("beforeend",t)}}showLoadingLayer(){C(this,B)[B](!0)}hideLoadingLayer(){C(this,B)[B](!1)}};var N={};function D(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}Object.defineProperty(N,"__esModule",{value:!0}),N.FormValidator=void 0;var W=0;function U(e){return"__private_"+W+++"_"+e}var X,G=U("isFormValid"),J=U("defaults"),Q=U("settings"),z=U("formElement"),K=U("removeAllPreviousErrors"),Y=U("removeErrorMessageFromFormField"),Z=U("addErrorMessageToFormField"),$=U("focusTabWithFirstErrorMessage"),ee=U("prettyPrintResponseErrorMessages"),te=U("scrollToFirstFormError"),ie=U("isElementInViewport");function re(){D(this,z)[z].querySelectorAll(".is-invalid").forEach(e=>{e.classList.remove("is-invalid")})}function oe(e){var t,i;null===(t=e.closest("div"))||void 0===t||null===(i=t.querySelector(".invalid-feedback"))||void 0===i||i.remove()}function ne(e,t){D(this,Y)[Y](e),e.classList.add("is-invalid"),e.closest("div:not(.input-group):not(.btn-group)").insertAdjacentHTML("beforeend",'<div class="invalid-feedback">'.concat(t,"</div>"))}function ae(){if(!D(this,z)[z].querySelector(".nav-tabs"))return;const e=D(this,z)[z].querySelector(".is-invalid");if(!e)return;const t=e.closest(".tab-pane").getAttribute("id");D(this,z)[z].querySelector('.nav-tabs a[href="#'+t+'"]').click(),e.focus()}function se(e,t){D(this,K)[K](),t.querySelectorAll("li").forEach(t=>{let i=t.dataset.element;if(i.length>0){let r=document.getElementById(i)||e.querySelector('[id|="'+i+'"]');r&&(D(this,Z)[Z](r[0],t.innerHTML),t.remove())}}),0===t.querySelectorAll("li").length&&t.remove(),D(this,$)[$](),D(this,te)[te]()}function le(){var e;if((null===(e=D(this,z)[z].closest(".modal"))||void 0===e?void 0:e.length)>0)return;const t=D(this,z)[z].querySelectorAll(".is-invalid");if(!t||0===t.length)return;if(D(this,ie)[ie](D(this,z)[z].querySelector(".invalid-feedback")))return;let i=t.item(0).getBoundingClientRect().top;if(D(this,Q)[Q].scrollOffsetElement){const e=document.querySelector(D(this,Q)[Q].scrollOffsetElement);e&&(i-=e.clientHeight)}window.scrollTo({top:i,behavior:"smooth"})}function ce(e){const t=document.querySelector(D(this,Q)[Q].scrollOffsetElement);let i=0;t&&(i=t.clientHeight);const r=e.getBoundingClientRect();return r.top>=i&&r.left>=0&&r.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&r.right<=(window.innerWidth||document.documentElement.clientWidth)}N.FormValidator=class{constructor(t,i={}){Object.defineProperty(this,ie,{value:ce}),Object.defineProperty(this,te,{value:le}),Object.defineProperty(this,ee,{value:se}),Object.defineProperty(this,$,{value:ae}),Object.defineProperty(this,Z,{value:ne}),Object.defineProperty(this,Y,{value:oe}),Object.defineProperty(this,K,{value:re}),Object.defineProperty(this,G,{writable:!0,value:!0}),Object.defineProperty(this,J,{writable:!0,value:{scrollOffsetElement:null}}),Object.defineProperty(this,Q,{writable:!0,value:void 0}),Object.defineProperty(this,z,{writable:!0,value:void 0}),D(this,Q)[Q]=(0,e.mergeSettings)(D(this,J)[J],i,t.dataset),D(this,z)[z]=t}preValidateForm(){return this.checkFormElementsForErrors(),D(this,$)[$](),D(this,te)[te](),D(this,G)[G]}checkFormElementsForErrors(){D(this,K)[K]();for(const e of D(this,z)[z].elements)"INPUT"!==e.nodeName&&"TEXTAREA"!==e.nodeName&&"SELECT"!==e.nodeName||e.checkValidity()||(D(this,Z)[Z](e,e.validationMessage),D(this,G)[G]=!1)}get isFormValid(){return D(this,G)[G]}setFormAsValid(){D(this,G)[G]=!0}handleFormErrorMessages(e,t){var i;const r=e.querySelector(".modal-body");null===(i=document.getElementById("error-box"))||void 0===i||i.remove(),r?r.insertAdjacentHTML("afterbegin",t):e.insertAdjacentHTML("afterbegin",t),D(this,ee)[ee](e,document.getElementById("error-box"))}},(X=jQuery).fn.formSubmit=function(e){return this.each((function(){X.data(this,"plugin_formSubmit")||X.data(this,"plugin_formSubmit",new t.AjaxForm(this,new k.LoadingLayer(this,e),new N.FormValidator(this,e),e))}))},X('[data-ajax-form="true"]').formSubmit(),X(document).on("draw.dt",e=>{X(e.target).find('[data-ajax-form="true"]').formSubmit()})}();
//# sourceMappingURL=ajax-form.min.js.map

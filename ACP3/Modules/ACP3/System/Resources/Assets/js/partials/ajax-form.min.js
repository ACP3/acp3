!function(){var e={};function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(e,"__esModule",{value:!0}),e.mergeSettings=function(e,r,o){for(var i=n(n({},e),r),a=0,u=Object.entries(o);a<u.length;a++){var l=(2,function(e){if(Array.isArray(e))return e}(h=u[a])||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),2!==i.length);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(h)||function(e,r){if(e){if("string"==typeof e)return t(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,2):void 0}}(h)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=l[0],c=l[1],f=(d=s.replace("ajaxForm","")).charAt(0).toLowerCase()+d.slice(1);f.length>0&&void 0!==i[f]&&(i[f]=c)}var d,h;return i};var i={};function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t,r,n,o,i,a){try{var u=e[i](a),l=u.value}catch(s){return void r(s)}u.done?t(l):Promise.resolve(l).then(n,o)}function l(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){u(i,n,o,a,l,"next",e)}function l(e){u(i,n,o,a,l,"throw",e)}a(void 0)}))}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}Object.defineProperty(i,"__esModule",{value:!0}),i.AjaxForm=void 0;var f=0;function d(e){return"__private_"+f+++"_"+e}var h=d("loadingLayer"),p=d("formValidator"),m=d("defaults"),v=d("settings"),y=d("init"),b=d("findSubmitButton"),g=d("prepareFormData"),j=d("handleResponseError"),w=d("handleSuccessfulResponse"),O=d("addLoadingLayer"),P=d("disableSubmitButton"),E=d("enableSubmitButton"),x=d("decodeResponse"),k=d("redirectToNewPage"),F=d("scrollIntoView"),Q=d("replaceContent"),S=d("rebindHandlers"),A=function(){function t(r,n,o,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Object.defineProperty(this,S,{value:$}),Object.defineProperty(this,Q,{value:W}),Object.defineProperty(this,F,{value:H}),Object.defineProperty(this,k,{value:U}),Object.defineProperty(this,x,{value:N}),Object.defineProperty(this,E,{value:B}),Object.defineProperty(this,P,{value:q}),Object.defineProperty(this,O,{value:D}),Object.defineProperty(this,w,{value:M}),Object.defineProperty(this,j,{value:V}),Object.defineProperty(this,g,{value:I}),Object.defineProperty(this,b,{value:C}),Object.defineProperty(this,y,{value:R}),Object.defineProperty(this,h,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:{completeCallback:null,targetElement:"#content",loadingOverlay:!0,customFormData:null,method:null}}),Object.defineProperty(this,v,{writable:!0,value:void 0}),this.element=r,this.isFormValid=!0,c(this,h)[h]=n,c(this,p)[p]=o,c(this,v)[v]=(0,e.mergeSettings)(c(this,m)[m],i,jQuery(r).data()),c(this,y)[y]()}var r,n,o;return r=t,(n=[{key:"performAjaxRequest",value:(o=l(regeneratorRuntime.mark((function e(){var t,r,n,o,i,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=jQuery(this.element)).attr("method")?(n=jQuery(':submit[data-clicked="true"]',t),r=n.data("hashChange")):r=t.data("hashChange"),c(this,h)[h].showLoadingLayer(),c(this,P)[P](n),e.prev=4,a=t.attr("method")?t.attr("method").toUpperCase():null!==(o=null===(i=c(this,v)[v].method)||void 0===i?void 0:i.toUpperCase())&&void 0!==o?o:"GET",e.next=8,fetch(t.attr("action")||t.attr("href"),{method:a,body:"GET"!==a?c(this,g)[g](t):null,headers:{"X-Requested-With":"XMLHttpRequest"}});case 8:if((u=e.sent).ok){e.next=14;break}return e.next=12,c(this,j)[j](u,t);case 12:e.next=16;break;case 14:return e.next=16,c(this,w)[w](u,t,r);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(4),console.error(e.t0);case 21:return e.prev=21,c(this,h)[h].hideLoadingLayer(),c(this,E)[E](n),e.finish(21);case 25:case"end":return e.stop()}}),e,this,[[4,18,21,25]])}))),function(){return o.apply(this,arguments)})}])&&s(r.prototype,n),t}();i.AjaxForm=A;var _,L,T,R=function(){var e,t,r=this,n=this;c(this,b)[b](),c(this,O)[O](),this.element.noValidate=!0,jQuery(this.element).on("submit",(t=l(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c(r,p)[p].setFormAsValid(),jQuery(document).trigger("acp3.ajaxFrom.submit.before",[r]),!c(r,p)[p].isFormValid||!c(r,p)[p].preValidateForm()){e.next=6;break}return e.next=6,r.performAjaxRequest();case 6:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)})).on("click",(e=l(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("A"!==jQuery(this).prop("tagName")){e.next=4;break}return t.preventDefault(),e.next=4,n.performAjaxRequest();case 4:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})).on("change",(function(){!1===c(r,p)[p].isFormValid&&c(r,p)[p].checkFormElementsForErrors()}))},C=function(){jQuery(this.element).find(":submit").click((function(){jQuery(":submit",jQuery(this).closest("form")).removeAttr("data-clicked"),jQuery(this).attr("data-clicked","true")}))},I=function(e){var t,r,n,o=c(this,v)[v].customFormData||{};if(e.attr("method")){var i=jQuery(':submit[data-clicked="true"]',e);t=new FormData(e[0]),i.length&&t.append(i.attr("name"),"1")}else t=new FormData;for(var u=0,l=Object.entries(o);u<l.length;u++){var s=(r=l[u],n=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(l){u=!0,o=l}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(r,n)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=s[0],d=s[1];t.append(f,d)}return t},V=(T=l(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.clone().text();case 2:n=e.sent,400===t.status?(c(this,p)[p].handleFormErrorMessages(r,n),jQuery(document).trigger("acp3.ajaxFrom.submit.fail",[this])):n.length>0&&(document.open(),document.write(n),document.close());case 4:case"end":return e.stop()}}),e,this)}))),function(e,t){return T.apply(this,arguments)}),M=(L=l(regeneratorRuntime.mark((function e(t,r,n){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(this,x)[x](t);case 2:o=e.sent,"function"==typeof window[c(this,v)[v].completeCallback]?window[c(this,v)[v].completeCallback](o):o.redirect_url?c(this,k)[k](n,o):(c(this,Q)[Q](n,o),c(this,S)[S](n),c(this,F)[F](n),void 0!==n&&(window.location.hash=n),jQuery(document).trigger("acp3.ajaxFrom.complete"));case 4:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return L.apply(this,arguments)}),D=function(){!1!==c(this,v)[v].loadingOverlay&&c(this,h)[h].addLoadingLayer()},q=function(e){void 0!==e&&e.prop("disabled",!0)},B=function(e){void 0!==e&&e.prop("disabled",!1)},N=(_=l(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.clone().json();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.next=10,t.clone().text();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,null,[[0,6]])}))),function(e){return _.apply(this,arguments)}),U=function(e,t){void 0!==e?(window.location.href=t.redirect_url+e,window.location.reload()):window.location.href=t.redirect_url},H=function(e){var t=this;setTimeout((function(){if(e){var r=document.querySelector('[data-hash-change="'.concat(e,'"]'));window.scrollTo({top:r.getBoundingClientRect().y,behavior:"smooth"})}else{var n=document.querySelector(c(t,v)[v].targetElement).getBoundingClientRect().y;jQuery(document).scrollTop()>n&&window.scrollTo({top:n,behavior:"smooth"})}}))},W=function(e,t){e&&jQuery(e).length?jQuery(e).html(jQuery(t).find(e).html()):jQuery(c(this,v)[v].targetElement).html(t)},$=function(e){(e&&jQuery(e).length?jQuery(e):jQuery(c(this,v)[v].targetElement)).find('[data-ajax-form="true"]').formSubmit(),c(this,b)[b]()},G={};function X(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function z(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}Object.defineProperty(G,"__esModule",{value:!0}),G.LoadingLayer=void 0;var J=0;function K(e){return"__private_"+J+++"_"+e}var Y=K("options"),Z=K("toggleLoadingLayer"),ee=function(){function t(r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Object.defineProperty(this,Z,{value:te}),Object.defineProperty(this,Y,{writable:!0,value:{loadingText:""}}),z(this,Y)[Y]=(0,e.mergeSettings)(z(this,Y)[Y],n,jQuery(r).data()||{})}var r,n;return r=t,(n=[{key:"addLoadingLayer",value:function(){if(!document.getElementById("loading-layer")){var e=jQuery("body"),t='<div id="loading-layer" class="loading-layer"><h1><svg class="svg-icon svg-icon__spinner svg-icon--spin" fill="currentColor"><use xlink:href="'+e.data("svgIcons").loadingLayerIcon+'"></use></svg> '+z(this,Y)[Y].loadingText+"</h1></div>";jQuery(t).appendTo(e)}}},{key:"showLoadingLayer",value:function(){z(this,Z)[Z](!0)}},{key:"hideLoadingLayer",value:function(){z(this,Z)[Z](!1)}}])&&X(r.prototype,n),t}();G.LoadingLayer=ee;var te=function(e){var t;null===(t=document.getElementById("loading-layer"))||void 0===t||t.classList.toggle("loading-layer__active",e)},re={};function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ie(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}Object.defineProperty(re,"__esModule",{value:!0}),re.FormValidator=void 0;var ae=0;function ue(e){return"__private_"+ae+++"_"+e}var le=ue("isFormValid"),se=ue("defaults"),ce=ue("settings"),fe=ue("formElement"),de=ue("removeAllPreviousErrors"),he=ue("addErrorDecorationToFormGroup"),pe=ue("removeErrorMessageFromFormField"),me=ue("addErrorMessageToFormField"),ve=ue("focusTabWithFirstErrorMessage"),ye=ue("prettyPrintResponseErrorMessages"),be=ue("scrollToFirstFormError"),ge=ue("isElementInViewport"),je=function(){function t(r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Object.defineProperty(this,ge,{value:Se}),Object.defineProperty(this,be,{value:Qe}),Object.defineProperty(this,ye,{value:Fe}),Object.defineProperty(this,ve,{value:ke}),Object.defineProperty(this,me,{value:xe}),Object.defineProperty(this,pe,{value:Ee}),Object.defineProperty(this,he,{value:Pe}),Object.defineProperty(this,de,{value:Oe}),Object.defineProperty(this,le,{writable:!0,value:!0}),Object.defineProperty(this,se,{writable:!0,value:{scrollOffsetElement:null}}),Object.defineProperty(this,ce,{writable:!0,value:void 0}),Object.defineProperty(this,fe,{writable:!0,value:void 0}),ie(this,ce)[ce]=(0,e.mergeSettings)(ie(this,se)[se],n,jQuery(r).data()),ie(this,fe)[fe]=r}var r,n;return r=t,(n=[{key:"preValidateForm",value:function(){return this.checkFormElementsForErrors(),ie(this,ve)[ve](),ie(this,be)[be](),ie(this,le)[le]}},{key:"checkFormElementsForErrors",value:function(){ie(this,de)[de]();var e,t=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ne(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ne(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}(ie(this,fe)[fe].elements);try{for(t.s();!(e=t.n()).done;){var r=e.value;"INPUT"!==r.nodeName&&"TEXTAREA"!==r.nodeName&&"SELECT"!==r.nodeName||r.checkValidity()||(ie(this,he)[he](r),ie(this,me)[me](jQuery(r),r.validationMessage),ie(this,le)[le]=!1)}}catch(n){t.e(n)}finally{t.f()}}},{key:"isFormValid",get:function(){return ie(this,le)[le]}},{key:"setFormAsValid",value:function(){ie(this,le)[le]=!0}},{key:"handleFormErrorMessages",value:function(e,t){var r=jQuery("#error-box"),n=e.find(".modal-body");r.remove(),(r=jQuery(t)).hide().prependTo(n.length>0&&n.is(":visible")?n:e).fadeIn(),ie(this,ye)[ye](e,r)}}])&&oe(r.prototype,n),t}();re.FormValidator=je;var we,Oe=function(){var e=jQuery(ie(this,fe)[fe]);e.find(".form-group.has-error").removeClass("has-error"),e.find(".validation-failed").remove()},Pe=function(e){var t;null===(t=e.closest(".form-group"))||void 0===t||t.classList.add("has-error")},Ee=function(e){var t,r=null===(t=e.closest("div"))||void 0===t?void 0:t.querySelector(".validation-failed");null==r||r.parentElement.removeChild(r)},xe=function(e,t){ie(this,pe)[pe](e[0]);var r=jQuery("body").data("svgIcons");e.closest("div:not(.input-group):not(.btn-group)").append('<small class="help-block validation-failed"><svg class="svg-icon svg-icon__exclamation-circle" fill="currentColor"><use xlink:href="'.concat(r.validationFailedIcon,'"></use></svg> ').concat(t,"</small>"))},ke=function(){if(jQuery(".tabbable").length>0){var e=jQuery(".tabbable .form-group.has-error:first"),t=e.closest(".tab-pane").prop("id");jQuery('.tabbable .nav-tabs a[href="#'+t+'"]').tab("show"),e.find(":input").focus()}},Fe=function(e,t){var r=this;ie(this,de)[de](),t.find("li").each((function(t,n){var o=jQuery(n),i=o.data("error");if(i.length>0){var a=e.find("#"+i)||e.find('[id|="'+i+'"]').filter(':not([id$="container"])');a.length>0&&(ie(r,he)[he](a[0]),1===a.length&&(ie(r,me)[me](a,o.html()),o.remove()))}})),0===t.find("li").length&&t.remove(),ie(this,ve)[ve](),ie(this,be)[be]()},Qe=function(){var e=jQuery(ie(this,fe)[fe]),t=e.find(".form-group.has-error");if(!(e.closest(".modal").length>0)&&t&&0!==t.length&&!ie(this,ge)[ge](e.find(".help-block.validation-failed"))){var r=t.offset().top;if(ie(this,ce)[ce].scrollOffsetElement){var n=jQuery(ie(this,ce)[ce].scrollOffsetElement);n&&n.length>0&&(r-=n.height())}window.scrollTo({top:r,behavior:"smooth"})}},Se=function(e){"function"==typeof jQuery&&e instanceof jQuery&&(e=e[0]);var t=jQuery(ie(this,ce)[ce].scrollOffsetElement),r=0;t&&(r=t.height());var n=e.getBoundingClientRect();return n.top>=r&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth)};(we=jQuery).fn.formSubmit=function(e){return this.each((function(){we.data(this,"plugin_formSubmit")||we.data(this,"plugin_formSubmit",new i.AjaxForm(this,new G.LoadingLayer(this,e),new re.FormValidator(this,e),e))}))},we('[data-ajax-form="true"]').formSubmit(),we(document).on("draw.dt",(function(e){we(e.target).find('[data-ajax-form="true"]').formSubmit()}))}();
//# sourceMappingURL=ajax-form.min.js.map

!function(){var e={};function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(e,"__esModule",{value:!0}),e.mergeSettings=function(e,r,i){var o,a,l=n(n({},e),r);if(!i)return l;for(var u=0,s=Object.entries(i);u<s.length;u++){var c=(2,function(e){if(Array.isArray(e))return e}(a=s[u])||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),2!==o.length);a=!0);}catch(u){l=!0,i=u}finally{try{a||null==r.return||r.return()}finally{if(l)throw i}}return o}}(a)||function(e,r){if(e){if("string"==typeof e)return t(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,2):void 0}}(a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=c[0],f=c[1],h=(o=d.replace("ajaxForm","")).charAt(0).toLowerCase()+o.slice(1);h.length>0&&void 0!==l[h]&&(l[h]=f)}return l};var o={};function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t,r,n,i,o,a){try{var l=e[o](a),u=l.value}catch(s){return void r(s)}l.done?t(u):Promise.resolve(u).then(n,i)}function u(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){l(o,n,i,a,u,"next",e)}function u(e){l(o,n,i,a,u,"throw",e)}a(void 0)}))}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}Object.defineProperty(o,"__esModule",{value:!0}),o.AjaxForm=void 0;var d=0;function f(e){return"__private_"+d+++"_"+e}var h=f("element"),v=f("loadingLayer"),m=f("formValidator"),p=f("defaults"),y=f("settings"),b=f("init"),g=f("findSubmitButton"),w=f("prepareFormData"),j=f("handleResponseError"),O=f("handleSuccessfulResponse"),E=f("addLoadingLayer"),P=f("disableSubmitButton"),S=f("enableSubmitButton"),A=f("decodeResponse"),x=f("redirectToNewPage"),L=f("scrollIntoView"),k=f("replaceContent"),F=function(){function t(r,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Object.defineProperty(this,k,{value:X}),Object.defineProperty(this,L,{value:W}),Object.defineProperty(this,x,{value:U}),Object.defineProperty(this,A,{value:D}),Object.defineProperty(this,S,{value:B}),Object.defineProperty(this,P,{value:H}),Object.defineProperty(this,E,{value:V}),Object.defineProperty(this,O,{value:M}),Object.defineProperty(this,j,{value:R}),Object.defineProperty(this,w,{value:q}),Object.defineProperty(this,g,{value:_}),Object.defineProperty(this,b,{value:T}),Object.defineProperty(this,h,{writable:!0,value:void 0}),Object.defineProperty(this,v,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:{completeCallback:null,targetElement:"#content",loadingOverlay:!0,customFormData:null,method:null}}),Object.defineProperty(this,y,{writable:!0,value:void 0}),c(this,h)[h]=r,this.isFormValid=!0,c(this,v)[v]=n,c(this,m)[m]=i,c(this,y)[y]=(0,e.mergeSettings)(c(this,p)[p],o,r.dataset),c(this,b)[b]()}var r,n,i;return r=t,(n=[{key:"performAjaxRequest",value:(i=u(regeneratorRuntime.mark((function e(){var t,r,n,i,o,a,l,u,s,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c(this,h)[h],c(this,h)[h].getAttribute("method")?(n=c(this,h)[h].querySelector('[type="submit"][data-clicked="true"]'),r=null===(i=n)||void 0===i?void 0:i.dataset.hashChange):r=t.dataset.hashChange,c(this,v)[v].showLoadingLayer(),c(this,P)[P](n),e.prev=4,s=null!==(o=null!==(a=null===(l=t.getAttribute("method"))||void 0===l?void 0:l.toUpperCase())&&void 0!==a?a:null===(u=c(this,y)[y].method)||void 0===u?void 0:u.toUpperCase())&&void 0!==o?o:"GET",e.next=8,fetch(t.getAttribute("action")||t.getAttribute("href"),{method:s,body:"GET"!==s?c(this,w)[w](n):null,headers:{"X-Requested-With":"XMLHttpRequest"}});case 8:if((d=e.sent).ok){e.next=14;break}return e.next=12,c(this,j)[j](d);case 12:e.next=16;break;case 14:return e.next=16,c(this,O)[O](d,r);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(4),console.error(e.t0);case 21:return e.prev=21,c(this,v)[v].hideLoadingLayer(),c(this,S)[S](n),e.finish(21);case 25:case"end":return e.stop()}}),e,this,[[4,18,21,25]])}))),function(){return i.apply(this,arguments)})}])&&s(r.prototype,n),t}();function T(){var e,t=this;c(this,g)[g](),c(this,E)[E](),"A"===c(this,h)[h].nodeName?c(this,h)[h].addEventListener("click",u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.performAjaxRequest();case 2:case"end":return e.stop()}}),e)})))):(c(this,h)[h].noValidate=!0,c(this,h)[h].addEventListener("submit",(e=u(regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),c(t,m)[m].setFormAsValid(),document.dispatchEvent(new CustomEvent("acp3.ajaxFrom.submit.before",{detail:t})),!c(t,m)[m].isFormValid||!c(t,m)[m].preValidateForm()){e.next=6;break}return e.next=6,t.performAjaxRequest();case 6:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})),c(this,h)[h].addEventListener("change",(function(){!1===c(t,m)[m].isFormValid&&c(t,m)[m].checkFormElementsForErrors()})))}function _(){var e=this;c(this,h)[h].querySelectorAll("[type=submit]").forEach((function(t){t.addEventListener("click",(function(){c(e,h)[h].querySelectorAll("[type=submit]").forEach((function(e){delete e.dataset.clicked})),t.dataset.clicked="true"}))}))}function q(e){var t,r,n,i=c(this,h)[h],o=c(this,y)[y].customFormData||{};i.getAttribute("method")?(t=new FormData(i),e&&t.append(e.getAttribute("name"),"1")):t=new FormData;for(var l=0,u=Object.entries(o);l<u.length;l++){var s=(r=u[l],n=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);a=!0);}catch(u){l=!0,i=u}finally{try{a||null==r.return||r.return()}finally{if(l)throw i}}return o}}(r,n)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=s[0],f=s[1];t.append(d,f)}return t}function R(e){return C.apply(this,arguments)}function C(){return(C=u(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.clone().text();case 2:r=e.sent,400===t.status?(c(this,m)[m].handleFormErrorMessages(c(this,h)[h],r),document.dispatchEvent(new CustomEvent("acp3.ajaxFrom.submit.fail",{detail:this}))):r.length>0&&(document.open(),document.write(r),document.close());case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function M(e,t){return I.apply(this,arguments)}function I(){return(I=u(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(this,A)[A](t);case 2:n=e.sent,"function"==typeof window[c(this,y)[y].completeCallback]?window[c(this,y)[y].completeCallback](n):n.redirect_url?c(this,x)[x](r,n):(c(this,k)[k](r,n),c(this,L)[L](r),void 0!==r&&(window.location.hash=r),document.dispatchEvent(new CustomEvent("acp3.ajaxFrom.complete")));case 4:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function V(){!1!==c(this,y)[y].loadingOverlay&&c(this,v)[v].addLoadingLayer()}function H(e){e&&(e.disabled=!0)}function B(e){e&&(e.disabled=!1)}function D(e){return N.apply(this,arguments)}function N(){return(N=u(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.clone().json();case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.next=10,t.clone().text();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function U(e,t){void 0!==e?(window.location.href=t.redirect_url+e,window.location.reload()):window.location.href=t.redirect_url}function W(e){var t=this;setTimeout((function(){if(e){var r=document.querySelector('[data-hash-change="'.concat(e,'"]'));window.scrollTo({top:r.getBoundingClientRect().y,behavior:"smooth"})}else{var n=document.querySelector(c(t,y)[y].targetElement).getBoundingClientRect().y;document.scrollTop>n&&window.scrollTo({top:n,behavior:"smooth"})}}))}function X(e,t){if(e&&document.querySelector(e)){var r=(new DOMParser).parseFromString(t,"text/html");document.querySelector(e).innerHTML=r.querySelector(e).innerHTML}else document.querySelector(c(this,y)[y].targetElement).innerHTML=t}o.AjaxForm=F;var $={};function G(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function J(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}Object.defineProperty($,"__esModule",{value:!0}),$.LoadingLayer=void 0;var Q=0;function z(e){return"__private_"+Q+++"_"+e}var K=z("options"),Y=z("toggleLoadingLayer"),Z=function(){function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Object.defineProperty(this,Y,{value:ee}),Object.defineProperty(this,K,{writable:!0,value:{loadingText:""}}),J(this,K)[K]=(0,e.mergeSettings)(J(this,K)[K],n,r.dataset||{})}var r,n;return r=t,(n=[{key:"addLoadingLayer",value:function(){if(!document.getElementById("loading-layer")){var e=document.querySelector("body"),t='<div id="loading-layer" class="loading-layer"><h1><svg class="svg-icon svg-icon__spinner svg-icon--spin" fill="currentColor"><use xlink:href="'+JSON.parse(e.dataset.svgIcons).loadingLayerIcon+'"></use></svg> '+J(this,K)[K].loadingText+"</h1></div>";e.insertAdjacentHTML("beforeend",t)}}},{key:"showLoadingLayer",value:function(){J(this,Y)[Y](!0)}},{key:"hideLoadingLayer",value:function(){J(this,Y)[Y](!1)}}])&&G(r.prototype,n),t}();function ee(e){var t;null===(t=document.getElementById("loading-layer"))||void 0===t||t.classList.toggle("loading-layer__active",e)}$.LoadingLayer=Z;var te={};function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ie(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}Object.defineProperty(te,"__esModule",{value:!0}),te.FormValidator=void 0;var oe=0;function ae(e){return"__private_"+oe+++"_"+e}var le,ue=ae("isFormValid"),se=ae("defaults"),ce=ae("settings"),de=ae("formElement"),fe=ae("removeAllPreviousErrors"),he=ae("removeErrorMessageFromFormField"),ve=ae("addErrorMessageToFormField"),me=ae("focusTabWithFirstErrorMessage"),pe=ae("prettyPrintResponseErrorMessages"),ye=ae("scrollToFirstFormError"),be=ae("isElementInViewport"),ge=function(){function t(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Object.defineProperty(this,be,{value:Ae}),Object.defineProperty(this,ye,{value:Se}),Object.defineProperty(this,pe,{value:Pe}),Object.defineProperty(this,me,{value:Ee}),Object.defineProperty(this,ve,{value:Oe}),Object.defineProperty(this,he,{value:je}),Object.defineProperty(this,fe,{value:we}),Object.defineProperty(this,ue,{writable:!0,value:!0}),Object.defineProperty(this,se,{writable:!0,value:{scrollOffsetElement:null}}),Object.defineProperty(this,ce,{writable:!0,value:void 0}),Object.defineProperty(this,de,{writable:!0,value:void 0}),ie(this,ce)[ce]=(0,e.mergeSettings)(ie(this,se)[se],n,r.dataset),ie(this,de)[de]=r}var r,n;return r=t,(n=[{key:"preValidateForm",value:function(){return this.checkFormElementsForErrors(),ie(this,me)[me](),ie(this,ye)[ye](),ie(this,ue)[ue]}},{key:"checkFormElementsForErrors",value:function(){ie(this,fe)[fe]();var e,t=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return re(e,void 0);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?re(e,void 0):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){l=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw o}}}}(ie(this,de)[de].elements);try{for(t.s();!(e=t.n()).done;){var r=e.value;"INPUT"!==r.nodeName&&"TEXTAREA"!==r.nodeName&&"SELECT"!==r.nodeName||r.checkValidity()||(ie(this,ve)[ve](r,r.validationMessage),ie(this,ue)[ue]=!1)}}catch(n){t.e(n)}finally{t.f()}}},{key:"isFormValid",get:function(){return ie(this,ue)[ue]}},{key:"setFormAsValid",value:function(){ie(this,ue)[ue]=!0}},{key:"handleFormErrorMessages",value:function(e,t){var r,n=e.querySelector(".modal-body");null===(r=document.getElementById("error-box"))||void 0===r||r.remove(),n?n.insertAdjacentHTML("afterbegin",t):e.insertAdjacentHTML("afterbegin",t),ie(this,pe)[pe](e,document.getElementById("error-box"))}}])&&ne(r.prototype,n),t}();function we(){ie(this,de)[de].querySelectorAll(".is-invalid").forEach((function(e){e.classList.remove("is-invalid")}))}function je(e){var t,r;null===(t=e.closest("div"))||void 0===t||null===(r=t.querySelector(".invalid-feedback"))||void 0===r||r.remove()}function Oe(e,t){ie(this,he)[he](e),e.classList.add("is-invalid"),e.closest("div:not(.input-group):not(.btn-group)").insertAdjacentHTML("beforeend",'<div class="invalid-feedback">'.concat(t,"</div>"))}function Ee(){if(ie(this,de)[de].querySelector(".nav-tabs")){var e=ie(this,de)[de].querySelector(".is-invalid");if(e){var t=e.closest(".tab-pane").getAttribute("id");ie(this,de)[de].querySelector('.nav-tabs a[href="#'+t+'"]').click(),e.focus()}}}function Pe(e,t){var r=this;ie(this,fe)[fe](),t.querySelectorAll("li").forEach((function(t){var n=t.dataset.element;if(n.length>0){var i=document.getElementById(n)||e.querySelector('[id|="'+n+'"]');i&&(ie(r,ve)[ve](i[0],t.innerHTML),t.remove())}})),0===t.querySelectorAll("li").length&&t.remove(),ie(this,me)[me](),ie(this,ye)[ye]()}function Se(){var e;if(!((null===(e=ie(this,de)[de].closest(".modal"))||void 0===e?void 0:e.length)>0)){var t=ie(this,de)[de].querySelectorAll(".is-invalid");if(t&&0!==t.length&&!ie(this,be)[be](ie(this,de)[de].querySelector(".invalid-feedback"))){var r=t.item(0).getBoundingClientRect().top;if(ie(this,ce)[ce].scrollOffsetElement){var n=document.querySelector(ie(this,ce)[ce].scrollOffsetElement);n&&(r-=n.clientHeight)}window.scrollTo({top:r,behavior:"smooth"})}}}function Ae(e){var t=document.querySelector(ie(this,ce)[ce].scrollOffsetElement),r=0;t&&(r=t.clientHeight);var n=e.getBoundingClientRect();return n.top>=r&&n.left>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&n.right<=(window.innerWidth||document.documentElement.clientWidth)}te.FormValidator=ge,(le=jQuery).fn.formSubmit=function(e){return this.each((function(){le.data(this,"plugin_formSubmit")||le.data(this,"plugin_formSubmit",new o.AjaxForm(this,new $.LoadingLayer(this,e),new te.FormValidator(this,e),e))}))},le('[data-ajax-form="true"]').formSubmit(),le(document).on("draw.dt",(function(e){le(e.target).find('[data-ajax-form="true"]').formSubmit()}))}();
//# sourceMappingURL=ajax-form.min.js.map

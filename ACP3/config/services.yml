services:
  core.context:
    class : ACP3\Core\Context
    arguments: ['@core.auth', '@core.lang', '@core.modules', '@core.request', '@core.router', '@core.view']

  core.context.admin:
    class : ACP3\Core\Context\Admin
    arguments: ['@core.auth', '@core.lang', '@core.modules', '@core.request', '@core.router', '@core.view', '@core.breadcrumb', '@core.seo', '@core.validator.rules.misc', '@core.session', '@core.router.aliases']

  core.context.frontend:
    class : ACP3\Core\Context\Frontend
    arguments: ['@core.auth', '@core.lang', '@core.modules', '@core.request', '@core.router', '@core.view', '@core.breadcrumb', '@core.seo']

  core.view:
    class: ACP3\Core\View
    arguments: ['@core.router']
    calls:
      - ['setContainer', ['@service_container']]

  core.view.renderer.smarty:
    class: ACP3\Core\View\Renderer\Smarty
    calls:
      - ['setContainer', ['@service_container']]

  core.view.renderer.feedgenerator:
    class: ACP3\Core\View\Renderer\FeedGenerator
    calls:
      - ['setContainer', ['@service_container']]

  core.redirect:
    class: ACP3\Core\Redirect
    arguments: ['@core.request', '@core.router']

  core.request:
    class: ACP3\Core\Request
    arguments: ['@core.db', '@core.modules']

  core.router:
    class: ACP3\Core\Router
    arguments: ['@core.router.aliases']

  core.router.aliases:
    class: ACP3\Core\Router\Aliases
    arguments: ['@core.db']

  core.session:
    class: ACP3\Core\Session
    arguments: ['@core.db']

  core.auth:
    class: ACP3\Core\Auth
    arguments: ['@core.db', '@core.session', '@core.helpers.secure']

  core.acl:
    class: ACP3\Core\ACL
    arguments: ['@core.auth', '@core.db']

  core.lang:
    class: ACP3\Core\Lang
    arguments: ['@core.auth']

  core.modules:
    class: ACP3\Core\Modules
    arguments: ['@core.db', '@core.acl', '@core.lang']

  core.pagination:
    class: ACP3\Core\Pagination
    arguments: ['@core.auth', '@core.lang', '@core.seo', '@core.request', '@core.router', '@core.view', '@core.validator.rules.misc']

  core.seo:
    class: ACP3\Core\SEO
    arguments: ['@core.db', '@core.lang', '@core.request', '@core.router.aliases', '@core.view']

  core.date:
    class: ACP3\Core\Date
    arguments: ['@core.auth', '@core.lang', '@core.validator.rules.date', '@core.view']

  core.breadcrumb:
    class: ACP3\Core\Breadcrumb
    arguments: ['@core.db', '@core.lang', '@core.request', '@core.router', '@core.view']

  core.functions:
    class: ACP3\Core\Functions
    arguments: ['@core.auth', '@core.db', '@core.view']

  core.helpers.alerts:
    class: ACP3\Core\Helpers\Alerts
    arguments: ['@core.request', '@core.view', '@core.helpers.output']

  core.helpers.output:
    class: ACP3\Core\Helpers\Output

  core.helpers.redirect:
    class: ACP3\Core\Helpers\RedirectMessages
    arguments: ['@core.redirect', '@core.request', '@core.view']

  core.helpers.secure:
    class: ACP3\Core\Helpers\Secure
    arguments: ['@core.view']

  core.helpers.stringFormatter:
    class: ACP3\Core\Helpers\StringFormatter

  core.helpers.formatter.rewriteInternalUri:
    class: ACP3\Core\Helpers\Formatter\RewriteInternalUri
    arguments: ['@core.modules', '@core.router', '@core.validator.rules.router.aliases']

  core.helpers.toc:
    class: ACP3\Core\Helpers\TableOfContents
    arguments: ['@core.breadcrumb', '@core.lang', '@core.seo', '@core.request', '@core.router', '@core.validator.rules.misc', '@core.view']

  system.config:
    class: ACP3\Core\Config
    arguments: ['@core.db', 'system']

  core.modules.controller:
    abstract: true
    arguments: ['@core.context']

  core.modules.controller.frontend:
    abstract: true
    arguments: ['@core.context.frontend']

  core.modules.controller.admin:
    abstract: true
    arguments: ['@core.context.admin']

  core.modules.abstract.installer:
    abstract: true
    arguments: ['@core.db', '@system.model', '@permissions.model']

imports:
  - { resource: validation.yml }